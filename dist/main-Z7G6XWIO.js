import{$ as Cl,$a as v,$b as ql,$c as si,A as fl,Aa as _t,Ab as pn,Ac as gn,B as on,Ba as kl,Bb as Fl,Bc as sc,C as Ra,Ca as Pa,Cb as Ie,Cc as lc,D as hl,Da as We,Db as Nt,Dc as ct,E as Tt,Ea as Ol,Eb as Nr,Ec as cc,F as an,Fa as sn,Fb as Fi,Fc as we,G as Ge,Ga as Il,Gb as In,Gc as oi,H as De,Ha as Ir,Hb as nt,Hc as zr,I as ml,Ia as F,Ib as S,Ic as vn,J as ue,Ja as ti,Jb as R,Jc as uc,K as Jn,Ka as ge,Kb as it,Kc as dc,L as gl,La as Nl,Lb as Ul,Lc as Ba,M as Ce,Ma as ln,Mb as H,Mc as Vr,N as de,Na as yt,Nb as Pr,Nc as ai,O as p,Oa as Pl,Ob as Pt,Oc as ja,P as Ta,Pa as Al,Pb as pe,Pc as pc,Q as vl,Qa as Aa,Qb as Xt,Qc as fc,R as _l,Ra as La,Rb as fn,Rc as hc,S as kn,Sa as Ll,Sb as Bl,Sc as Fr,T as qe,Ta as zl,Tb as jl,Tc as Lt,U as z,Ua as G,Ub as hn,Uc as _n,V,Va as q,Vb as ni,Vc as ut,W as Pi,Wa as Qe,Wb as $l,Wc as mc,X as ka,Xa as Re,Xb as wt,Xc as gc,Y as kt,Ya as Te,Yb as Hl,Yc as Ye,Z as Ze,Za as N,Zb as Ui,Zc as Nn,_ as yl,_a as m,_b as Gl,_c as vc,a as I,aa as gt,ab as W,ac as Wl,ad as _c,b as me,ba as Ai,bb as B,bc as ii,bd as yc,c as fe,ca as Oa,cb as $,cc as Ql,cd as Pn,d as ol,da as Tr,db as It,dc as ri,dd as Cc,e as al,ea as wl,eb as za,ec as Fa,ed as wc,f as sl,fa as P,fb as Va,fc as Yl,fd as bc,g as qt,ga as _e,gb as st,gc as Kl,gd as Ur,h as ze,ha as Ot,hb as Z,hc as Xl,hd as Br,i as Wt,ia as Yt,ib as zi,ic as Ar,id as xc,j as He,ja as ei,jb as k,jc as Bi,jd as jr,k as K,ka as bl,kb as Ee,kc as Zl,l as ll,la as vt,lb as D,lc as Jl,m as Oi,ma as xl,mb as cn,mc as ec,n as cl,na as Ia,nb as Ct,nc as tc,o as ul,oa as Sl,ob as Je,oc as Lr,p as Me,pa as kr,pb as et,pc as nc,q as Ma,qa as Na,qb as tt,qc as ic,r as Rt,ra as Dl,rb as Kt,rc as lt,s as Ii,sa as Or,sb as un,sc as se,t as dl,ta as El,tb as dn,tc as rc,u as Mr,ua as d,ub as ae,uc as re,v as pl,va as Li,vb as Vl,vc as Ua,w as Qt,wa as Ml,wb as Vi,wc as oc,x as Rr,xa as Rl,xb as _,xc as mn,y as Ni,ya as Tl,yb as E,yc as ac,z as Zn,za as On,zb as ie,zc as At}from"./chunk-TKFHRPNW.js";var ji=class{_doc;constructor(n){this._doc=n}manager},$r=(()=>{class t extends ji{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(de(Ze))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),qr=new Ce(""),qa=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(a=>{a.manager=this});let r=e.filter(a=>!(a instanceof $r));this._plugins=r.slice().reverse();let o=e.find(a=>a instanceof $r);o&&this._plugins.push(o)}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new De(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||t)(de(qr),de(Ai))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),$a="ng-app-id";function Sc(t){for(let n of t)n.remove()}function Dc(t,n){let e=n.createElement("style");return e.textContent=t,e}function mf(t,n,e,i){let r=t.head?.querySelectorAll(`style[${$a}="${n}"],link[${$a}="${n}"]`);if(r)for(let o of r)o.removeAttribute($a),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Ga(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var Wa=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,mf(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,Dc);i?.forEach(r=>this.addUsage(r,this.external,Ga))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(Sc(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Sc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,Dc(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,Ga(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||t)(de(Ze),de(Ia),de(Na,8),de(kr))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Qa=/%COMP%/g;var Mc="%COMP%",gf=`_nghost-${Mc}`,vf=`_ngcontent-${Mc}`,_f=!0,yf=new Ce("",{factory:()=>_f});function Cf(t){return vf.replace(Qa,t)}function wf(t){return gf.replace(Qa,t)}function Rc(t,n){return n.map(e=>e.replace(Qa,t))}var Ya=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,a,s,l=null,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=s,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new $i(e,a,s,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(e,i);return r instanceof Gr?r.applyToHost(e):r instanceof Hi&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case Or.Emulated:o=new Gr(l,c,i,this.appId,u,a,s,f,h);break;case Or.ShadowDom:return new Hr(l,e,i,a,s,this.nonce,f,h,c);case Or.ExperimentalIsolatedShadowDom:return new Hr(l,e,i,a,s,this.nonce,f,h);default:o=new Hi(l,c,i,u,a,s,f,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||t)(de(qa),de(Wa),de(Ia),de(yf),de(Ze),de(Ai),de(Na),de(Rl,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),$i=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,i,r,o){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(Ha[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(Ec(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(Ec(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new De(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;let o=Ha[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){let r=Ha[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Li.DashCase|Li.Important)?n.style.setProperty(e,i,r&Li.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Li.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n!=null&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i,r){if(typeof n=="string"&&(n=Ui().getGlobalEventTarget(this.doc,n),!n))throw new De(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,e,o)),this.eventManager.addEventListener(n,e,o,r)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function Ec(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hr=class extends $i{hostEl;sharedStylesHost;shadowRoot;constructor(n,e,i,r,o,a,s,l,c){super(n,r,o,s,l),this.hostEl=e,this.sharedStylesHost=c,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Rc(i.id,u);for(let h of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}let f=i.getExternalStyles?.();if(f)for(let h of f){let g=Ga(h,r);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Hi=class extends $i{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,i,r,o,a,s,l,c){super(n,o,a,s,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?Rc(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ml.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gr=class extends Hi{contentAttr;hostAttr;constructor(n,e,i,r,o,a,s,l,c){let u=r+"-"+i.id;super(n,e,i,o,a,s,l,c,u),this.contentAttr=Cf(u),this.hostAttr=wf(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}};var Wr=class t extends ql{supportsDOMEvents=!0;static makeCurrent(){Gl(new t)}onAndCancel(n,e,i,r){return n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=bf();return e==null?null:xf(e)}resetBaseElement(){Gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Zl(document.cookie,n)}},Gi=null;function bf(){return Gi=Gi||document.head.querySelector("base"),Gi?Gi.getAttribute("href"):null}function xf(t){return new URL(t,document.baseURI).pathname}var Sf=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Tc=["alt","control","meta","shift"],Df={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ef={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},kc=(()=>{class t extends ji{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,i,r,o){let a=t.parseEventName(i),s=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ui().onAndCancel(e,a.domEventName,s,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),Tc.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(e,i){let r=Df[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Tc.forEach(a=>{if(a!==r){let s=Ef[a];s(e)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||t)(de(Ze))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();function Ka(t,n,e){let i=I({rootComponent:t,platformRef:e?.platformRef},Mf(n));return $l(i)}function Mf(t){return{appProviders:[...If,...t?.providers??[]],platformProviders:Of}}function Rf(){Wr.makeCurrent()}function Tf(){return new Oa}function kf(){return xl(document),document}var Of=[{provide:kr,useValue:ec},{provide:Sl,useValue:Rf,multi:!0},{provide:Ze,useFactory:kf}];var If=[{provide:_l,useValue:"root"},{provide:Oa,useFactory:Tf},{provide:qr,useClass:$r,multi:!0},{provide:qr,useClass:kc,multi:!0},Ya,Wa,qa,{provide:kl,useExisting:Ya},{provide:Jl,useClass:Sf},[]];var Oc=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||t)(de(Ze))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Y="primary",nr=Symbol("RouteTitle"),ts=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Vn(t){return new ts(t)}function Uc(t,n,e){let i=e.path.split("/");if(i.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],s=t[o];if(a[0]===":")r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Jr(t){return new Promise((n,e)=>{t.pipe(on()).subscribe({next:i=>n(i),error:i=>e(i)})})}function Pf(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!zt(t[e],n[e]))return!1;return!0}function zt(t,n){let e=t?ns(t):void 0,i=n?ns(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Bc(t[r],n[r]))return!1;return!0}function ns(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Bc(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}else return t===n}function jc(t){return t.length>0?t[t.length-1]:null}function Fn(t){return Oi(t)?t:Al(t)?He(Promise.resolve(t)):K(t)}function $c(t){return Oi(t)?Jr(t):Promise.resolve(t)}var Af={exact:Gc,subset:qc},Hc={exact:Lf,subset:zf,ignored:()=>!0};function Ic(t,n,e){return Af[e.paths](t.root,n.root,e.matrixParams)&&Hc[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Lf(t,n){return zt(t,n)}function Gc(t,n,e){if(!Ln(t.segments,n.segments)||!Kr(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!t.children[i]||!Gc(t.children[i],n.children[i],e))return!1;return!0}function zf(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>Bc(t[e],n[e]))}function qc(t,n,e){return Wc(t,n,n.segments,e)}function Wc(t,n,e,i){if(t.segments.length>e.length){let r=t.segments.slice(0,e.length);return!(!Ln(r,e)||n.hasChildren()||!Kr(r,e,i))}else if(t.segments.length===e.length){if(!Ln(t.segments,e)||!Kr(t.segments,e,i))return!1;for(let r in n.children)if(!t.children[r]||!qc(t.children[r],n.children[r],i))return!1;return!0}else{let r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!Ln(t.segments,r)||!Kr(t.segments,r,i)||!t.children[Y]?!1:Wc(t.children[Y],n,o,i)}}function Kr(t,n,e){return n.every((i,r)=>Hc[e](t[r].parameters,i.parameters))}var xt=class{root;queryParams;fragment;_queryParamMap;constructor(n=new le([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){return Uf.serialize(this)}},le=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xr(this)}},yn=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Vn(this.parameters),this._parameterMap}toString(){return Yc(this)}};function Vf(t,n){return Ln(t,n)&&t.every((e,i)=>zt(e.parameters,n[i].parameters))}function Ln(t,n){return t.length!==n.length?!1:t.every((e,i)=>e.path===n[i].path)}function Ff(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===Y&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Y&&(e=e.concat(n(r,i)))}),e}var Un=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:()=>new Zt,providedIn:"root"})}return t})(),Zt=class{parse(n){let e=new rs(n);return new xt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${qi(n.root,!0)}`,i=$f(n.queryParams),r=typeof n.fragment=="string"?`#${Bf(n.fragment)}`:"";return`${e}${i}${r}`}},Uf=new Zt;function Xr(t){return t.segments.map(n=>Yc(n)).join("/")}function qi(t,n){if(!t.hasChildren())return Xr(t);if(n){let e=t.children[Y]?qi(t.children[Y],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Y&&i.push(`${r}:${qi(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Ff(t,(i,r)=>r===Y?[qi(t.children[Y],!1)]:[`${r}:${qi(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${Xr(t)}/${e[0]}`:`${Xr(t)}/(${e.join("//")})`}}function Qc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qr(t){return Qc(t).replace(/%3B/gi,";")}function Bf(t){return encodeURI(t)}function is(t){return Qc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zr(t){return decodeURIComponent(t)}function Nc(t){return Zr(t.replace(/\+/g,"%20"))}function Yc(t){return`${is(t.path)}${jf(t.parameters)}`}function jf(t){return Object.entries(t).map(([n,e])=>`;${is(n)}=${is(e)}`).join("")}function $f(t){let n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Qr(e)}=${Qr(r)}`).join("&"):`${Qr(e)}=${Qr(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Hf=/^[^\/()?;#]+/;function Xa(t){let n=t.match(Hf);return n?n[0]:""}var Gf=/^[^\/()?;=#]+/;function qf(t){let n=t.match(Gf);return n?n[0]:""}var Wf=/^[^=?&#]+/;function Qf(t){let n=t.match(Wf);return n?n[0]:""}var Yf=/^[^&#]+/;function Kf(t){let n=t.match(Yf);return n?n[0]:""}var rs=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Y]=new le(n,e)),i}parseSegment(){let n=Xa(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new De(4009,!1);return this.capture(n),new yn(Zr(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=qf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Xa(this.remaining);r&&(i=r,this.capture(i))}n[Zr(e)]=Zr(i)}parseQueryParam(n){let e=Qf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=Kf(this.remaining);a&&(i=a,this.capture(i))}let r=Nc(e),o=Nc(i);if(n.hasOwnProperty(r)){let a=n[r];Array.isArray(a)||(a=[a],n[r]=a),a.push(o)}else n[r]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Xa(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new De(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Y);let a=this.parseChildren();e[o??Y]=Object.keys(a).length===1&&a[Y]?a[Y]:new le([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new De(4011,!1)}};function Kc(t){return t.segments.length>0?new le([],{[Y]:t}):t}function Xc(t){let n={};for(let[i,r]of Object.entries(t.children)){let o=Xc(r);if(i===Y&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let e=new le(t.segments,n);return Xf(e)}function Xf(t){if(t.numberOfChildren===1&&t.children[Y]){let n=t.children[Y];return new le(t.segments.concat(n.segments),n.children)}return t}function Cn(t){return t instanceof xt}function Zc(t,n,e=null,i=null,r=new Zt){let o=Jc(t);return eu(o,n,e,i,r)}function Jc(t){let n;function e(o){let a={};for(let l of o.children){let c=e(l);a[l.outlet]=c}let s=new le(o.url,a);return o===t&&(n=s),s}let i=e(t.root),r=Kc(i);return n??r}function eu(t,n,e,i,r){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return Za(o,o,o,e,i,r);let a=Zf(n);if(a.toRoot())return Za(o,o,new le([],{}),e,i,r);let s=Jf(a,o,t),l=s.processChildren?Qi(s.segmentGroup,s.index,a.commands):nu(s.segmentGroup,s.index,a.commands);return Za(o,s.segmentGroup,l,e,i,r)}function eo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ki(t){return typeof t=="object"&&t!=null&&t.outlets}function Pc(t,n,e){t||="\u0275";let i=new xt;return i.queryParams={[t]:n},e.parse(e.serialize(i)).queryParams[t]}function Za(t,n,e,i,r,o){let a={};for(let[c,u]of Object.entries(i??{}))a[c]=Array.isArray(u)?u.map(f=>Pc(c,f,o)):Pc(c,u,o);let s;t===n?s=e:s=tu(t,n,e);let l=Kc(Xc(s));return new xt(l,a,r)}function tu(t,n,e){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===n?i[r]=e:i[r]=tu(o,n,e)}),new le(t.segments,i)}var to=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&eo(i[0]))throw new De(4003,!1);let r=i.find(Ki);if(r&&r!==jc(i))throw new De(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Zf(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new to(!0,0,t);let n=0,e=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?n++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new to(e,n,i)}var ci=class{segmentGroup;processChildren;index;constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}};function Jf(t,n,e){if(t.isAbsolute)return new ci(n,!0,0);if(!e)return new ci(n,!1,NaN);if(e.parent===null)return new ci(e,!0,0);let i=eo(t.commands[0])?0:1,r=e.segments.length-1+i;return eh(e,r,t.numberOfDoubleDots)}function eh(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new De(4005,!1);r=i.segments.length}return new ci(i,!1,r-o)}function th(t){return Ki(t[0])?t[0].outlets:{[Y]:t}}function nu(t,n,e){if(t??=new le([],{}),t.segments.length===0&&t.hasChildren())return Qi(t,n,e);let i=nh(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new le(t.segments.slice(0,i.pathIndex),{});return o.children[Y]=new le(t.segments.slice(i.pathIndex),t.children),Qi(o,0,r)}else return i.match&&r.length===0?new le(t.segments,{}):i.match&&!t.hasChildren()?os(t,n,e):i.match?Qi(t,0,r):os(t,n,e)}function Qi(t,n,e){if(e.length===0)return new le(t.segments,{});{let i=th(e),r={};if(Object.keys(i).some(o=>o!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let o=Qi(t.children[Y],n,e);return new le(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=nu(t.children[o],n,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new le(t.segments,r)}}function nh(t,n,e){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;let a=t.segments[r],s=e[i];if(Ki(s))break;let l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Lc(l,c,a))return o;i+=2}else{if(!Lc(l,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function os(t,n,e){let i=t.segments.slice(0,n),r=0;for(;r<e.length;){let o=e[r];if(Ki(o)){let l=ih(o.outlets);return new le(i,l)}if(r===0&&eo(e[0])){let l=t.segments[n];i.push(new yn(l.path,Ac(e[0]))),r++;continue}let a=Ki(o)?o.outlets[Y]:`${o}`,s=r<e.length-1?e[r+1]:null;a&&s&&eo(s)?(i.push(new yn(a,Ac(s))),r+=2):(i.push(new yn(a,{})),r++)}return new le(i,{})}function ih(t){let n={};return Object.entries(t).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[e]=os(new le([],{}),0,i))}),n}function Ac(t){let n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function Lc(t,n,e){return t==e.path&&zt(n,e.parameters)}var ui="imperative",ke=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(ke||{}),ot=class{id;url;constructor(n,e){this.id=n,this.url=e}},wn=class extends ot{type=ke.NavigationStart;navigationTrigger;restoredState;constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},at=class extends ot{urlAfterRedirects;type=ke.NavigationEnd;constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Fe||{}),pi=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(pi||{}),Vt=class extends ot{reason;code;type=ke.NavigationCancel;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ft=class extends ot{reason;code;type=ke.NavigationSkipped;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}},fi=class extends ot{error;target;type=ke.NavigationError;constructor(n,e,i,r){super(n,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xi=class extends ot{urlAfterRedirects;state;type=ke.RoutesRecognized;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},no=class extends ot{urlAfterRedirects;state;type=ke.GuardsCheckStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},io=class extends ot{urlAfterRedirects;state;shouldActivate;type=ke.GuardsCheckEnd;constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ro=class extends ot{urlAfterRedirects;state;type=ke.ResolveStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oo=class extends ot{urlAfterRedirects;state;type=ke.ResolveEnd;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ao=class{route;type=ke.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},so=class{route;type=ke.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lo=class{snapshot;type=ke.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},co=class{snapshot;type=ke.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uo=class{snapshot;type=ke.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},po=class{snapshot;type=ke.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hi=class{routerEvent;position;anchor;type=ke.Scroll;constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Zi=class{},mi=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function rh(t){return!(t instanceof Zi)&&!(t instanceof mi)}function oh(t,n){return t.providers&&!t._injector&&(t._injector=Ir(t.providers,n,`Route: ${t.path}`)),t._injector??n}function bt(t){return t.outlet||Y}function ah(t,n){let e=t.filter(i=>bt(i)===n);return e.push(...t.filter(i=>bt(i)!==n)),e}function _i(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var fo=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _i(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Bn(this.rootInjector)}},Bn=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new fo(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||t)(de(kn))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ho=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=as(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){let e=as(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=ss(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return ss(n,this._root).map(e=>e.value)}};function as(t,n){if(t===n.value)return n;for(let e of n.children){let i=as(t,e);if(i)return i}return null}function ss(t,n){if(t===n.value)return[n];for(let e of n.children){let i=ss(t,e);if(i.length)return i.unshift(n),i}return[]}var rt=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function li(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Ji=class extends ho{snapshot;constructor(n,e){super(n),this.snapshot=e,fs(this,n)}toString(){return this.snapshot.toString()}};function iu(t){let n=sh(t),e=new ze([new yn("",{})]),i=new ze({}),r=new ze({}),o=new ze({}),a=new ze(""),s=new Ut(e,i,o,a,r,Y,t,n.root);return s.snapshot=n.root,new Ji(new rt(s,[]),n)}function sh(t){let n={},e={},i={},o=new zn([],n,i,"",e,Y,t,null,{});return new er("",new rt(o,[]))}var Ut=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,i,r,o,a,s,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Me(c=>c[nr]))??K(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(n=>Vn(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(n=>Vn(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mo(t,n,e="emptyOnly"){let i,{routeConfig:r}=t;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:I(I({},n.params),t.params),data:I(I({},n.data),t.data),resolve:I(I(I(I({},t.data),n.data),r?.data),t._resolvedData)}:i={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},r&&ou(r)&&(i.resolve[nr]=r.title),i}var zn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nr]}constructor(n,e,i,r,o,a,s,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},er=class extends ho{url;constructor(n,e){super(e),this.url=n,fs(this,e)}toString(){return ru(this._root)}};function fs(t,n){n.value._routerState=t,n.children.forEach(e=>fs(t,e))}function ru(t){let n=t.children.length>0?` { ${t.children.map(ru).join(", ")} } `:"";return`${t.value}${n}`}function Ja(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,zt(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),zt(n.params,e.params)||t.paramsSubject.next(e.params),Pf(n.url,e.url)||t.urlSubject.next(e.url),zt(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ls(t,n){let e=zt(t.params,n.params)&&Vf(t.url,n.url),i=!t.parent!=!n.parent;return e&&!i&&(!t.parent||ls(t.parent,n.parent))}function ou(t){return typeof t.title=="string"||t.title===null}var au=new Ce(""),jn=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Y;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=pe();parentContexts=p(Bn);location=p(sn);changeDetector=p(hn);inputBinder=p(ir,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new De(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new De(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new De(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new De(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new cs(e,s,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yt]})}return t})(),cs=class{route;childContexts;parent;outletData;constructor(n,e,i,r){this.route=n,this.childContexts=e,this.parent=i,this.outletData=r}get(n,e){return n===Ut?this.route:n===Bn?this.childContexts:n===au?this.outletData:this.parent.get(n,e)}},ir=new Ce(""),hs=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Ma([i.queryParams,i.params,i.data]).pipe(Tt(([o,a,s],l)=>(s=I(I(I({},o),a),s),l===0?K(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let a=Hl(i.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),ms=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&W(0,"router-outlet")},dependencies:[jn],encapsulation:2})}return t})();function gs(t){let n=t.children&&t.children.map(gs),e=n?me(I({},t),{children:n}):I({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Y&&(e.component=ms),e}function lh(t,n,e){let i=tr(t,n._root,e?e._root:void 0);return new Ji(i,n)}function tr(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=n.value;let r=ch(t,n,e);return new rt(i,r)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>tr(t,s)),a}}let i=uh(n.value),r=n.children.map(o=>tr(t,o));return new rt(i,r)}}function ch(t,n,e){return n.children.map(i=>{for(let r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return tr(t,i,r);return tr(t,i)})}function uh(t){return new Ut(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var gi=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},su="ngNavigationCancelingError";function go(t,n){let{redirectTo:e,navigationBehaviorOptions:i}=Cn(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=lu(!1,Fe.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function lu(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[su]=!0,e.cancellationCode=n,e}function dh(t){return cu(t)&&Cn(t.url)}function cu(t){return!!t&&t[su]}var ph=(t,n,e,i)=>Me(r=>(new us(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)),us=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,i,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Ja(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){let r=li(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=li(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=li(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){let r=li(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new po(o.value.snapshot))}),n.children.length&&this.forwardEvent(new co(n.value.snapshot))}activateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(Ja(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ja(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,i)}},vo=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},di=class{component;route;constructor(n,e){this.component=n,this.route=e}};function fh(t,n,e){let i=t._root,r=n?n._root:null;return Wi(i,r,e,[i.value])}function hh(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function yi(t,n){let e=Symbol(),i=n.get(t,e);return i===e?typeof t=="function"&&!gl(t)?t:n.get(t):i}function Wi(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=li(n);return t.children.forEach(a=>{mh(a,o[a.value.outlet],e,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Yi(s,e.getContext(a),r)),r}function mh(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=gh(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new vo(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Wi(t,n,s?s.children:null,i,r):Wi(t,n,e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new di(s.outlet.component,a))}else a&&Yi(n,s,r),r.canActivateChecks.push(new vo(i)),o.component?Wi(t,null,s?s.children:null,i,r):Wi(t,null,e,i,r);return r}function gh(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Ln(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Ln(t.url,n.url)||!zt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ls(t,n)||!zt(t.queryParams,n.queryParams);case"paramsChange":default:return!ls(t,n)}}function Yi(t,n,e){let i=li(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?n?Yi(a,n.children.getContext(o),e):Yi(a,null,e):Yi(a,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new di(n.outlet.component,r)):e.canDeactivateChecks.push(new di(null,r)):e.canDeactivateChecks.push(new di(null,r))}function rr(t){return typeof t=="function"}function vh(t){return typeof t=="boolean"}function _h(t){return t&&rr(t.canLoad)}function yh(t){return t&&rr(t.canActivate)}function Ch(t){return t&&rr(t.canActivateChild)}function wh(t){return t&&rr(t.canDeactivate)}function bh(t){return t&&rr(t.canMatch)}function uu(t){return t instanceof cl||t?.name==="EmptyError"}var Yr=Symbol("INITIAL_VALUE");function vi(){return Tt(t=>Ma(t.map(n=>n.pipe(Zn(1),hl(Yr)))).pipe(Me(n=>{for(let e of n)if(e!==!0){if(e===Yr)return Yr;if(e===!1||xh(e))return e}return!0}),Qt(n=>n!==Yr),Zn(1)))}function xh(t){return Cn(t)||t instanceof gi}function du(t){return t.aborted?K(void 0).pipe(Zn(1)):new sl(n=>{let e=()=>{n.next(),n.complete()};return t.addEventListener("abort",e),()=>t.removeEventListener("abort",e)})}function pu(t){return an(du(t))}function Sh(t,n){return Rt(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?K(me(I({},e),{guardsResult:!0})):Dh(a,i,r,t).pipe(Rt(s=>s&&vh(s)?Eh(i,o,t,n):K(s)),Me(s=>me(I({},e),{guardsResult:s})))})}function Dh(t,n,e,i){return He(t).pipe(Rt(r=>Oh(r.component,r.route,e,n,i)),on(r=>r!==!0,!0))}function Eh(t,n,e,i){return He(n).pipe(Ni(r=>dl(Rh(r.route.parent,i),Mh(r.route,i),kh(t,r.path,e),Th(t,r.route,e))),on(r=>r!==!0,!0))}function Mh(t,n){return t!==null&&n&&n(new uo(t)),K(!0)}function Rh(t,n){return t!==null&&n&&n(new lo(t)),K(!0)}function Th(t,n,e){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return K(!0);let r=i.map(o=>Mr(()=>{let a=_i(n)??e,s=yi(o,a),l=yh(s)?s.canActivate(n,t):qe(a,()=>s(n,t));return Fn(l).pipe(on())}));return K(r).pipe(vi())}function kh(t,n,e){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>hh(a)).filter(a=>a!==null).map(a=>Mr(()=>{let s=a.guards.map(l=>{let c=_i(a.node)??e,u=yi(l,c),f=Ch(u)?u.canActivateChild(i,t):qe(c,()=>u(i,t));return Fn(f).pipe(on())});return K(s).pipe(vi())}));return K(o).pipe(vi())}function Oh(t,n,e,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let a=o.map(s=>{let l=_i(n)??r,c=yi(s,l),u=wh(c)?c.canDeactivate(t,n,e,i):qe(l,()=>c(t,n,e,i));return Fn(u).pipe(on())});return K(a).pipe(vi())}function Ih(t,n,e,i,r){let o=n.canLoad;if(o===void 0||o.length===0)return K(!0);let a=o.map(s=>{let l=yi(s,t),c=_h(l)?l.canLoad(n,e):qe(t,()=>l(n,e)),u=Fn(c);return r?u.pipe(pu(r)):u});return K(a).pipe(vi(),fu(i))}function fu(t){return al(Ge(n=>{if(typeof n!="boolean")throw go(t,n)}),Me(n=>n===!0))}function Nh(t,n,e,i,r){let o=n.canMatch;if(!o||o.length===0)return K(!0);let a=o.map(s=>{let l=yi(s,t),c=bh(l)?l.canMatch(n,e):qe(t,()=>l(n,e)),u=Fn(c);return r?u.pipe(pu(r)):u});return K(a).pipe(vi(),fu(i))}var An=class hu extends Error{segmentGroup;constructor(n){super(),this.segmentGroup=n||null,Object.setPrototypeOf(this,hu.prototype)}},ds=class mu extends Error{urlTree;constructor(n){super(),this.urlTree=n,Object.setPrototypeOf(this,mu.prototype)}};function Ph(t){throw new De(4e3,!1)}function Ah(t){throw lu(!1,Fe.GuardRejected)}var Lh=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){return fe(this,null,function*(){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return i;if(r.numberOfChildren>1||!r.children[Y])throw Ph(`${n.redirectTo}`);r=r.children[Y]}})}applyRedirectCommands(n,e,i,r,o){return fe(this,null,function*(){let a=yield zh(e,r,o);if(a instanceof xt)throw new ds(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),n,i);if(a[0]==="/")throw new ds(s);return s})}applyRedirectCreateUrlTree(n,e,i,r){let o=this.createSegmentGroup(n,e.root,i,r);return new xt(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[r]=e[s]}else i[r]=o}),i}createSegmentGroup(n,e,i,r){let o=this.createSegments(n,e.segments,i,r),a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(n,l,i,r)}),new le(o,a)}createSegments(n,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){let r=i[e.path.substring(1)];if(!r)throw new De(4001,!1);return r}findOrReturn(n,e){let i=0;for(let r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}};function zh(t,n,e){if(typeof t=="string")return Promise.resolve(t);let i=t,{queryParams:r,fragment:o,routeConfig:a,url:s,outlet:l,params:c,data:u,title:f}=n;return Jr(Fn(qe(e,()=>i({params:c,data:u,queryParams:r,fragment:o,routeConfig:a,url:s,outlet:l,title:f}))))}var ps={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vh(t,n,e,i,r,o){let a=gu(t,n,e);return a.matched?(i=oh(n,i),Nh(i,n,e,r,o).pipe(Me(s=>s===!0?a:I({},ps)))):K(a)}function gu(t,n,e){if(n.path==="**")return Fh(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?I({},ps):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||Uc)(e,t,n);if(!r)return I({},ps);let o={};Object.entries(r.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=r.consumed.length>0?I(I({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Fh(t){return{matched:!0,parameters:t.length>0?jc(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function zc(t,n,e,i){return e.length>0&&jh(t,e,i)?{segmentGroup:new le(n,Bh(i,new le(e,t.children))),slicedSegments:[]}:e.length===0&&$h(t,e,i)?{segmentGroup:new le(t.segments,Uh(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new le(t.segments,t.children),slicedSegments:e}}function Uh(t,n,e,i){let r={};for(let o of e)if(yo(t,n,o)&&!i[bt(o)]){let a=new le([],{});r[bt(o)]=a}return I(I({},i),r)}function Bh(t,n){let e={};e[Y]=n;for(let i of t)if(i.path===""&&bt(i)!==Y){let r=new le([],{});e[bt(i)]=r}return e}function jh(t,n,e){return e.some(i=>yo(t,n,i)&&bt(i)!==Y)}function $h(t,n,e){return e.some(i=>yo(t,n,i))}function yo(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Hh(t,n,e){return n.length===0&&!t.children[e]}var Gh=class{};function qh(t,n,e,i,r,o,a="emptyOnly",s){return fe(this,null,function*(){return new Qh(t,n,e,i,r,a,o,s).recognize()})}var Wh=31,Qh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,i,r,o,a,s,l){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.abortSignal=l,this.applyRedirects=new Lh(this.urlSerializer,this.urlTree)}noMatchError(n){return new De(4002,`'${n.segmentGroup}'`)}recognize(){return fe(this,null,function*(){let n=zc(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:i}=yield this.match(n),r=new rt(i,e),o=new er("",r),a=Zc(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}})}match(n){return fe(this,null,function*(){let e=new zn([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Y,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,n,Y,e),rootSnapshot:e}}catch(i){if(i instanceof ds)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof An?this.noMatchError(i):i}})}processSegmentGroup(n,e,i,r,o){return fe(this,null,function*(){if(i.segments.length===0&&i.hasChildren())return this.processChildren(n,e,i,o);let a=yield this.processSegment(n,e,i,i.segments,r,!0,o);return a instanceof rt?[a]:[]})}processChildren(n,e,i,r){return fe(this,null,function*(){let o=[];for(let l of Object.keys(i.children))l==="primary"?o.unshift(l):o.push(l);let a=[];for(let l of o){let c=i.children[l],u=ah(e,l),f=yield this.processSegmentGroup(n,u,c,l,r);a.push(...f)}let s=vu(a);return Yh(s),s})}processSegment(n,e,i,r,o,a,s){return fe(this,null,function*(){for(let l of e)try{return yield this.processSegmentAgainstRoute(l._injector??n,e,l,i,r,o,a,s)}catch(c){if(c instanceof An||uu(c))continue;throw c}if(Hh(i,r,o))return new Gh;throw new An(i)})}processSegmentAgainstRoute(n,e,i,r,o,a,s,l){return fe(this,null,function*(){if(bt(i)!==a&&(a===Y||!yo(r,o,i)))throw new An(r);if(i.redirectTo===void 0)return this.matchSegmentAgainstRoute(n,r,i,o,a,l);if(this.allowRedirects&&s)return this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,o,a,l);throw new An(r)})}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,a,s){return fe(this,null,function*(){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:h}=gu(e,r,o);if(!l)throw new An(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Wh&&(this.allowRedirects=!1));let g=new zn(o,c,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(r),bt(r),r.component??r._loadedComponent??null,r,Fc(r)),T=mo(g,s,this.paramsInheritanceStrategy);if(g.params=Object.freeze(T.params),g.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=yield this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f,g,n),w=yield this.applyRedirects.lineralizeSegments(r,x);return this.processSegment(n,i,e,w.concat(h),a,!1,s)})}matchSegmentAgainstRoute(n,e,i,r,o,a){return fe(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let s=yield Jr(Vh(e,i,r,n,this.urlSerializer,this.abortSignal));if(i.path==="**"&&(e.children={}),!s?.matched)throw new An(e);n=i._injector??n;let{routes:l}=yield this.getChildConfig(n,i,r),c=i._loadedInjector??n,{parameters:u,consumedSegments:f,remainingSegments:h}=s,g=new zn(f,u,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(i),bt(i),i.component??i._loadedComponent??null,i,Fc(i)),T=mo(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(T.params),g.data=Object.freeze(T.data);let{segmentGroup:x,slicedSegments:w}=zc(e,f,h,l);if(w.length===0&&x.hasChildren()){let j=yield this.processChildren(c,l,x,g);return new rt(g,j)}if(l.length===0&&w.length===0)return new rt(g,[]);let y=bt(i)===o,O=yield this.processSegment(c,l,x,w,y?Y:o,!0,g);return new rt(g,O instanceof rt?[O]:[])})}getChildConfig(n,e,i){return fe(this,null,function*(){if(e.children)return{routes:e.children,injector:n};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield Jr(Ih(n,e,i,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(n,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw Ah(e)}return{routes:[],injector:n}})}};function Yh(t){t.sort((n,e)=>n.value.outlet===Y?-1:e.value.outlet===Y?1:n.value.outlet.localeCompare(e.value.outlet))}function Kh(t){let n=t.value.routeConfig;return n&&n.path===""}function vu(t){let n=[],e=new Set;for(let i of t){if(!Kh(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):n.push(i)}for(let i of e){let r=vu(i.children);n.push(new rt(i.value,r))}return n.filter(i=>!e.has(i))}function Vc(t){return t.data||{}}function Fc(t){return t.resolve||{}}var Xh=new Ce("",{factory:()=>qh});function Zh(t,n,e,i,r,o,a){let s=t.get(Xh);return Rt(l=>K(l).pipe(Tt(c=>s(t,n,e,i,c.extractedUrl,r,o,a)),Me(({state:c,tree:u})=>me(I({},l),{targetSnapshot:c,urlAfterRedirects:u}))))}function Jh(t,n){return Rt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return K(e);let o=new Set(r.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let c of _u(l))a.add(c);let s=0;return He(a).pipe(Ni(l=>o.has(l)?em(l,i,t,n):(l.data=mo(l,l.parent,t).resolve,K(void 0))),Ge(()=>s++),Ra(1),Rt(l=>s===a.size?K(e):Wt))})}function _u(t){let n=t.children.map(e=>_u(e)).flat();return[t,...n]}function em(t,n,e,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!ou(r)&&(o[nr]=r.title),Mr(()=>(t.data=mo(t,t.parent,e).resolve,tm(o,t,n,i).pipe(Me(a=>(t._resolvedData=a,t.data=I(I({},t.data),a),null)))))}function tm(t,n,e,i){let r=ns(t);if(r.length===0)return K({});let o={};return He(r).pipe(Rt(a=>nm(t[a],n,e,i).pipe(on(),Ge(s=>{if(s instanceof gi)throw go(new Zt,s);o[a]=s}))),Ra(1),Me(()=>o),Rr(a=>uu(a)?Wt:ll(a)))}function nm(t,n,e,i){let r=_i(n)??i,o=yi(t,r),a=o.resolve?o.resolve(n,e):qe(r,()=>o(n,e));return Fn(a)}function es(t){return Tt(n=>{let e=t(n);return e?He(e).pipe(Me(()=>n)):K(n)})}var vs=(()=>{class t{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Y);return i}getResolvedTitleForRoute(e){return e.data[nr]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:()=>p(yu),providedIn:"root"})}return t})(),yu=(()=>{class t extends vs{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(de(Oc))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bn=new Ce("",{factory:()=>({})}),$n=new Ce(""),Co=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=p(Ul);loadComponent(e,i){return fe(this,null,function*(){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Promise.resolve(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=fe(this,null,function*(){try{let o=yield $c(qe(e,()=>i.loadComponent())),a=yield bu(wu(o));return this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a,a}finally{this.componentLoaders.delete(i)}});return this.componentLoaders.set(i,r),r})}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Promise.resolve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=fe(this,null,function*(){try{let o=yield Cu(i,this.compiler,e,this.onLoadEndListener);return i._loadedRoutes=o.routes,i._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(i)}});return this.childrenLoaders.set(i,r),r}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cu(t,n,e,i){return fe(this,null,function*(){let r=yield $c(qe(e,()=>t.loadChildren())),o=yield bu(wu(r)),a;o instanceof Il||Array.isArray(o)?a=o:a=yield n.compileModuleAsync(o),i&&i(t);let s,l,c=!1;return Array.isArray(a)?(l=a,c=!0):(s=a.create(e).injector,l=s.get($n,[],{optional:!0,self:!0}).flat()),{routes:l.map(gs),injector:s}})}function im(t){return t&&typeof t=="object"&&"default"in t}function wu(t){return im(t)?t.default:t}function bu(t){return fe(this,null,function*(){return t})}var wo=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:()=>p(rm),providedIn:"root"})}return t})(),rm=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_s=new Ce(""),ys=new Ce("");function xu(t,n,e){let i=t.get(ys),r=t.get(Ze);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,a=new Promise(c=>{o=c}),s=r.startViewTransition(()=>(o(),om(t)));s.ready.catch(c=>{});let{onViewTransitionCreated:l}=i;return l&&qe(t,()=>l({transition:s,from:n,to:e})),a}function om(t){return new Promise(n=>{On({read:()=>setTimeout(n)},{injector:t})})}var am=()=>{},Cs=new Ce(""),bo=(()=>{class t{currentNavigation=P(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=P(null);events=new qt;transitionAbortWithErrorSubject=new qt;configLoader=p(Co);environmentInjector=p(kn);destroyRef=p(yl);urlSerializer=p(Un);rootContexts=p(Bn);location=p(ri);inputBindingEnabled=p(ir,{optional:!0})!==null;titleStrategy=p(vs);options=p(bn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=p(wo);createViewTransition=p(_s,{optional:!0});navigationErrorHandler=p(Cs,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new ao(r)),i=r=>this.events.next(new so(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;Ot(()=>{this.transitions?.next(me(I({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))})}setupNavigations(e){return this.transitions=new ze(null),this.transitions.pipe(Qt(i=>i!==null),Tt(i=>{let r=!1,o=new AbortController;return K(i).pipe(Tt(a=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Fe.SupersededByNewNavigation),Wt;this.currentTransition=i;let s=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:s?me(I({},s),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&c!=="reload")return this.events.next(new Ft(a.id,this.urlSerializer.serialize(a.rawUrl),"",pi.IgnoredSameUrlNavigation)),a.resolve(!1),Wt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return K(a).pipe(Tt(u=>(this.events.next(new wn(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Wt:Promise.resolve(u))),Zh(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ge(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let f=new Xi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:u,extractedUrl:f,source:h,restoredState:g,extras:T}=a,x=new wn(u,this.urlSerializer.serialize(f),h,g);this.events.next(x);let w=iu(this.rootComponentType).snapshot;return this.currentTransition=i=me(I({},a),{targetSnapshot:w,urlAfterRedirects:f,extras:me(I({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(y=>(y.finalUrl=f,y)),K(i)}else return this.events.next(new Ft(a.id,this.urlSerializer.serialize(a.extractedUrl),"",pi.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Wt}),Ge(a=>{let s=new no(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),Me(a=>(this.currentTransition=i=me(I({},a),{guards:fh(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),i)),Sh(this.environmentInjector,a=>this.events.next(a)),Ge(a=>{if(i.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw go(this.urlSerializer,a.guardsResult);let s=new io(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(s)}),Qt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Fe.GuardRejected),!1)),es(a=>{if(a.guards.canActivateChecks.length!==0)return K(a).pipe(Ge(s=>{let l=new ro(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),Tt(s=>{let l=!1;return K(s).pipe(Jh(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",Fe.NoDataFromResolver)}}))}),Ge(s=>{let l=new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),es(a=>{let s=c=>{let u=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let f=_i(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,c.routeConfig).then(h=>{c.component=h}))}for(let f of c.children)u.push(...s(f));return u},l=s(a.targetSnapshot.root);return l.length===0?K(a):He(Promise.all(l).then(()=>a))}),es(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:a,targetSnapshot:s}=i,l=this.createViewTransition?.(this.environmentInjector,a.root,s.root);return l?He(l).pipe(Me(()=>i)):K(i)}),Me(a=>{let s=lh(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=i=me(I({},a),{targetRouterState:s}),this.currentNavigation.update(l=>(l.targetRouterState=s,l)),i}),Ge(()=>{this.events.next(new Zi)}),ph(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),Zn(1),an(du(o.signal).pipe(Qt(()=>!r&&!i.targetRouterState),Ge(()=>{this.cancelNavigationTransition(i,o.signal.reason+"",Fe.Aborted)}))),Ge({next:a=>{r=!0,this.currentNavigation.update(s=>(s.abort=am,s)),this.lastSuccessfulNavigation.set(Ot(this.currentNavigation)),this.events.next(new at(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{r=!0}}),an(this.transitionAbortWithErrorSubject.pipe(Ge(a=>{throw a}))),fl(()=>{o.abort(),r||this.cancelNavigationTransition(i,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rr(a=>{if(this.destroyed)return i.resolve(!1),Wt;if(r=!0,cu(a))this.events.next(new Vt(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode)),dh(a)?this.events.next(new mi(a.url,a.navigationBehaviorOptions)):i.resolve(!1);else{let s=new fi(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);try{let l=qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof gi){let{message:c,cancellationCode:u}=go(this.urlSerializer,l);this.events.next(new Vt(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new mi(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),a}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Wt}))}))}cancelNavigationTransition(e,i,r){let o=new Vt(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ot(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sm(t){return t!==ui}var Su=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:()=>p(lm),providedIn:"root"})}return t})(),_o=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},lm=(()=>{class t extends _o{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ei(t)))(r||t)}})();static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ws=(()=>{class t{urlSerializer=p(Un);options=p(bn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=p(ri);urlHandlingStrategy=p(wo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new xt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,a=r??o;return a instanceof xt?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=iu(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:()=>p(Du),providedIn:"root"})}return t})(),Du=(()=>{class t extends ws{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof wn?this.updateStateMemento():e instanceof Ft?this.commitTransition(i):e instanceof Xi?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Zi?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Vt&&e.code!==Fe.SupersededByNewNavigation&&e.code!==Fe.Redirect?this.restoreHistory(i):e instanceof fi?this.restoreHistory(i,!0):e instanceof at&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(e)||o){let s=this.browserPageId,l=I(I({},a),this.generateNgRouterState(r,s));this.location.replaceState(e,"",l)}else{let s=I(I({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=ei(t)))(r||t)}})();static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xo(t,n){t.events.pipe(Qt(e=>e instanceof at||e instanceof Vt||e instanceof fi||e instanceof Ft),Me(e=>e instanceof at||e instanceof Ft?0:(e instanceof Vt?e.code===Fe.Redirect||e.code===Fe.SupersededByNewNavigation:!1)?2:1),Qt(e=>e!==2),Zn(1)).subscribe(()=>{n()})}var cm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},um={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=p(Pl);stateManager=p(ws);options=p(bn,{optional:!0})||{};pendingTasks=p(Cl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=p(bo);urlSerializer=p(Un);location=p(ri);urlHandlingStrategy=p(wo);injector=p(kn);_events=new qt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=p(Su);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=p($n,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!p(ir,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ol;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=Ot(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Vt&&i.code!==Fe.Redirect&&i.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof at)this.navigated=!0;else if(i instanceof mi){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=I({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sm(r.source)},a);this.scheduleNavigation(s,ui,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}rh(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ui,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let l=I({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,i,a,o).catch(l=>{this.disposed||this.injector.get(Tr)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ot(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(gs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:a,u=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":u=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let h=r?r.snapshot:this.routerState.snapshot.root;f=Jc(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),f=this.currentUrlTree.root}return eu(f,e,u,c??null,this.urlSerializer)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Cn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ui,null,i)}navigate(e,i={skipLocationChange:!1}){return dm(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(ml(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=I({},cm):i===!1?r=I({},um):r=i,Cn(e))return Ic(this.currentUrlTree,e,r);let o=this.parseUrl(e);return Ic(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,c;a?(s=a.resolve,l=a.reject,c=a.promise):c=new Promise((f,h)=>{s=f,l=h});let u=this.pendingTasks.add();return xo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dm(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new De(4008,!1)}var Ci=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=P(null);get href(){return Ot(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qt;applicationErrorHandler=p(Tr);options=p(bn,{optional:!0});constructor(e,i,r,o,a,s){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=s,this.reactiveHref.set(p(new Pr("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=r=>r==="merge"||r==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(r=>{r instanceof at&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Cn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(e!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Cn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||t)(We(dt),We(Ut),bl("tabindex"),We(Pa),We(vt),We(ii))};static \u0275dir=ge({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&k("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&zl("href",r.reactiveHref(),El)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",wt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",wt],replaceUrl:[2,"replaceUrl","replaceUrl",wt],routerLink:"routerLink"},features:[Yt]})}return t})(),xs=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new gt;link=p(Ci,{optional:!0});constructor(e,i,r,o){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof at&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(Ii()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=He(e).pipe(Ii()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=pm(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(i){return new(i||t)(We(dt),We(vt),We(Pa),We(hn))};static \u0275dir=ge({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&Je(o,Ci,5),i&2){let a;et(a=tt())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Yt]})}return t})();function pm(t){return!!t.paths}var or=class{};var Mu=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(e=>e instanceof at),Ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Ir(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(s,o.children??o._loadedRoutes))}return He(r).pipe(Ii())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=He(this.loader.loadChildren(e,i)):r=K(null);let o=r.pipe(Rt(a=>a===null?K(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(e,i);return He([o,a]).pipe(Ii())}else return o})}static \u0275fac=function(i){return new(i||t)(de(dt),de(kn),de(or),de(Co))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ru=new Ce(""),fm=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ui;restoredId=0;store={};constructor(e,i,r,o,a={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof wn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof at?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Ft&&e.code===pi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof hi))return;let i={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,i):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>fe(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new hi(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Ol()};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();function Ss(t,...n){return Ta([{provide:$n,multi:!0,useValue:t},[],{provide:Ut,useFactory:Tu},{provide:La,multi:!0,useFactory:ku},n.map(e=>e.\u0275providers)])}function Tu(){return p(dt).routerState.root}function wi(t,n){return{\u0275kind:t,\u0275providers:n}}function ku(){let t=p(kt);return n=>{let e=t.get(Ll);if(n!==e.components[0])return;let i=t.get(dt),r=t.get(Ou);t.get(Ds)===1&&i.initialNavigation(),t.get(Pu,null,{optional:!0})?.setUpPreloading(),t.get(Ru,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ou=new Ce("",{factory:()=>new qt}),Ds=new Ce("",{factory:()=>1});function Iu(){let t=[{provide:Dl,useValue:!0},{provide:Ds,useValue:0},Aa(()=>{let n=p(kt);return n.get(Wl,Promise.resolve()).then(()=>new Promise(i=>{let r=n.get(dt),o=n.get(Ou);xo(r,()=>{i(!0)}),n.get(bo).afterPreactivation=()=>(i(!0),o.closed?K(void 0):o),r.initialNavigation()}))})];return wi(2,t)}function Nu(){let t=[Aa(()=>{p(dt).setUpLocationChangeListener()}),{provide:Ds,useValue:2}];return wi(3,t)}var Pu=new Ce("");function Au(t){return wi(0,[{provide:Pu,useExisting:Mu},{provide:or,useExisting:t}])}function Es(){return wi(6,[{provide:ii,useClass:Fa}])}function Lu(){return wi(8,[hs,{provide:ir,useExisting:hs}])}function zu(t){Tl("NgRouterViewTransitions");let n=[{provide:_s,useValue:xu},{provide:ys,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return wi(9,n)}var Vu=[ri,{provide:Un,useClass:Zt},dt,Bn,{provide:Ut,useFactory:Tu},Co,[]],ar=(()=>{class t{constructor(){}static forRoot(e,i){return{ngModule:t,providers:[Vu,[],{provide:$n,multi:!0,useValue:e},[],i?.errorHandler?{provide:Cs,useValue:i.errorHandler}:[],{provide:bn,useValue:i||{}},i?.useHash?mm():gm(),hm(),i?.preloadingStrategy?Au(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?vm(i):[],i?.bindToComponentInputs?Lu().\u0275providers:[],i?.enableViewTransitions?zu().\u0275providers:[],_m()]}}static forChild(e){return{ngModule:t,providers:[{provide:$n,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ti({type:t});static \u0275inj=Jn({})}return t})();function hm(){return{provide:Ru,useFactory:()=>{let t=p(tc),n=p(Ai),e=p(bn),i=p(bo),r=p(Un);return e.scrollOffset&&t.setOffset(e.scrollOffset),new fm(r,i,t,n,e)}}}function mm(){return{provide:ii,useClass:Fa}}function gm(){return{provide:ii,useClass:Ql}}function vm(t){return[t.initialNavigation==="disabled"?Nu().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Iu().\u0275providers:[]]}var bs=new Ce("");function _m(){return[{provide:bs,useFactory:ku},{provide:La,multi:!0,useExisting:bs}]}var So=class t{dialogRef=p(Lt);data=p(_n);close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["LogViewDialog"]],decls:18,vars:11,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"ml-2","message-date"],[1,"ml-2","message-text"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"]],template:function(e,i){e&1&&(B(0,"div",0)(1,"header")(2,"div",1),_(3),S(4,"translate"),$()(),B(5,"div",2)(6,"p",3),_(7),S(8,"date"),$(),B(9,"p",4),_(10),$()(),B(11,"footer")(12,"div",5),It(13,"div",6),B(14,"div",7)(15,"button",8),Ee("click",function(){return i.close()}),_(16),S(17,"translate"),$()()()()()),e&2&&(d(3),E(R(4,4,"EVENT_DETAILS")),d(4),E(it(8,6,i.data.date,"HH:mm:ss")),d(3),E(i.data.message),d(6),E(R(17,9,"CLOSE")))},dependencies:[re,se,Ar],encapsulation:2})};var ym=t=>({level:t});function Cm(t,n){t&1&&W(0,"div",21)(1,"div",22)(2,"div",22)(3,"div",22)}function wm(t,n){t&1&&W(0,"div",23)(1,"div",22)(2,"div",22)(3,"div",22)}function bm(t,n){t&1&&W(0,"div",24)(1,"div",24)(2,"div",24)(3,"div",22)}function xm(t,n){t&1&&W(0,"div",25)(1,"div",25)(2,"div",25)(3,"div",25)}function Sm(t,n){if(t&1){let e=Z();m(0,"div",15),k("click",function(){let r=z(e).$implicit,o=D();return V(o.openLog(r))}),m(1,"div",16)(2,"div",17)(3,"div",18),G(4,Cm,4,0)(5,wm,4,0)(6,bm,4,0)(7,xm,4,0),v()()(),m(8,"p",19),_(9),S(10,"date"),v(),m(11,"p",20),_(12),v()()}if(t&2){let e,i=n.$implicit;d(4),q((e=i.level)==="debug"?4:e==="info"?5:e==="warning"?6:e==="error"?7:-1),d(5),E(it(10,3,i.date,"HH:mm:ss")),d(3),E(i.message)}}var Do=class t{eventStore=p(cc);bridgeService=p(we);appService=p(ct);settingsService=p(gn);dialog=p(ut);selectedLevels=P([]);serverOptions=P([]);log_level=P("");logViewOpen=fn(!1);toggleLogView=Pt();logOptions=P([]);constructor(){let n=this.settingsService.getPreference("log_levels");this.selectedLevels.set(n),_e(()=>{let e=this.bridgeService.bridgeInfo;if(e()!==null){this.log_level.set(e().log_level);let i=this.log_level();i!==""&&(console.log("current",i),this.serverOptions=P([...Fr].map(r=>me(I({},r),{isSelected:r.value===i}))))}}),_e(()=>{let e=this.selectedLevels();e?this.logOptions=P([...Fr].map(i=>me(I({},i),{isSelected:e.indexOf(i.value)>-1}))):this.logOptions=P([...Fr])})}reversedEntries=H(()=>{let n=this.selectedLevels();return console.log(this.eventStore.entities().length),[...this.eventStore.entities()].reverse().filter(e=>n?n.indexOf(e.level)>-1:!0)});toggleView(){this.toggleLogView.emit()}clearLog(){this.eventStore.clear()}changeBridgeLogging(n){let e={advanced:{log_level:n.value}};this.bridgeService.updateOptions({options:e})}logOptionChange(n){let i=n.filter(r=>r.isSelected).map(r=>r.value??"");this.settingsService.setPreference("log_levels",i),this.selectedLevels.set(i)}openLog(n){let e=this.dialog.open(So,{width:"600px",panelClass:"overlay",data:n})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["LogView"]],inputs:{logViewOpen:[1,"logViewOpen"]},outputs:{logViewOpen:"logViewOpenChange",toggleLogView:"toggleLogView"},decls:22,vars:19,consts:[[1,"logSection-header"],[1,"label"],[1,"flex"],[1,"left",3,"click"],[1,"material-symbols-outlined",3,"title"],[1,"p-1","ml-5","rounded","transition-colors",3,"click"],[1,"material-symbols-outlined","text-base"],[1,"logview-body"],[1,"log_option_panel"],[3,"optionsChanged","title","entities"],[1,"mt-2"],[1,"mt-1",3,"selected","items","title"],[1,"logSection-content","scrollbar"],[1,"logcontent","overflow-y-auto","scrollbar"],[1,"flex","flex-row","items-center","logline","cursor-pointer"],[1,"flex","flex-row","items-center","logline","cursor-pointer",3,"click"],[1,"level","ml-2"],[1,"ll"],[1,"level_container"],[1,"ml-2","message-date"],[1,"ml-2","message-text"],[1,"bar","debug"],[1,"bar"],[1,"bar","info"],[1,"bar","warning"],[1,"bar","error"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"span",1),_(2),v(),m(3,"div",2)(4,"button",3),k("click",function(){return i.clearLog()}),m(5,"span",4),S(6,"translate"),_(7,"delete"),v()(),m(8,"button",5),k("click",function(){return i.toggleView()}),m(9,"span",6),_(10),v()()()(),m(11,"div",7)(12,"div",8)(13,"OptionPanelComponent",9),S(14,"translate"),k("optionsChanged",function(o){return i.logOptionChange(o)}),v(),m(15,"div",10)(16,"DropdownComponent",11),S(17,"translate"),k("selected",function(o){return i.changeBridgeLogging(o)}),v()()(),m(18,"div",12)(19,"div",13),Re(20,Sm,13,6,"div",14,Qe),v()()()),e&2&&(d(2),ie("Logs (",i.reversedEntries().length,")"),d(3),N("title",Ie(R(6,10,"CLEAR_LOGS"))),d(5),E(i.logViewOpen()?"expand_more":"expand_less"),d(3),N("title",Ie(R(14,12,"LOG_FILTER")))("entities",i.logOptions()),d(3),N("title",Nt(" ",it(17,14,"SYSTEM_LOGLEVEL",nt(17,ym,i.log_level()))))("items",i.serverOptions()),d(4),Te(i.reversedEntries()))},dependencies:[re,vn,hc,Ar,se],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}button[_ngcontent-%COMP%]{border-left:1px solid var(--app-border-color);padding-left:1em}.logview-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;min-height:0;max-height:100%;margin-left:.75rem;overflow:hidden;height:100%}.logSection-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;border-bottom:1px solid var(--app-border-color);background-color:var(--app-background-raised-color);flex-shrink:0}.logSection-content[_ngcontent-%COMP%]{flex:1;min-width:0;min-height:0;max-height:100%;overflow-y:scroll;overflow-x:hidden;position:relative}.logcontent[_ngcontent-%COMP%]{width:100%}.level[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;transition:opacity .25s}.logline[_ngcontent-%COMP%]{margin-top:.5em;border-bottom-width:1px;border-bottom-color:var(--app-border-color);max-width:100%;min-width:0}.ll[_ngcontent-%COMP%]{display:flex;width:100%;z-index:999}.level_container[_ngcontent-%COMP%]{display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;gap:2px}.bar[_ngcontent-%COMP%]{display:flex;width:8px;height:4px;background-color:#282b2f;border-radius:1px}.info[_ngcontent-%COMP%]{background-color:#09ff00}.debug[_ngcontent-%COMP%]{background-color:#fff}.warning[_ngcontent-%COMP%]{background-color:#f2ff00}.error[_ngcontent-%COMP%]{background-color:red}.message-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:0;color:var(--app-text-color)}.message-date[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{color:var(--app-text-color)}.log_option_panel[_ngcontent-%COMP%]{padding-left:1em;padding-right:1em;padding-top:1em;border-right:1px solid;border-right-color:var(--app-border-color);flex-shrink:0}"]})};var Dm=["container"],Em=["*"];function Mm(t,n){if(t&1){let e=Z();B(0,"div",6),Ee("mousedown",function(r){z(e);let o=D();return V(o.startResize(r))}),$()}}function Rm(t,n){if(t&1){let e=Z();B(0,"div",7),Ee("mousedown",function(r){z(e);let o=D();return V(o.startResize(r))}),$()}}function Tm(t,n){if(t&1){let e=Z();B(0,"div",8),Ee("mousedown",function(r){z(e);let o=D();return V(o.startResize(r))}),$()}}function km(t,n){if(t&1){let e=Z();B(0,"div",9),Ee("mousedown",function(r){z(e);let o=D();return V(o.startResize(r))}),$()}}var Eo=class t{resizeSide=pe("right");storageKey=pe.required();defaultSize=pe(250);minSize=pe(100);maxSize=pe(800);containerClass=pe();flexBehavior=pe(!0);fullHeight=pe(!1);sizeChange=Pt();get isFlexMode(){return this.flexBehavior()}get isFullHeightMode(){return this.fullHeight()}containerRef=Xt.required("container");currentSize=this.defaultSize();isResizing=!1;startPos=0;startSize=0;containerStyle="";settingsService=p(gn);constructor(){_e(()=>{let n=this.settingsService.getPreference(`size_${this.storageKey()}`);n?this.currentSize=parseFloat(n):this.currentSize=this.defaultSize(),this.updateContainerStyle()})}ngAfterViewInit(){this.updateContainerStyle()}ngOnDestroy(){this.removeEventListeners()}updateContainerStyle(){let n=this.resizeSide(),i=n==="top"||n==="bottom"?"height":"width";this.containerStyle=`${i}: ${this.currentSize}px;`,this.sizeChange.emit(this.currentSize)}startResize(n){n.preventDefault(),n.stopPropagation(),this.isResizing=!0,this.startSize=this.currentSize;let e=this.resizeSide();e==="left"||e==="right"?this.startPos=n.clientX:this.startPos=n.clientY,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.body.style.userSelect="none",document.body.style.cursor=e==="left"||e==="right"?"ew-resize":"ns-resize"}onMouseMove=n=>{if(!this.isResizing)return;let e=0,i=this.resizeSide();i==="right"?e=n.clientX-this.startPos:i==="left"?e=this.startPos-n.clientX:i==="bottom"?e=n.clientY-this.startPos:i==="top"&&(e=this.startPos-n.clientY);let r=this.startSize+e;r=Math.max(this.minSize(),Math.min(this.maxSize(),r)),this.currentSize=r,this.updateContainerStyle()};onMouseUp=()=>{this.isResizing&&(this.isResizing=!1,this.removeEventListeners(),document.body.style.userSelect="",document.body.style.cursor="",this.settingsService.setPreference(`size_${this.storageKey()}`,this.currentSize.toString()))};removeEventListeners(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-resizable-container"]],viewQuery:function(e,i){e&1&&Kt(i.containerRef,Dm,5),e&2&&un()},hostVars:4,hostBindings:function(e,i){e&2&&ae("flex-mode",i.isFlexMode)("full-height-mode",i.isFullHeightMode)},inputs:{resizeSide:[1,"resizeSide"],storageKey:[1,"storageKey"],defaultSize:[1,"defaultSize"],minSize:[1,"minSize"],maxSize:[1,"maxSize"],containerClass:[1,"containerClass"],flexBehavior:[1,"flexBehavior"],fullHeight:[1,"fullHeight"]},outputs:{sizeChange:"sizeChange"},ngContentSelectors:Em,decls:8,vars:13,consts:[["container",""],[1,"resize-handle","resize-handle-top"],[1,"resize-handle","resize-handle-left"],[1,"resizable-content"],[1,"resize-handle","resize-handle-right"],[1,"resize-handle","resize-handle-bottom"],[1,"resize-handle","resize-handle-top",3,"mousedown"],[1,"resize-handle","resize-handle-left",3,"mousedown"],[1,"resize-handle","resize-handle-right",3,"mousedown"],[1,"resize-handle","resize-handle-bottom",3,"mousedown"]],template:function(e,i){e&1&&(cn(),B(0,"div",null,0),G(2,Mm,1,0,"div",1),G(3,Rm,1,0,"div",2),B(4,"div",3),Ct(5),$(),G(6,Tm,1,0,"div",4),G(7,km,1,0,"div",5),$()),e&2&&(Vl(i.containerStyle),Vi(Nt("resizable-container ",i.containerClass())),ae("flex-host",i.flexBehavior()),d(2),q(i.resizeSide()==="top"?2:-1),d(),q(i.resizeSide()==="left"?3:-1),d(),ae("flex-content",i.flexBehavior()),d(2),q(i.resizeSide()==="right"?6:-1),d(),q(i.resizeSide()==="bottom"?7:-1))},styles:["[_nghost-%COMP%]{display:block;border:none}.flex-mode[_nghost-%COMP%]{display:flex;flex-direction:column;border:none;flex:1}.full-height-mode[_nghost-%COMP%]{border:none;height:100%}.resizable-container[_ngcontent-%COMP%]{position:relative}.full-height-mode[_nghost-%COMP%]   .resizable-container[_ngcontent-%COMP%]{height:100%}.resizable-container.flex-host[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.resizable-content[_ngcontent-%COMP%]{overflow:hidden;min-height:0;min-width:0;display:flex;flex-direction:column;height:100%}.full-height-mode[_nghost-%COMP%]   .resizable-content[_ngcontent-%COMP%]{height:100%}.resizable-content.flex-content[_ngcontent-%COMP%]{flex:1;height:100%}.resize-handle[_ngcontent-%COMP%]{position:absolute;z-index:10;background:transparent;transition:background-color .2s;border-color:var(--app-border-color)}.resize-handle[_ngcontent-%COMP%]:after{border-color:var(--app-border-color)}.resize-handle[_ngcontent-%COMP%]:hover{background-color:#3b82f64d}.resize-handle[_ngcontent-%COMP%]:active{background-color:#3b82f680}.resize-handle-top[_ngcontent-%COMP%], .resize-handle-bottom[_ngcontent-%COMP%]{left:0;right:0;height:8px;cursor:ns-resize}.resize-handle-top[_ngcontent-%COMP%]{top:0}.resize-handle-bottom[_ngcontent-%COMP%]{bottom:0}.resize-handle-left[_ngcontent-%COMP%], .resize-handle-right[_ngcontent-%COMP%]{top:0;bottom:0;width:8px;cursor:ew-resize}.resize-handle-left[_ngcontent-%COMP%]{left:0}.resize-handle-right[_ngcontent-%COMP%]{right:0}"]})};function Om(t,n){if(t&1&&(m(0,"div",2),_(1),S(2,"translate"),v()),t&2){let e=D();d(),E(R(2,1,e.dialogData.message))}}function Im(t,n){if(t&1){let e=Z();m(0,"div",5)(1,"div",14),_(2),v(),m(3,"div",28),_(4),v(),m(5,"div",14)(6,"a",29),k("click",function(){let r=z(e).$implicit,o=D();return V(o.connect(r))}),_(7),S(8,"translate"),v()(),m(9,"div",14)(10,"a",29),k("click",function(){let r=z(e).$implicit,o=D();return V(o.edit(r))}),_(11),S(12,"translate"),v()()()}if(t&2){let e=n.$implicit;d(2),E(e.name),d(2),E(e.host),d(3),E(R(8,4,"CONNECT")),d(4),E(R(12,6,"EDIT"))}}var Mo=class t{translate=p(lt);dialogRef=p(Lt);dialogData=p(_n);tokenService=p(sc);host=fn("");port=fn(8080);secure=fn(!1);name=fn("localhost");token=fn();selectedId=crypto.randomUUID();isSecure=H(()=>({label:"",value:"true",isActive:this.secure()===!0}));save(){return fe(this,null,function*(){let n;this.token()&&(n=yield this.tokenService.encryptToken(this.token()));let e={id:this.selectedId,name:this.name(),host:this.host(),port:this.port(),secure:this.secure()??!1,token:n};this.dialogRef.close(me(I({},this.dialogData),{newServer:e}))})}changeHost(n){this.host.set(n.target.value)}changePort(n){this.port.set(n.target.value)}changeName(n){this.name.set(n.target.value)}changeIsSecure(n){this.secure.set(n.isActive)}changeToken(n){this.token.set(n.target.value)}cancel(){this.dialogRef.close()}connect(n){return fe(this,null,function*(){this.dialogRef.close(me(I({},this.dialogData),{newServer:n}))})}edit(n){return fe(this,null,function*(){if(this.host.set(n.host),this.port.set(n.port),this.name.set(n.name),this.secure.set(n.secure),this.selectedId=n.id??crypto.randomUUID(),n.token){let e=yield this.tokenService.decryptToken(n.token);console.log(n.token,e),this.token.set(e)}else this.token.set("")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["ChooseServerDialog"]],inputs:{host:[1,"host"],port:[1,"port"],secure:[1,"secure"],name:[1,"name"],token:[1,"token"]},outputs:{host:"hostChange",port:"portChange",secure:"secureChange",name:"nameChange",token:"tokenChange"},decls:66,vars:45,consts:[[1,"modal"],[1,"title"],[1,"framed"],[1,"message","mb-5"],[1,"container"],[1,"row","serverline","min-h-7"],[1,"row"],[1,"col-full"],["for","input_newServerName"],[1,"input-container"],["id","input_newServerName",1,"w-full","text-left",3,"change","value"],[1,"col-60"],["for","input_newHost"],["id","input_newHost",1,"w-full","text-left",3,"change","value"],[1,"col-20"],["for","input_newPort"],["id","input_newPort",1,"w-full","text-left",3,"change","value"],["for","input_newSecure"],["id","input_newSecure",1,"w-full","text-left","panel",3,"changed","active","item"],[2,"min-width","30px",3,"message"],["for","input_token"],["id","input_token",1,"w-full","text-left",3,"change","value"],[1,"col-40","align-middle","mt-10","mb-auto"],[1,"button-link","left","cursor-pointer","pl-8",3,"click"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"],[1,"col-40"],[1,"button-link","left","cursor-pointer",3,"click"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"header")(2,"div",1),_(3),S(4,"translate"),v()(),G(5,Om,3,3,"div",2),m(6,"div",2)(7,"div",3)(8,"span"),_(9),S(10,"translate"),v()(),m(11,"div",4),Re(12,Im,13,8,"div",5,Qe),v()(),m(14,"div",2)(15,"div",4),_(16),S(17,"translate"),m(18,"div",6)(19,"div",7)(20,"label",8),_(21),S(22,"translate"),v(),m(23,"div",9)(24,"input",10),k("change",function(o){return i.changeName(o)}),v()()()(),m(25,"div",6)(26,"div",11)(27,"label",12),_(28),S(29,"translate"),v(),m(30,"div",9)(31,"input",13),k("change",function(o){return i.changeHost(o)}),v()()(),m(32,"div",14)(33,"label",15),_(34),S(35,"translate"),v(),m(36,"div",9)(37,"input",16),k("change",function(o){return i.changePort(o)}),v()()(),m(38,"div",14)(39,"label",17),_(40),S(41,"translate"),v(),m(42,"div",9)(43,"OptionComponent",18),k("changed",function(o){return i.changeIsSecure(o)}),v(),W(44,"InfoOverlayComponent",19),S(45,"translate"),v()()(),m(46,"div",6)(47,"div",11)(48,"label",20),_(49),S(50,"translate"),v(),m(51,"div",9)(52,"input",21),k("change",function(o){return i.changeToken(o)}),v(),W(53,"InfoOverlayComponent",19),S(54,"translate"),v()(),m(55,"div",22)(56,"a",23),k("click",function(){return i.save()}),_(57),S(58,"translate"),v()()()()(),m(59,"footer")(60,"div",24),W(61,"div",25),m(62,"div",26)(63,"button",27),k("click",function(){return i.cancel()}),_(64),S(65,"translate"),v()()()()()),e&2&&(d(3),E(R(4,21,"CHOOSE_SERVER_TITLE")),d(2),q(i.dialogData.message!=""?5:-1),d(4),E(R(10,23,"CHOOSE_SERVER_MESSAGE")),d(3),Te(i.dialogData.knownServer),d(4),ie(" ",R(17,25,"NEW_SERVER")," "),d(5),E(R(22,27,"NAME")),d(3),N("value",i.name()),d(4),E(R(29,29,"HOST")),d(3),N("value",i.host()),d(3),E(R(35,31,"PORT")),d(3),N("value",i.port()),d(3),E(R(41,33,"IS_SECURE")),d(3),N("active",!0)("item",i.isSecure()),d(),N("message",Ie(R(45,35,"IS_SECURE_DESCRIPTION"))),d(5),E(R(50,37,"TOKEN")),d(3),N("value",i.token()??""),d(),N("message",Ie(R(54,39,"TOKEN_DESCRIPTION"))),d(4),E(R(58,41,"SAVE")),d(7),E(R(65,43,"CANACEL")))},dependencies:[re,mc,gc,se],styles:["label[_ngcontent-%COMP%]{width:20%;height:32px;line-height:32px}.container[_ngcontent-%COMP%]{padding:2px 20px 10px!important}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.col[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px}.col-full[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:100%}.col-50[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:50%}.col-10[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:10%}.col-20[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:20%}.col-30[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:30%}.col-40[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:40%}.col-60[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:60%}button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}.framed[_ngcontent-%COMP%]{margin:20px;padding:20px;border-radius:4px;border:1px solid var(--app-border-color)}.serverline[_ngcontent-%COMP%]{border-bottom:1px solid var(--app-border-color)}"]})};var Uu=(t,n)=>n.id;function Nm(t,n){t&1&&st(0,10)}function Pm(t,n){if(t&1&&(m(0,"div",7),yt(1,Nm,1,0,"ng-container",9),v()),t&2){let e=D().$implicit;d(),N("ngComponentOutlet",e.iconComponent)("ngComponentOutletInputs",e.iconData)}}function Am(t,n){if(t&1&&(m(0,"span",8),_(1),v()),t&2){let e=D().$implicit;d(),E(e.label)}}function Lm(t,n){if(t&1){let e=Z();m(0,"div",6),k("click",function(){let r=z(e).$implicit,o=D(2);return V(o.tabManager.switchToTab(r.id))}),G(1,Pm,2,2,"div",7)(2,Am,2,1,"span",8),v()}if(t&2){let e=n.$implicit,i=D(2);ae("active",i.tabManager.activeId()===e.id),d(),q(e.iconComponent?1:2)}}function zm(t,n){t&1&&st(0)}function Vm(t,n){if(t&1&&(m(0,"div",11),yt(1,zm,1,0,"ng-container",12),v()),t&2){let e=n.$implicit,i=D(2);ae("active",e.id===i.tabManager.activeId()),d(),N("ngComponentOutlet",e.component)("ngComponentOutletInputs",e.data)}}function Fm(t,n){if(t&1&&(m(0,"div",2),Re(1,Lm,3,3,"div",3,Uu),v(),m(3,"div",4),Re(4,Vm,2,4,"div",5,Uu),v()),t&2){let e=D();d(),Te(e.tabManager.allTabs()),d(3),Te(e.tabManager.allTabs())}}function Um(t,n){t&1&&(m(0,"div",1)(1,"p"),_(2,"No tabs open. Select an object to view its properties."),v()())}var Ro=class t{tabManager=p(Ye);constructor(){_e(()=>{let n=this.tabManager.activeTab();console.log(n)})}closeTab(n,e){n.stopPropagation(),this.tabManager.closeTab(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["TabContainerComponent"]],decls:3,vars:1,consts:[[1,"tab-container"],[1,"empty-state"],[1,"tab-header"],[1,"tab-button",3,"active"],[1,"tab-content","scrollbar"],[1,"tab-pane","scrollbar",3,"active"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tabIcon",4,"ngComponentOutlet","ngComponentOutletInputs"],[1,"tabIcon"],[1,"tab-pane","scrollbar"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(e,i){e&1&&(m(0,"div",0),G(1,Fm,6,0)(2,Um,3,0,"div",1),v()),e&2&&(d(),q(i.tabManager.allTabs().length>0?1:2))},dependencies:[Bi,Kl],styles:[".tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100vh;background-color:transparent;border-left:2px solid var(--tab-header-border-color)}.tab-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid var(--tab-header-border-color);border-bottom:1px solid var(--tab-header-border-color);border-right:1px solid var(--tab-background-color);background-color:var(--tab-background-color, var(--app-background-raised-color));overflow-y:auto;overflow-x:hidden;min-width:60px;max-width:60px;position:absolute;left:-60px;z-index:100;filter:drop-shadow(-5px 5px 5px var(--tab-header-shadow-color))}.tab-header[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.tab-header[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bbb;border-radius:3px}.tab-button[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid var(--tab-header-border-color);align-items:center;gap:8px;padding:5px;background-color:var(--tab-background-color, var(--app-background-raised-color));cursor:pointer;font-size:14px;color:var(--app-text-color);transition:all .2s ease;position:relative;white-space:nowrap;text-align:left}.tab-button[_ngcontent-%COMP%]:hover{background-color:var(--tab-background-color, var(--app-background-raised-color));color:var(--app-text-color)}.tab-button.active[_ngcontent-%COMP%]{cursor:pointer;background-color:var(--tab-selected-background-color);font-weight:500}.tabIcon[_ngcontent-%COMP%]{padding-left:10px}.tab-icon[_ngcontent-%COMP%]{max-width:30px;margin:auto}.tab-label[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;text-align:left}.tab-content[_ngcontent-%COMP%]{flex:1;padding:0;background-color:transparent;overflow:hidden;overflow-y:auto;height:100vh;display:flex}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:transparent;font-size:16px}.tab-pane[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0;overflow:auto;display:none;flex:1}.tab-pane.active[_ngcontent-%COMP%]{display:flex}"]})};var To=class t{constructor(n){this.http=n;this.initializeVersion()}versionSignal=P("0.0.0");initializeVersion(){return fe(this,null,function*(){try{let n=window.location.pathname,i=`${n.substring(0,n.lastIndexOf("/")+1)}version.json`,r=yield ul(this.http.get(i));this.versionSignal.set(r.version)}catch(n){console.warn("Failed to load version.json:",n),this.versionSignal.set("0.0.0")}})}getVersion(){return this.versionSignal}static \u0275fac=function(e){return new(e||t)(de(Lr))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})};var ko=class t{versionService=p(To);version=this.versionService.getVersion();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["VersionDisplayComponent"]],decls:2,vars:1,consts:[[1,"text-xs","text-gray-500","dark:text-gray-400"]],template:function(e,i){e&1&&(B(0,"div",0),_(1),$()),e&2&&(d(),ie("Dashboard v",i.version()))},encapsulation:2})};function Bm(t,n){if(t&1&&(m(0,"span"),_(1),S(2,"translate"),v()),t&2){let e=D(2).$implicit;d(),E(R(2,1,e.label))}}function jm(t,n){if(t&1){let e=Z();m(0,"a",3),k("click",function(){z(e);let r=D().$implicit,o=D();return V(o.run(r.func))}),m(1,"span",4),_(2),v(),G(3,Bm,3,3,"span"),v()}if(t&2){let e=D().$implicit,i=D();d(2),E(e.icon),d(),q(i.open()?3:-1)}}function $m(t,n){if(t&1&&(m(0,"span"),_(1),S(2,"translate"),v()),t&2){let e=D(2).$implicit;d(),E(R(2,1,e.label))}}function Hm(t,n){if(t&1&&(m(0,"a",2)(1,"span",4),_(2),v(),G(3,$m,3,3,"span"),v()),t&2){let e=D().$implicit,i=D();N("routerLink",e.link),d(2),E(e.icon),d(),q(i.open()?3:-1)}}function Gm(t,n){if(t&1&&G(0,jm,4,2,"a",1)(1,Hm,4,3,"a",2),t&2){let e=n.$implicit;q(e.func?0:1)}}var Bu=[{link:"/dashboard",icon:"dashboard",label:"DASHBOARD"},{link:"/devices",icon:"router",label:"DEVICES"},{link:"/groups",icon:"group_work",label:"GROUPS"},{link:"/network",icon:"network_node",label:"NETWORK"}],qm={link:"#",func:"restart",icon:"reset_settings",label:"RESTART"},Oo=class t{open=pe.required();menuItems=H(()=>this.bs.bridgeInfo()&&this.bs.bridgeInfo()?.restart_required===!0?[...Bu,qm]:Bu);bs=p(we);run(n){n==="restart"&&this.bs.requestRestart()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["AppMenuComponent"]],inputs:{open:[1,"open"]},decls:3,vars:0,consts:[[1,"mt-4"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors"],["routerLinkActive","selected text-white",1,"flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"routerLink"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"material-symbols-outlined"]],template:function(e,i){e&1&&(m(0,"nav",0),Re(1,Gm,2,1,null,null,Qe),v()),e&2&&(d(),Te(i.menuItems()))},dependencies:[re,ar,Ci,xs,se],encapsulation:2})};function Wm(t,n){if(t&1){let e=Z();m(0,"app-resizable-container",14),k("sizeChange",function(r){z(e);let o=D();return V(o.leftSidebarWidth.set(r))}),m(1,"aside",15)(2,"div",16)(3,"span",17),_(4),S(5,"translate"),v(),m(6,"button",18),k("click",function(){z(e);let r=D();return V(r.toggleSidebar())}),Pi(),m(7,"svg",19),W(8,"path",20),v()()(),ka(),W(9,"AppMenuComponent",21),v()()}t&2&&(N("defaultSize",256)("fullHeight",!0)("minSize",200)("maxSize",400)("flexBehavior",!1),d(4),E(R(5,7,"APP_TITLE")),d(5),N("open",!0))}function Qm(t,n){if(t&1){let e=Z();m(0,"aside",3)(1,"div",16)(2,"button",18),k("click",function(){z(e);let r=D();return V(r.toggleSidebar())}),Pi(),m(3,"svg",19),W(4,"path",20),v()()(),ka(),W(5,"AppMenuComponent",21),v()}t&2&&(d(5),N("open",!1))}function Ym(t,n){if(t&1){let e=Z();m(0,"app-resizable-container",10)(1,"LogView",22),k("toggleLogView",function(){z(e);let r=D();return V(r.toggleLogView())}),v()()}if(t&2){let e=D();N("defaultSize",250)("minSize",100)("maxSize",600)("flexBehavior",!1),d(),N("logViewOpen",e.logViewOpen)}}function Km(t,n){if(t&1){let e=Z();m(0,"section",11)(1,"LogView",23),k("toggleLogView",function(){z(e);let r=D();return V(r.toggleLogView())}),v()()}if(t&2){let e=D();d(),N("logViewOpen",e.logViewOpen)}}function Xm(t,n){if(t&1){let e=Z();m(0,"app-resizable-container",24),k("sizeChange",function(r){z(e);let o=D();return V(o.rightSidebarWidth.set(r))}),m(1,"aside",25),W(2,"TabContainerComponent"),v()()}t&2&&N("defaultSize",450)("minSize",450)("maxSize",800)("flexBehavior",!1)("fullHeight",!0)}var Io=class t{sidebarOpen=!0;logViewOpen=!0;waitingForConnection=!1;connectionDialogReferecnce;host="localhost";connectionDialogOpen=!1;leftSidebarWidth=P(256);rightSidebarWidth=P(450);deviceStore=p(mn);applicationService=p(ct);bs=p(we);dialog=p(ut);tabManager=p(Ye);signalBusService=p(ac);connectionManager=p(lc);settingsService=p(gn);mainTitle=H(()=>this.applicationService.mainTitle());inspector=H(()=>this.applicationService.inspector());connectedHost=H(()=>this.connectionManager.connectedHost());info=H(()=>{let n=this.bs.bridgeInfo;return n()});rightSidebarOpen=H(()=>this.tabManager.numberOfTabs()>0);noSavedConnectionSignal=this.signalBusService.onEvent("connection_error");connectionSignal=this.signalBusService.onEvent("connection_connected");constructor(){_e(()=>{let n=this.noSavedConnectionSignal();console.log(n),n!==null&&(n.data==="NO_LASTSAVED_CONNECTION"||n.data==="error_connecting")&&(this.openServerDialog(n.data),this.signalBusService.reset("connection_error"))}),_e(()=>{console.log("WFC",this.connectionSignal()),this.connectionSignal()!==null&&this.connectionDialogReferecnce?.close()})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}toggleLogView(){this.logViewOpen=!this.logViewOpen}closeRightSidebar(){this.deviceStore.setSelectedEntity(null),this.applicationService.inspector=null}openServerDialog(n){if(this.connectionDialogOpen)return;this.connectionDialogOpen=!0;let e=[];try{let r=this.settingsService.getPreference("saved_hosts");r&&Object.keys(r).forEach(o=>{e.push(r[o])})}catch(r){console.error(r)}let i={knownServer:e,message:n};this.connectionDialogReferecnce=this.dialog.open(Mo,{width:"600px",panelClass:"overlay",data:i}),this.connectionDialogReferecnce.closed.subscribe(r=>{if(this.connectionDialogOpen=!1,r!==void 0){let o=r;console.log("Try connecting",o.newServer),setTimeout(()=>{this.connectionManager.saveAndConnect(o.newServer)},500)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-layout"]],decls:19,vars:15,consts:[[1,"flex","h-screen","w-screen","dark:bg-unifi-bg","text-gray-900","dark:text-gray-100","layout_root","overflow-hidden"],[1,"left_sidebar_wrapper"],["resizeSide","right","storageKey","leftSidebarWidth",1,"flex-shrink-0",3,"defaultSize","fullHeight","minSize","maxSize","flexBehavior"],[1,"w-16","border-r","flex-shrink-0"],[1,"flex-1","flex","flex-col","min-w-0"],[1,"h-14","border-b","layout_header","flex","items-center","justify-between","px-4","flex-shrink-0"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-4"],[1,"cursor-pointer",3,"click"],[1,"flex-1","bg-gray-50","layout_section","h-full","overflow-hidden","min-h-0","flex","flex-grow"],["resizeSide","top","storageKey","logViewHeight",1,"flex-shrink-0",3,"defaultSize","minSize","maxSize","flexBehavior"],[1,"logSection-closed","flex-shrink-0"],[1,"right_sidebar_wrapper"],["resizeSide","left","storageKey","rightSidebarWidth","containerClass","right_sidebar",1,"flex-shrink-0",3,"defaultSize","minSize","maxSize","flexBehavior","fullHeight"],["resizeSide","right","storageKey","leftSidebarWidth",1,"flex-shrink-0",3,"sizeChange","defaultSize","fullHeight","minSize","maxSize","flexBehavior"],[1,"h-full","border-r"],[1,"flex","items-center","justify-between","p-4"],[1,"text-lg","font-bold","text-unifi-accent"],[1,"p-1","rounded","hover:bg-gray-200","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[3,"open"],[1,"h-full","block",3,"toggleLogView","logViewOpen"],[3,"toggleLogView","logViewOpen"],["resizeSide","left","storageKey","rightSidebarWidth","containerClass","right_sidebar",1,"flex-shrink-0",3,"sizeChange","defaultSize","minSize","maxSize","flexBehavior","fullHeight"],[1,"h-full","border-l","overflow-y-auto","scrollbar","flex","flex-col"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"div",1),G(2,Wm,10,9,"app-resizable-container",2)(3,Qm,6,1,"aside",3),v(),m(4,"main",4)(5,"header",5)(6,"h1",6),_(7),S(8,"translate"),v(),m(9,"div",7)(10,"span",8),k("click",function(){return i.openServerDialog("")}),_(11),v(),W(12,"VersionDisplayComponent"),v()(),m(13,"section",9),W(14,"router-outlet"),v(),G(15,Ym,2,5,"app-resizable-container",10)(16,Km,2,1,"section",11),v(),m(17,"div",12),G(18,Xm,3,5,"app-resizable-container",13),v()()),e&2&&(d(),dn("width",i.leftSidebarWidth(),"px"),ae("open",i.sidebarOpen),d(),q(i.sidebarOpen?2:3),d(5),ie(" ",R(8,13,i.mainTitle())," "),d(4),ie(" ",i.connectedHost()??"Connect to a host"," "),d(4),q(i.logViewOpen?15:16),d(2),dn("width",i.rightSidebarWidth(),"px"),ae("open",i.rightSidebarOpen()),d(),q(i.rightSidebarOpen()?18:-1))},dependencies:[ar,jn,re,Do,Eo,Ro,ko,Oo,se],styles:[".visible[_ngcontent-%COMP%]{visibility:visible}.fixed[_ngcontent-%COMP%]{position:fixed}.absolute[_ngcontent-%COMP%]{position:absolute}.m-3[_ngcontent-%COMP%]{margin:.75rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.block[_ngcontent-%COMP%]{display:block}.flex[_ngcontent-%COMP%]{display:flex}.table[_ngcontent-%COMP%]{display:table}.grid[_ngcontent-%COMP%]{display:grid}.contents[_ngcontent-%COMP%]{display:contents}.hidden[_ngcontent-%COMP%]{display:none}.h-14[_ngcontent-%COMP%]{height:3.5rem}.h-5[_ngcontent-%COMP%]{height:1.25rem}.h-full[_ngcontent-%COMP%]{height:100%}.h-screen[_ngcontent-%COMP%]{height:100vh}.min-h-0[_ngcontent-%COMP%]{min-height:0px}.min-h-20[_ngcontent-%COMP%]{min-height:5rem}.min-h-7[_ngcontent-%COMP%]{min-height:1.75rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-1\\/3[_ngcontent-%COMP%]{width:33.333333%}.w-16[_ngcontent-%COMP%]{width:4rem}.w-2\\/3[_ngcontent-%COMP%]{width:66.666667%}.w-5[_ngcontent-%COMP%]{width:1.25rem}.w-full[_ngcontent-%COMP%]{width:100%}.w-screen[_ngcontent-%COMP%]{width:100vw}.min-w-0[_ngcontent-%COMP%]{min-width:0px}.min-w-20[_ngcontent-%COMP%]{min-width:5rem}.max-w-36[_ngcontent-%COMP%]{max-width:9rem}.max-w-7[_ngcontent-%COMP%]{max-width:1.75rem}.flex-1[_ngcontent-%COMP%]{flex:1 1 0%}.flex-shrink-0[_ngcontent-%COMP%]{flex-shrink:0}.flex-grow[_ngcontent-%COMP%], .grow[_ngcontent-%COMP%]{flex-grow:1}.transform[_ngcontent-%COMP%]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.resize[_ngcontent-%COMP%]{resize:both}.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-row[_ngcontent-%COMP%]{flex-direction:row}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.items-center[_ngcontent-%COMP%]{align-items:center}.justify-between[_ngcontent-%COMP%]{justify-content:space-between}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-4[_ngcontent-%COMP%]{gap:1rem}.gap-6[_ngcontent-%COMP%]{gap:1.5rem}.overflow-auto[_ngcontent-%COMP%]{overflow:auto}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.overflow-y-auto[_ngcontent-%COMP%]{overflow-y:auto}.overflow-x-hidden[_ngcontent-%COMP%]{overflow-x:hidden}.rounded[_ngcontent-%COMP%]{border-radius:.25rem}.rounded-2xl[_ngcontent-%COMP%]{border-radius:1rem}.border[_ngcontent-%COMP%]{border-width:1px}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-l[_ngcontent-%COMP%]{border-left-width:1px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-gray-600[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.bg-blue-500[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-50[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-transparent[_ngcontent-%COMP%]{background-color:transparent}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.pl-1[_ngcontent-%COMP%]{padding-left:.25rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-8[_ngcontent-%COMP%]{padding-left:2rem}.pr-1[_ngcontent-%COMP%]{padding-right:.25rem}.pr-2[_ngcontent-%COMP%]{padding-right:.5rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-middle[_ngcontent-%COMP%]{vertical-align:middle}.text-base[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-gray-400[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-900[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-white[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-70[_ngcontent-%COMP%]{opacity:.7}.shadow[_ngcontent-%COMP%]{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter[_ngcontent-%COMP%]{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}[_nghost-%COMP%]{height:100%;width:100%;background-color:var(--app-background-raised-color)}.layout_root[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);position:relative}aside[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);border-color:var(--app-border-color)}.layout_header[_ngcontent-%COMP%]{background-color:var(--app-header-background-color, --app-background-raised-color);border-color:var(--app-border-color)}.layout_section[_ngcontent-%COMP%]{background-color:var(--app-background-color);border:1px solid;border-color:var(--app-border-color);padding-top:1em}.material-icons[_ngcontent-%COMP%]{font-size:20px}aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.logSection-closed[_ngcontent-%COMP%]{height:50px;overflow:hidden;border-top:1px solid var(--app-border-color);background-color:var(--app-background-raised-color)}.left_sidebar_wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-shrink:0;transition:width .3s ease-out;position:relative;z-index:5}.left_sidebar_wrapper[_ngcontent-%COMP%]:not(.open){width:64px!important}.right_sidebar_wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-shrink:0;min-width:0;overflow:visible;transition:width .3s ease-out;pointer-events:none;position:relative;z-index:10}.right_sidebar_wrapper[_ngcontent-%COMP%]:not(.open){width:0!important}.right_sidebar_wrapper.open[_ngcontent-%COMP%]{pointer-events:auto}.hover\\:bg-gray-200[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}@media(min-width:768px){.md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(min-width:1280px){.xl\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media(prefers-color-scheme:dark){.dark\\:text-gray-100[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:hover\\:bg-gray-700[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}"]})};var No=class t{dialogRef=p(Lt);bridgeService=p(we);bridgeInfo=this.bridgeService.bridgeInfo();close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["SystemInfoDialog"]],decls:49,vars:35,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"row"],[1,"w-1/3"],[1,"w-2/3"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"]],template:function(e,i){e&1&&(B(0,"div",0)(1,"header")(2,"div",1),_(3),S(4,"translate"),$()(),B(5,"div",2)(6,"div",3)(7,"div",4),_(8),S(9,"translate"),$(),B(10,"div",5),_(11),$()(),B(12,"div",3)(13,"div",4),_(14),S(15,"translate"),$(),B(16,"div",5),_(17),$()(),B(18,"div",3)(19,"div",4),_(20),S(21,"translate"),$(),B(22,"div",5),_(23),$()(),B(24,"div",3)(25,"div",4),_(26),S(27,"translate"),$(),B(28,"div",5),_(29),$()(),B(30,"div",3)(31,"div",4),_(32),S(33,"translate"),$(),B(34,"div",5),_(35),$()(),B(36,"div",3)(37,"div",4),_(38),S(39,"translate"),$(),B(40,"div",5),_(41),$()()(),B(42,"footer")(43,"div",6),It(44,"div",7),B(45,"div",8)(46,"button",9),Ee("click",function(){return i.close()}),_(47),S(48,"translate"),$()()()()()),e&2&&(d(3),E(R(4,19,"SYSTEM_INFO")),d(5),E(R(9,21,"SYSTEM")),d(3),E(i.bridgeInfo==null||i.bridgeInfo.os==null?null:i.bridgeInfo.os.version),d(3),E(R(15,23,"CPU/MEMORY")),d(3),pn("",i.bridgeInfo==null||i.bridgeInfo.os==null?null:i.bridgeInfo.os.cpus," / Memory: ",i.bridgeInfo==null||i.bridgeInfo.os==null?null:i.bridgeInfo.os.memory_mb," MB"),d(3),E(R(21,25,"NODE_VERSION")),d(3),E(i.bridgeInfo==null||i.bridgeInfo.os==null?null:i.bridgeInfo.os.node_version),d(3),E(R(27,27,"MQTT")),d(3),pn("",i.bridgeInfo==null||i.bridgeInfo.mqtt==null?null:i.bridgeInfo.mqtt.server," / Version: ",i.bridgeInfo==null||i.bridgeInfo.mqtt==null?null:i.bridgeInfo.mqtt.version),d(3),E(R(33,29,"COORDINATOR")),d(3),pn("",i.bridgeInfo==null||i.bridgeInfo.coordinator==null?null:i.bridgeInfo.coordinator.type," / Address: ",i.bridgeInfo==null||i.bridgeInfo.coordinator==null?null:i.bridgeInfo.coordinator.ieee_address),d(3),E(R(39,31,"NETWORK")),d(3),Fl("Channel: ",i.bridgeInfo==null||i.bridgeInfo.network==null?null:i.bridgeInfo.network.channel," PanId: ",i.bridgeInfo==null||i.bridgeInfo.network==null?null:i.bridgeInfo.network.pan_id," (",i.bridgeInfo==null||i.bridgeInfo.network==null?null:i.bridgeInfo.network.extended_pan_id,")"),d(6),E(R(48,33,"CLOSE")))},dependencies:[re,se],styles:[".row[_ngcontent-%COMP%]{padding:0}"]})};function Zm(t,n){if(t&1){let e=Z();m(0,"div",11)(1,"span",12),k("click",function(){let r=z(e).$implicit,o=D();return V(o.visitDevice(r))}),_(2),v(),W(3,"DeviceFeaturesComponent",13),v()}if(t&2){let e=n.$implicit;d(2),E(e.friendly_name),d(),N("ieee_address",e==null?null:e.ieee_address)}}var Po=class t{deviceStore=p(mn);bridgeService=p(we);groupStore=p(At);router=p(dt);tabManager=p(Ye);dialog=p(ut);search=P("");info=H(()=>{let n=this.bridgeService.bridgeInfo;return n()});filteredDevices=H(()=>{let n=this.search(),e=n?n.toLocaleLowerCase():"";return e!==""?this.devicesView().filter(i=>i.ieee_address.toLocaleLowerCase().indexOf(e)>-1||i.friendly_name.toLocaleLowerCase().indexOf(e)>-1):this.devicesView()});applySearch(n){this.search.set(n)}devicesView=H(()=>this.deviceStore.entities().filter(e=>e.type!=="Coordinator").filter(e=>{let i=e.definition.exposes,r=e.state;return yc(i||[],r||[]).filter(a=>a.validForDashboard).length>0}));visitDevice(n){return fe(this,null,function*(){let{DeviceInspectorComponent:e}=yield import("./chunk-UPYE2THI.js");n&&this.tabManager.openTab({id:n.ieee_address,label:n.friendly_name,data:{ieee_address:n.ieee_address},component:e,iconComponent:Pn,iconData:{device:n}})})}goToDevices(){this.router.navigate(["devices"])}goToGroups(){this.router.navigate(["groups"])}openSysInfo(){let n=this.dialog.open(No,{width:"600px",panelClass:"overlay"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-dashboard"]],decls:25,vars:10,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-6","w-full","ml-3"],[1,"p-6","rounded-2xl","panel","shadow","cursor-pointer",3,"click"],[1,"text-lg","font-semibold","mb-2"],[1,"text-sm","opacity-70"],[1,"p-6","rounded-2xl","panel","shadow"],[1,"text-lg","font-semibold","mb-2",3,"click"],["target","_blank","href","https://github.com/Koenkk/zigbee2mqtt/releases/",1,"link"],[1,"row","m-3","border","p-3"],[3,"searchChange"],[1,"h-full","flex","flex-col","scrollbar","overflow-y-auto","overflow-x-hidden","pt-2","pr-2","pl-1","mb-4"],[1,"dashboard-grid","ml-2","panel"],[1,"p-2","w-full","flex","flex-col"],[1,"cursor-pointer","text-center","w-full","device_name",3,"click"],["displayMode","dashboard",3,"ieee_address"]],template:function(e,i){if(e&1&&(m(0,"div",0)(1,"div",1),k("click",function(){return i.goToGroups()}),m(2,"h2",2),_(3),S(4,"translate"),v(),m(5,"p",3),_(6),v()(),m(7,"div",1),k("click",function(){return i.goToDevices()}),m(8,"h2",2),_(9),S(10,"translate"),v(),m(11,"p",3),_(12),v()(),m(13,"div",4)(14,"h2",5),k("click",function(){return i.openSysInfo()}),_(15),v(),m(16,"p",3)(17,"a",6),_(18),v()()()(),m(19,"div",7)(20,"SearchInput",8),k("searchChange",function(o){return i.applySearch(o)}),v()(),m(21,"div",9)(22,"div",10),Re(23,Zm,4,2,"div",11,Qe),v()()),e&2){let r,o;d(3),E(R(4,6,"GROUPS")),d(3),E(i.groupStore.entities().length),d(3),E(R(10,8,"DEVICES")),d(3),E(i.deviceStore.entities().length),d(3),ie("Version ",(r=i.info())==null?null:r.version),d(3),ie("Commit ",(o=i.info())==null?null:o.commit),d(5),Te(i.filteredDevices())}},dependencies:[re,jr,oi,se],styles:[".panel[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);color:var(--app-text-color);border-color:var(--app-border-color);border-radius:10px;border-width:1px;border-style:solid}[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-x:hidden}.device_name[_ngcontent-%COMP%]{padding-top:2em;background-color:var(--app-panel-color)}.search[_ngcontent-%COMP%]{background-color:var(--app-panel-color)}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:.5rem;width:100%}"]})};var Ao=class{applyChanges(n,e,i,r,o){n.forEachOperation((a,s,l)=>{let c,u;if(a.previousIndex==null){let f=i(a,s,l);c=e.createEmbeddedView(f.templateRef,f.context,f.index),u=ai.INSERTED}else l==null?(e.remove(s),u=ai.REMOVED):(c=e.get(s),e.move(c,l),u=ai.MOVED);o&&o({context:c?.context,operation:u,record:a})})}detach(){}};var Jm=[[["caption"]],[["colgroup"],["col"]],"*"],eg=["caption","colgroup, col","*"];function tg(t,n){t&1&&Ct(0,2)}function ng(t,n){t&1&&(m(0,"thead",0),st(1,1),v(),m(2,"tbody",0),st(3,2)(4,3),v(),m(5,"tfoot",0),st(6,4),v())}function ig(t,n){t&1&&st(0,1)(1,2)(2,3)(3,4)}var Jt=new Ce("CDK_TABLE");var Rs=(()=>{class t{template=p(_t);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkCellDef",""]]})}return t})(),Ts=(()=>{class t{template=p(_t);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkHeaderCellDef",""]]})}return t})(),rg=(()=>{class t{template=p(_t);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkFooterCellDef",""]]})}return t})(),sr=(()=>{class t{_table=p(Jt,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(i,r,o){if(i&1&&(Je(o,Rs,5),Je(o,Ts,5),Je(o,rg,5)),i&2){let a;et(a=tt())&&(r.cell=a.first),et(a=tt())&&(r.headerCell=a.first),et(a=tt())&&(r.footerCell=a.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",wt],stickyEnd:[2,"stickyEnd","stickyEnd",wt]},features:[Fi([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}])]})}return t})(),zo=class{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}},Gu=(()=>{class t extends zo{constructor(){super(p(sr),p(vt))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[ln]})}return t})();var qu=(()=>{class t extends zo{constructor(){let e=p(sr),i=p(vt);super(e,i);let r=e._table?._getCellRole();r&&i.nativeElement.setAttribute("role",r)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[ln]})}return t})();var ks=(()=>{class t{template=p(_t);_differs=p(ni);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof Fo?e.headerCell.template:this instanceof Wu?e.footerCell.template:e.cell.template}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,features:[Yt]})}return t})(),Fo=(()=>{class t extends ks{_table=p(Jt,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(p(_t),p(ni))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",wt]},features:[ln,Yt]})}return t})(),Wu=(()=>{class t extends ks{_table=p(Jt,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(p(_t),p(ni))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",wt]},features:[ln,Yt]})}return t})(),Os=(()=>{class t extends ks{_table=p(Jt,{optional:!0});when;constructor(){super(p(_t),p(ni))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[ln]})}return t})(),Vo=(()=>{class t{_viewContainer=p(sn);cells;context;static mostRecentCellOutlet=null;constructor(){t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","cdkCellOutlet",""]]})}return t})(),Qu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&st(0,0)},dependencies:[Vo],encapsulation:2})}return t})();var Yu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,r){i&1&&st(0,0)},dependencies:[Vo],encapsulation:2})}return t})(),og=(()=>{class t{templateRef=p(_t);_contentClassNames=["cdk-no-data-row","cdk-row"];_cellClassNames=["cdk-cell","cdk-no-data-cell"];_cellSelector="td, cdk-cell, [cdk-cell], .cdk-cell";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["ng-template","cdkNoDataRow",""]]})}return t})(),ju=["top","bottom","left","right"],Ms=class{_isNativeHtmlTable;_stickCellCss;_isBrowser;_needsPositionStickyOnElement;direction;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(n=>this._updateCachedSizes(n)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(n,e,i=!0,r=!0,o,a,s){this._isNativeHtmlTable=n,this._stickCellCss=e,this._isBrowser=i,this._needsPositionStickyOnElement=r,this.direction=o,this._positionListener=a,this._tableInjector=s,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(n);let i=[];for(let r of n)r.nodeType===r.ELEMENT_NODE&&i.push(r,...Array.from(r.children));On({write:()=>{for(let r of i)this._removeStickyStyle(r,e)}},{injector:this._tableInjector})}updateStickyColumns(n,e,i,r=!0,o=!0){if(!n.length||!this._isBrowser||!(e.some(w=>w)||i.some(w=>w))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let a=n[0],s=a.children.length,l=this.direction==="rtl",c=l?"right":"left",u=l?"left":"right",f=e.lastIndexOf(!0),h=i.indexOf(!0),g,T,x;o&&this._updateStickyColumnReplayQueue({rows:[...n],stickyStartStates:[...e],stickyEndStates:[...i]}),On({earlyRead:()=>{g=this._getCellWidths(a,r),T=this._getStickyStartColumnPositions(g,e),x=this._getStickyEndColumnPositions(g,i)},write:()=>{for(let w of n)for(let y=0;y<s;y++){let O=w.children[y];e[y]&&this._addStickyStyle(O,c,T[y],y===f),i[y]&&this._addStickyStyle(O,u,x[y],y===h)}this._positionListener&&g.some(w=>!!w)&&(this._positionListener.stickyColumnsUpdated({sizes:f===-1?[]:g.slice(0,f+1).map((w,y)=>e[y]?w:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:h===-1?[]:g.slice(h).map((w,y)=>i[y+h]?w:null).reverse()}))}},{injector:this._tableInjector})}stickRows(n,e,i){if(!this._isBrowser)return;let r=i==="bottom"?n.slice().reverse():n,o=i==="bottom"?e.slice().reverse():e,a=[],s=[],l=[];On({earlyRead:()=>{for(let c=0,u=0;c<r.length;c++){if(!o[c])continue;a[c]=u;let f=r[c];l[c]=this._isNativeHtmlTable?Array.from(f.children):[f];let h=this._retrieveElementSize(f).height;u+=h,s[c]=h}},write:()=>{let c=o.lastIndexOf(!0);for(let u=0;u<r.length;u++){if(!o[u])continue;let f=a[u],h=u===c;for(let g of l[u])this._addStickyStyle(g,i,f,h)}i==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:a,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:a,elements:l})}},{injector:this._tableInjector})}updateStickyFooterContainer(n,e){this._isNativeHtmlTable&&On({write:()=>{let i=n.querySelector("tfoot");i&&(e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1))}},{injector:this._tableInjector})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(n,e){if(!n.classList.contains(this._stickCellCss))return;for(let r of e)n.style[r]="",n.classList.remove(this._borderCellCss[r]);ju.some(r=>e.indexOf(r)===-1&&n.style[r])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,i,r){n.classList.add(this._stickCellCss),r&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${i}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){let e={top:100,bottom:10,left:1,right:1},i=0;for(let r of ju)n.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let i=[],r=n.children;for(let o=0;o<r.length;o++){let a=r[o];i.push(this._retrieveElementSize(a).width)}return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(n,e){let i=[],r=0;for(let o=0;o<n.length;o++)e[o]&&(i[o]=r,r+=n[o]);return i}_getStickyEndColumnPositions(n,e){let i=[],r=0;for(let o=n.length;o>0;o--)e[o]&&(i[o]=r,r+=n[o]);return i}_retrieveElementSize(n){let e=this._elemSizeCache.get(n);if(e)return e;let i=n.getBoundingClientRect(),r={width:i.width,height:i.height};return this._resizeObserver&&(this._elemSizeCache.set(n,r),this._resizeObserver.observe(n,{box:"border-box"})),r}_updateStickyColumnReplayQueue(n){this._removeFromStickyColumnReplayQueue(n.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(n)}_removeFromStickyColumnReplayQueue(n){let e=new Set(n);for(let i of this._updatedStickyColumnsParamsToReplay)i.rows=i.rows.filter(r=>!e.has(r));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(i=>!!i.rows.length)}_updateCachedSizes(n){let e=!1;for(let i of n){let r=i.borderBoxSize?.length?{width:i.borderBoxSize[0].inlineSize,height:i.borderBoxSize[0].blockSize}:{width:i.contentRect.width,height:i.contentRect.height};r.width!==this._elemSizeCache.get(i.target)?.width&&ag(i.target)&&(e=!0),this._elemSizeCache.set(i.target,r)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let i of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(i.rows,i.stickyStartStates,i.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}};function ag(t){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(n=>t.classList.contains(n))}var $u=new Ce("CDK_SPL");var sg=(()=>{class t{viewContainer=p(sn);elementRef=p(vt);constructor(){let e=p(Jt);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","rowOutlet",""]]})}return t})(),lg=(()=>{class t{viewContainer=p(sn);elementRef=p(vt);constructor(){let e=p(Jt);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","headerRowOutlet",""]]})}return t})(),cg=(()=>{class t{viewContainer=p(sn);elementRef=p(vt);constructor(){let e=p(Jt);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","footerRowOutlet",""]]})}return t})(),ug=(()=>{class t{viewContainer=p(sn);elementRef=p(vt);constructor(){let e=p(Jt);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ge({type:t,selectors:[["","noDataRowOutlet",""]]})}return t})(),Ku=(()=>{class t{_differs=p(ni);_changeDetectorRef=p(hn);_elementRef=p(vt);_dir=p(dc,{optional:!0});_platform=p(uc);_viewRepeater=p(ja);_viewportRuler=p(pc);_stickyPositioningListener=p($u,{optional:!0,skipSelf:!0});_document=p(Ze);_data;_onDestroy=new qt;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new gt;viewChange=new ze({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=p(kt);constructor(){p(new Pr("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((i,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(an(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Vr(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,o,a)=>this._getEmbeddedViewArgs(r.item,a),r=>r.item.data,r=>{r.operation===ai.INSERTED&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);o.context.$implicit=r.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let r=Hu(this._headerRowOutlet,"thead");r&&(r.style.display=e.length?"":"none")}let i=this._headerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,i,"top"),this._headerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let r=Hu(this._footerRowOutlet,"tfoot");r&&(r.style.display=e.length?"":"none")}let i=this._footerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,i,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,a)=>{this._addStickyColumnStyles([o],this._headerRowDefs[a])}),this._rowDefs.forEach(o=>{let a=[];for(let s=0;s<i.length;s++)this._renderRows[s].rowDef===o&&a.push(i[s]);this._addStickyColumnStyles(a,o)}),r.forEach((o,a)=>{this._addStickyColumnStyles([o],this._footerRowDefs[a])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],i=this._cachedRenderRowsMap;if(this._cachedRenderRowsMap=new Map,!this._data)return e;for(let r=0;r<this._data.length;r++){let o=this._data[r],a=this._getRenderRowsForData(o,r,i.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let s=0;s<a.length;s++){let l=a[s],c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(a=>{let s=r&&r.has(a)?r.get(a):[];if(s.length){let l=s.shift();return l.dataIndex=i,l}else return{data:e,rowDef:a,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Lo(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Lo(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Lo(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Lo(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(i=>!i.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(a,s)=>{let l=!!s.getColumnsDiff();return a||l},i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();let r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();let o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),i||r||o}_switchDataSource(e){this._data=[],Vr(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Vr(this.dataSource)?e=this.dataSource.connect(this):Oi(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=K(this.dataSource)),this._renderChangeSubscription=e.pipe(an(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){let r=Array.from(i?.columns||[]).map(s=>{let l=this._columnDefsByName.get(s);return l}),o=r.map(s=>s.sticky),a=r.map(s=>s.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,a,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let i=[];for(let r=0;r<e.viewContainer.length;r++){let o=e.viewContainer.get(r);i.push(o.rootNodes[0])}return i}_getRowDefs(e,i){if(this._rowDefs.length==1)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(o=>!o.when||o.when(i,e));else{let o=this._rowDefs.find(a=>a.when&&a.when(i,e))||this._defaultRowDef;o&&r.push(o)}return r.length,r}_getEmbeddedViewArgs(e,i){let r=e.rowDef,o={$implicit:e.data};return{templateRef:r.template,context:o,index:i}}_renderRow(e,i,r,o={}){let a=e.viewContainer.createEmbeddedView(i.template,o,r);return this._renderCellTemplateForItem(i,o),a}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Vo.mostRecentCellOutlet&&Vo.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){let a=e.get(i).context;a.count=r,a.first=i===0,a.last=i===r-1,a.even=i%2===0,a.odd=!a.even,this.multiTemplateDataRows?(a.dataIndex=this._renderRows[i].dataIndex,a.renderIndex=i):a.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,i=>{let r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new Ms(this._isNativeHtmlTable,this.stickyCssClass,this._platform.isBrowser,this.needsPositionStickyOnElement,e,this._stickyPositioningListener,this._injector),(this._dir?this._dir.change:K()).pipe(an(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let i=this._rowOutlet.viewContainer.length===0;if(i===this._isShowingNoDataRow)return;let r=this._noDataRowOutlet.viewContainer;if(i){let o=r.createEmbeddedView(e.templateRef),a=o.rootNodes[0];if(o.rootNodes.length===1&&a?.nodeType===this._document.ELEMENT_NODE){a.setAttribute("role","row"),a.classList.add(...e._contentClassNames);let s=a.querySelectorAll(e._cellSelector);for(let l=0;l<s.length;l++)s[l].classList.add(...e._cellClassNames)}}else r.clear();this._isShowingNoDataRow=i,this._changeDetectorRef.markForCheck()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=F({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(i,r,o){if(i&1&&(Je(o,og,5),Je(o,sr,5),Je(o,Os,5),Je(o,Fo,5),Je(o,Wu,5)),i&2){let a;et(a=tt())&&(r._noDataRow=a.first),et(a=tt())&&(r._contentColumnDefs=a),et(a=tt())&&(r._contentRowDefs=a),et(a=tt())&&(r._contentHeaderRowDefs=a),et(a=tt())&&(r._contentFooterRowDefs=a)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(i,r){i&2&&ae("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",wt],fixedLayout:[2,"fixedLayout","fixedLayout",wt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Fi([{provide:Jt,useExisting:t},{provide:ja,useClass:Ao},{provide:$u,useValue:null}])],ngContentSelectors:eg,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,r){i&1&&(cn(Jm),Ct(0),Ct(1,1),G(2,tg,1,0),G(3,ng,7,0)(4,ig,4,0)),i&2&&(d(2),q(r._isServer?2:-1),d(),q(r._isNativeHtmlTable?3:4))},dependencies:[lg,sg,ug,cg],styles:[`.cdk-table-fixed-layout{table-layout:fixed}
`],encapsulation:2})}return t})();function Lo(t,n){return t.concat(Array.from(n))}function Hu(t,n){let e=n.toUpperCase(),i=t.viewContainer.element.nativeElement;for(;i;){let r=i.nodeType===1?i.nodeName:null;if(r===e)return i;if(r==="TABLE")break;i=i.parentNode}return null}var Xu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=ti({type:t});static \u0275inj=Jn({imports:[fc]})}return t})();var Uo=class t{column;active=P("");direction=P("");sortChange=new gt;sortable=!0;get isAsc(){return this.active()===this.column&&this.direction()==="asc"}get isDesc(){return this.active()===this.column&&this.direction()==="desc"}onClick(){let n;this.active()===this.column?this.direction()==="asc"?n="desc":this.direction()==="desc"?n="":n="asc":n="asc",this.sortChange.emit({column:n?this.column:"",direction:n})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=ge({type:t,selectors:[["","appTableSort",""]],hostVars:6,hostBindings:function(e,i){e&1&&k("click",function(){return i.onClick()}),e&2&&ae("sortable",i.sortable)("sort-asc",i.isAsc)("sort-desc",i.isDesc)},inputs:{column:[0,"appTableSort","column"],active:"active",direction:"direction"},outputs:{sortChange:"sortChange"}})};var xn=class t{constructor(n){this.template=n}appTableCell;static \u0275fac=function(e){return new(e||t)(We(_t))};static \u0275dir=ge({type:t,selectors:[["","appTableCell",""]],inputs:{appTableCell:"appTableCell"}})};var pg=()=>[],fg=t=>({$implicit:t}),hg=(t,n)=>n.id;function mg(t,n){if(t&1&&(_(0),S(1,"translate")),t&2){let e=D(2).$implicit;ie(" ",R(1,1,e.label)," ")}}function gg(t,n){if(t&1){let e=Z();m(0,"th",6),k("sortChange",function(r){z(e);let o=D(2);return V(o.onSort(r))})("dragstart",function(r){z(e);let o=D().$implicit,a=D();return V(a.onColumnDragStart(r,o.id))})("dragover",function(r){z(e);let o=D().$implicit,a=D();return V(a.onColumnDragOver(r,o.id))})("dragleave",function(){z(e);let r=D(2);return V(r.onColumnDragLeave())})("drop",function(r){z(e);let o=D().$implicit,a=D();return V(a.onColumnDrop(r,o.id))})("dragend",function(){z(e);let r=D(2);return V(r.onColumnDragEnd())}),G(1,mg,2,3),v()}if(t&2){let e=D().$implicit,i=D();dn("width",i.isLastColumn(e.id)?null:e.maxWidth,"px"),ae("sortable",e.sortable)("last-column",i.isLastColumn(e.id))("dragging",i.draggedColumnId()===e.id)("drop-target",i.dropTargetColumnId()===e.id),N("appTableSort",e.id)("active",i.sortColumn)("direction",i.sortDirection)("ngClass",e.headerClass),d(),q(e.hideLabel?-1:1)}}function vg(t,n){if(t&1&&_(0),t&2){let e=D().$implicit,i=D().$implicit,r=D();ie(" ",r.getDefaultCellValue(e,i.id)," ")}}function _g(t,n){if(t&1&&(m(0,"td",7),st(1,8),G(2,vg,1,1),v()),t&2){let e=n.$implicit,i=D().$implicit,r=D();dn("width",r.isLastColumn(i.id)?null:i.maxWidth,"px"),ae("last-column",r.isLastColumn(i.id)),N("ngClass",i.cellClass),d(),N("ngTemplateOutlet",r.getCellTemplate(i.id))("ngTemplateOutletContext",nt(8,fg,e)),d(),q(r.getCellTemplate(i.id)?-1:2)}}function yg(t,n){if(t&1&&(za(0,1),yt(1,gg,2,15,"th",4)(2,_g,3,10,"td",5),Va()),t&2){let e=n.$implicit;N("cdkColumnDef",e.id)}}function Cg(t,n){t&1&&W(0,"tr",9)}function wg(t,n){if(t&1){let e=Z();m(0,"tr",10),k("click",function(){let r=z(e).$implicit,o=D();return V(o.onRowClick(r))}),v()}if(t&2){let e=n.$implicit,i=D();ae("selected",i.isSelected(e))}}var bi=class t{constructor(n){this.cdr=n;_e(()=>{let e=this.columnOrderSignal();e.length>0&&this.columnOrder.set(e)}),_e(()=>{let e=this.config();e?.initialSort&&(this.sortColumn.set(e.initialSort.column),this.sortDirection.set(e.initialSort.direction)),e&&e.settingsControl&&(e.settingsControl.setAllColumns(e.columns),this.columnOrder().length>0&&e.settingsControl.setDisplayedColumns(this.columnOrder())),this.displayedColumnIds(),this.cdr.markForCheck()}),_e(()=>{let e=this.columnOrder(),i=this.config();i&&i.settingsControl&&this.columnOrder().length>0&&i.settingsControl.setDisplayedColumns(this.columnOrder())}),_e(()=>{let e=this.config();e&&e.settingsControl&&e.settingsControl.columnListChanged.subscribe(i=>{this.columnOrder.set(i),this.columnOrderChange.emit(i)})})}dataSource=pe(void 0,{alias:"dataSource"});config=pe(void 0,{alias:"config"});columnOrderSignal=pe([],{alias:"columnOrder"});sortChange=Pt();rowClick=Pt();columnOrderChange=Pt();cellTemplates;sortColumn=P("");sortDirection=P("");columnOrder=P([]);draggedColumnId=P(null);dropTargetColumnId=P(null);sortedColumns=H(()=>{let n=this.config(),e=this.columnOrderSignal();return n?e.length===0?n.columns:this.sortColumnsByOrder(n.columns,e):[]});visibleColumns=H(()=>this.sortedColumns().filter(e=>!e.hidden));displayedColumnIds=H(()=>{let n=this.visibleColumns(),e=this.columnOrder();return e.length===0?n.map(i=>i.id):e.filter(i=>n.some(r=>r.id===i))});totalTableWidth=H(()=>this.visibleColumns().reduce((e,i)=>e+(i.maxWidth||0),0));ngAfterViewInit(){let n=this.dataSource();n&&n.connect().subscribe(()=>{this.cdr.markForCheck()})}sortColumnsByOrder(n,e){let i=e.map(r=>n.find(o=>o.id===r)).filter(r=>r!==void 0);return n.forEach(r=>{i.find(o=>o.id===r.id)||i.push(r)}),i.forEach(r=>{r.hidden=!e.includes(r.id)}),i}isLastColumn(n){let e=this.displayedColumnIds();return e.length>0&&e[e.length-1]===n}getColumn(n){let e=this.config();return e?e.columns.find(i=>i.id===n):void 0}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction),this.sortChange.emit(n)}onRowClick(n){let e=this.config();e&&e.onRowClick&&e.onRowClick(n),this.rowClick.emit(n)}isSelected(n){let e=this.config();return!!(e&&e.selectedItem===n)}trackBy(n,e){let i=this.config();return i&&i.trackByFn?i.trackByFn(n,e):n}getDefaultCellValue(n,e){return n[e]}getCellTemplate(n){return this.cellTemplates.find(e=>e.appTableCell===n)?.template||null}trackByColumnId(n,e){return e.id}onColumnDragStart(n,e){this.draggedColumnId.set(e);let i=n.target.closest("th");if(i){let r=i.textContent||"";this.createGhostImage(r,n)}n.dataTransfer.effectAllowed="move"}createGhostImage(n,e){let i=document.createElement("div");i.className="column-drag-ghost",i.textContent=n,document.body.appendChild(i),e.dataTransfer.setDragImage(i,75,20),setTimeout(()=>{document.body.removeChild(i)},0)}onColumnDragOver(n,e){n.preventDefault(),n.dataTransfer.dropEffect="move";let i=this.draggedColumnId();i&&i!==e&&this.dropTargetColumnId.set(e)}onColumnDragLeave(){this.dropTargetColumnId.set(null)}onColumnDrop(n,e){n.preventDefault();let i=this.draggedColumnId();if(!i||i===e){this.cleanup();return}let r=this.columnOrder().length>0?this.columnOrder():this.displayedColumnIds(),o=r.indexOf(i),a=r.indexOf(e);if(o!==-1&&a!==-1){let s=[...r];s.splice(o,1),s.splice(a,0,i),this.columnOrder.set(s),this.columnOrderChange.emit(s)}this.cleanup()}onColumnDragEnd(){this.cleanup()}cleanup(){this.draggedColumnId.set(null),this.dropTargetColumnId.set(null),this.cdr.markForCheck()}static \u0275fac=function(e){return new(e||t)(We(hn))};static \u0275cmp=F({type:t,selectors:[["TableComponent"]],contentQueries:function(e,i,r){if(e&1&&Je(r,xn,4),e&2){let o;et(o=tt())&&(i.cellTemplates=o)}},inputs:{dataSource:[1,"dataSource"],config:[1,"config"],columnOrderSignal:[1,"columnOrder","columnOrderSignal"]},outputs:{sortChange:"sortChange",rowClick:"rowClick",columnOrderChange:"columnOrderChange"},decls:5,vars:9,consts:[["cdk-table","",3,"dataSource","trackBy"],[3,"cdkColumnDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["cdk-header-cell","","draggable","true",3,"appTableSort","active","direction","sortable","last-column","width","ngClass","dragging","drop-target","sortChange","dragstart","dragover","dragleave","drop","dragend",4,"cdkHeaderCellDef"],["cdk-cell","",3,"last-column","width","ngClass",4,"cdkCellDef"],["cdk-header-cell","","draggable","true",3,"sortChange","dragstart","dragover","dragleave","drop","dragend","appTableSort","active","direction","ngClass"],["cdk-cell","",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["cdk-header-row",""],["cdk-row","",3,"click"]],template:function(e,i){e&1&&(m(0,"table",0),Re(1,yg,3,1,"ng-container",1,hg),yt(3,Cg,1,0,"tr",2)(4,wg,1,2,"tr",3),v()),e&2&&(dn("width","100%")("min-width",i.totalTableWidth(),"px"),N("dataSource",i.dataSource()||In(8,pg))("trackBy",i.trackBy.bind(i)),d(),Te(i.visibleColumns()),d(2),N("cdkHeaderRowDef",i.displayedColumnIds()),d(),N("cdkRowDefColumns",i.displayedColumnIds()))},dependencies:[Xu,Ku,Os,Rs,Ts,sr,qu,Yu,Gu,Qu,Fo,Bi,Yl,Xl,re,Uo,se],styles:["table[_ngcontent-%COMP%]{table-layout:fixed;border-collapse:collapse;border-spacing:0;font-size:var(--table-font-size);text-align:left;background-color:var(--app-background-color)}  thead{color:var(--table-cell-header-color, var(--table-cell-text-color), var(--app-text-color));font:700 14px/20px UI Sans,Lato,Arial,sans-serif;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:var(--table-header-font-size);height:40px}tr[_ngcontent-%COMP%]{height:33px;position:relative;border-bottom-width:1px;box-sizing:border-box;border-bottom-color:#2d2c2c;display:table-row;background-attachment:scroll;background-clip:border-box;background-image:none;background-origin:padding-box;background-position-x:0%;background-position-y:0%;background-repeat:repeat;background-size:auto;color:var(--table-row-text-color, var(--app-text-color));cursor:pointer;padding-left:1em;font-size:var(--table-row-font-size)}th[_ngcontent-%COMP%]{display:table-cell;box-sizing:border-box;word-wrap:break-word;font-size:var(--table-header-font-size)}td[_ngcontent-%COMP%]{transition:opacity .2s;background-attachment:scroll;background-clip:border-box;background-image:none;background-origin:padding-box;background-position-x:0%;background-position-y:0%;background-repeat:repeat;background-size:auto;border-collapse:collapse;box-sizing:border-box;color:var(--table-cell-text-color, var(--app-text-color));cursor:pointer;display:table-cell;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--table-row-font-size)}td[_ngcontent-%COMP%]:first-child{padding-left:1em}  tbody>tr:hover{background:#1c1e21}tr.selected[_ngcontent-%COMP%]{border-left:3px solid rgba(3,69,156,.899)}th.last-column[_ngcontent-%COMP%], td.last-column[_ngcontent-%COMP%]{overflow:visible;text-overflow:clip}td.last-column[_ngcontent-%COMP%]{word-break:break-word;white-space:normal}th[draggable=true][_ngcontent-%COMP%]{cursor:grab;-webkit-user-select:none;user-select:none;transition:background-color .2s ease,opacity .2s ease}th[draggable=true][_ngcontent-%COMP%]:active{cursor:grabbing}th.dragging[_ngcontent-%COMP%]{opacity:.5;background-color:#03459c33}th.drop-target[_ngcontent-%COMP%]{border-left:3px solid rgba(52,152,219,.8);box-shadow:inset 3px 0 #3498db99;animation:_ngcontent-%COMP%_drop-zone-glow .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_drop-zone-glow{0%,to{box-shadow:inset 3px 0 #3498db99}50%{box-shadow:inset 3px 0 #3498db,0 0 8px #3498db66}}"],changeDetection:0})};var bg=["*"],xi=class t{settingsActive=P(!1);toggleSettingsBar(){this.settingsActive.set(!this.settingsActive())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["SettingsBarComponent"]],ngContentSelectors:bg,decls:7,vars:7,consts:[[1,"settings_bar",3,"title"],[1,"settings_bar_toggle",3,"click"],[1,"material-symbols-outlined"],[1,"settings_bar_content"]],template:function(e,i){e&1&&(cn(),B(0,"div",0),S(1,"translate"),B(2,"div",1),Ee("click",function(){return i.toggleSettingsBar()}),B(3,"div",2),_(4),$()(),B(5,"div",3),Ct(6),$()()),e&2&&(ae("active",i.settingsActive()),zi("title",Ie(R(1,5,"OPEN_TABLE_SETTINGS"))),d(4),E(i.settingsActive()?"keyboard_double_arrow_left":"keyboard_double_arrow_right"))},dependencies:[re,se],styles:["[_nghost-%COMP%]{flex:0 0 auto;display:flex}.settings_bar[_ngcontent-%COMP%]{border-right:1px solid var(--app-header-background-color);display:flex;position:relative;padding-top:12px;padding-left:0;padding-right:0}.settings_bar.active[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;transition-duration:.25s}.settings_bar_toggle[_ngcontent-%COMP%]{position:absolute;height:32px;display:flex;align-items:center;border-radius:4px;z-index:10;cursor:pointer;top:0;width:25px;right:-20px;background-color:var(--button-background-color);border:1px solid var(--app-header-background-color)}.settings_bar[_ngcontent-%COMP%] > .settings_bar_content[_ngcontent-%COMP%]{width:0px;overflow:hidden;transition:width .2s ease}.settings_bar.active[_ngcontent-%COMP%] > .settings_bar_content[_ngcontent-%COMP%]{width:270px;min-width:270px;transition:width .2s ease}"]})};var Bt=class t{columnListChanged=Pt();displayedColumns=P([]);allColumns=P([]);initalSettings=!1;availableColumns=H(()=>{if(this.allColumns){let n=this.displayedColumns();return this.allColumns().map(e=>({label:e.label,value:e.id,isSelected:n.includes(e.id)}))}return[]});constructor(){}setAllColumns(n){if(this.allColumns.set(n),!this.initalSettings){let e=n.map(i=>i.id);this.displayedColumns.set([...e])}}setDisplayedColumns(n){this.initalSettings=!0,this.displayedColumns.set(n)}updateColumns(n){if(Array.isArray(n)){let e=n.filter(i=>i.isSelected===!0).map(i=>i.value);this.displayedColumns.set(e),this.columnListChanged.emit(e)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["TableSettingsControl"]],outputs:{columnListChanged:"columnListChanged"},decls:2,vars:5,consts:[[3,"optionsChanged","title","entities"]],template:function(e,i){e&1&&(m(0,"OptionPanelComponent",0),S(1,"translate"),k("optionsChanged",function(o){return i.updateColumns(o)}),v()),e&2&&N("title",Ie(R(1,3,"COLUMN_CONFIG")))("entities",i.availableColumns())},dependencies:[vn,re,se],encapsulation:2})};var Sn=class extends Ba{constructor(e,i){super();this.dataSignal=e;this.injector=i||null,this.dataSubject$.next(this.dataSignal())}dataSubject$=new ze([]);connected=!1;injector=null;connect(){if(!this.connected&&this.injector)this.connected=!0,qe(this.injector,()=>{_e(()=>{let e=this.dataSignal();Ot(()=>{this.dataSubject$.next(e)})})});else if(!this.connected){this.connected=!0;let i=setInterval(()=>{this.dataSubject$.next(this.dataSignal())},100);this._interval=i}return this.dataSubject$.asObservable()}disconnect(){this.connected=!1,this._interval&&clearInterval(this._interval)}};var Bo=class t{translate=p(lt);transform(n){let e=new Date,i=new Date(n),r=Math.floor((i.getTime()-e.getTime())/1e3);if(r<60){let f=r===1?"TIME.seconds_left_one":"TIME.seconds_left";return this.translate.instant(f,{count:r})}let o=Math.floor(r/60);if(o<60){let f=o===1?"TIME.minutes_left_one":"TIME.minutes_left";return this.translate.instant(f,{count:o})}let a=Math.floor(o/60);if(a<24){let f=a===1?"TIME.hours_left_one":"TIME.hours_left";return this.translate.instant(f,{count:a})}let s=Math.floor(a/24);if(s<30){let f=s===1?"TIME.days_left_one":"tTIMEme.days_left";return this.translate.instant(f,{count:s})}let l=Math.floor(s/30);if(l<12){let f=l===1?"TIME.months_left_one":"TIME.months_left";return this.translate.instant(f,{count:l})}let c=Math.floor(l/12),u=c===1?"TIME.years_left_one":"TIME.years_left";return this.translate.instant(u,{count:c})}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=Nl({name:"timeTogo",type:t,pure:!1})};var xg=()=>({maxShown:10}),Sg=t=>({time:t});function Dg(t,n){if(t&1&&(m(0,"div",28),W(1,"span",29),v()),t&2){let e=n.$implicit;d(),ae("red",e.state.availability!=="online")("green",e.state.availability==="online")("yellow",e.state.availability==="")}}function Eg(t,n){if(t&1&&W(0,"DeviceImage",30),t&2){let e=n.$implicit;N("device",e)}}function Mg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.friendly_name," ")}}function Rg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",(e.definition==null?null:e.definition.vendor)||""," ")}}function Tg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",(e.definition==null?null:e.definition.model)||""," ")}}function kg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",(e.state==null?null:e.state.linkquality)??"??"," ")}}function Og(t,n){if(t&1&&(_(0),S(1,"toHex")),t&2){let e=n.$implicit;pn(" ",e.ieee_address??"??"," / ",R(1,2,e.network_address)," ")}}function Ig(t,n){if(t&1&&(_(0),S(1,"human")),t&2){let e=n.$implicit;ie(" ",R(1,1,e.supported)," ")}}function Ng(t,n){if(t&1&&W(0,"DeviceAvailability",31),t&2){let e=n.$implicit;N("device",e)}}function Pg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.health?e.health.messages??"-":"-"," ")}}function Ag(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.health?e.health.messages_per_sec??"-":"-"," ")}}function Lg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.health?e.health.network_address_changes??"-":"-"," ")}}function zg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.health?e.health.leave_count??"-":"-"," ")}}function Vg(t,n){t&1&&(m(0,"span",32),_(1),S(2,"translate"),v()),t&2&&(d(),E(R(2,1,"UPDATE_AVAILABLE")))}function Fg(t,n){t&1&&(m(0,"span"),_(1),S(2,"translate"),v()),t&2&&(d(),E(R(2,1,"UP_TO_DATE")))}function Ug(t,n){if(t&1&&(m(0,"div",33),_(1),S(2,"translate"),W(3,"ProgessBar",34),v()),t&2){let e=D(2).$implicit;d(),ie(" ",R(2,2,"DEVICE_UPDATING")," "),d(2),N("percent",(e.update==null?null:e.update.progress)??0)}}function Bg(t,n){if(t&1&&G(0,Vg,3,3,"span",32)(1,Fg,3,3,"span")(2,Ug,4,4,"div",33),t&2){let e,i=D().$implicit;q((e=i.update.state)==="available"?0:e==="idle"?1:e==="updating"?2:-1)}}function jg(t,n){t&1&&(m(0,"span"),_(1),S(2,"translate"),v()),t&2&&(d(),E(R(2,1,"UNKNOWN")))}function $g(t,n){if(t&1&&G(0,Bg,3,1)(1,jg,3,3,"span"),t&2){let e=n.$implicit;q(e.update?0:1)}}function Hg(t,n){if(t&1&&(m(0,"span"),_(1),v()),t&2){let e=D(2).$implicit;ae("battery_ok",e.state.battery>=50)("battery_warning",e.state.battery<50&&e.state.battery>=20)("battery_low",e.state.battery<20),d(),ie(" ",e.state&&e.state.battery?`${e.state.battery}%`:""," ")}}function Gg(t,n){if(t&1&&G(0,Hg,2,7,"span",36),t&2){let e=D().$implicit;q(e.state?0:-1)}}function qg(t,n){t&1&&(m(0,"span",35),_(1,"power"),v())}function Wg(t,n){if(t&1&&G(0,Gg,1,1)(1,qg,2,0,"span",35),t&2){let e=n.$implicit;q(e.power_source&&e.power_source.indexOf("Battery")>-1?0:1)}}function Qg(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",(e.state==null?null:e.state.lastseenhuman)||"--"," ")}}function Yg(t,n){if(t&1){let e=Z();m(0,"div",24)(1,"button",26),k("click",function(){z(e);let r=D();return V(r.permitJoin())}),_(2),S(3,"translate"),v(),m(4,"div",37),_(5),S(6,"timeTogo"),S(7,"translate"),v()()}if(t&2){let e,i=D();d(2),E(R(3,2,"END_JOIN")),d(3),E(it(7,6,"OPEN_NETWORK",nt(9,Sg,R(6,4,((e=i.bridgeInfo())==null?null:e.permit_join_end)??0))))}}function Kg(t,n){if(t&1){let e=Z();m(0,"div",25)(1,"button",26),k("click",function(){z(e);let r=D();return V(r.permitJoin())}),_(2),S(3,"translate"),v()()}t&2&&(d(2),E(R(3,1,"PERMIT_JOIN")))}var Xg=[{id:"status",label:"STATUS",hideLabel:!0,minWidth:30,maxWidth:30,sortable:!1},{id:"icon",label:"ICON",hideLabel:!0,minWidth:50,maxWidth:50,sortable:!1},{id:"name",label:"NAME",minWidth:150,maxWidth:350,sortable:!0},{id:"vendor",label:"MANUFACTURER",minWidth:80,maxWidth:150,sortable:!0},{id:"model",label:"MODEL",minWidth:100,maxWidth:150,sortable:!0},{id:"linkquality",label:"LQI",minWidth:60,maxWidth:80,sortable:!0},{id:"battery",label:"BATTERY",minWidth:80,maxWidth:120,sortable:!0},{id:"lastseenhuman",label:"LAST_SEEN",minWidth:120,maxWidth:150,sortable:!0},{id:"ieee_address",label:"IEEE_ADDRESS",minWidth:250,maxWidth:250,sortable:!0},{id:"supported",label:"SUPPORT_STATUS",minWidth:50,maxWidth:100,sortable:!0},{id:"type",label:"DEVICE_TYPE",minWidth:50,maxWidth:100,sortable:!0},{id:"firmware_state",label:"FIRMWARE_STATE",minWidth:100,maxWidth:100,sortable:!0},{id:"availability",label:"AVAILABILITY",minWidth:50,maxWidth:100,sortable:!0},{id:"health_messages",label:"HEALTH_MESSAGE",minWidth:80,maxWidth:80,sortable:!0},{id:"health_messages_sec",label:"HEALTH_MESSAGE_PERSEC",minWidth:80,maxWidth:80,sortable:!0},{id:"health_adr_change",label:"HEALTH_ADRCHG",minWidth:80,maxWidth:80,sortable:!0},{id:"health_leave_count",label:"HEALTH_LEAVECNT",minWidth:80,maxWidth:80,sortable:!0}],jo=class t{deviceStore=p(mn);applicationService=p(ct);injector=p(kt);deviceService=p(si);bridgeService=p(we);tabManager=p(Ye);settingsService=p(gn);displayedColumns=P([]);tableSettings=Xt(Bt);tableConfig=H(()=>{let n=this.selectedDevice(),e=this.sortDirection();return{columns:Xg,trackByFn:(i,r)=>r.ieee_address||i,selectedItem:n||void 0,onRowClick:i=>this.selectDevice(i.ieee_address),initialSort:{column:this.sortColumn(),direction:e==="asc"||e==="desc"?e:"asc"},settingsControl:this.tableSettings()}});bridgeInfo=H(()=>{let n=this.bridgeService.bridgeInfo;return n()});sortColumn=P("name");sortDirection=P("asc");searchText=P("");selectedVendors=P([]);selectedModels=P([]);selectedPowering=P([]);selectedAvailability=P([]);devicesView=Nn(this.deviceStore,{criteria:[{property:"type",value:"Coordinator",operator:"not"}],logicalOperator:"AND"},!1,void 0);devices=H(()=>{let n=_c(this.devicesView(),this.searchText(),e=>this.getSearchableFields(e));return Ur(n,this.sortColumn(),this.sortDirection(),(e,i)=>this.getDeviceValue(e,i))});finalyFilter=H(()=>{let n=this.devices(),e=this.selectedVendors().map(a=>a.label),i=this.selectedModels().map(a=>a.label),r=this.selectedPowering().map(a=>a.label),o=this.selectedAvailability().map(a=>a.label);return e.length>0&&(n=n.filter(a=>e.indexOf(a.definition?.vendor)!==-1)),i.length>0&&(n=n.filter(a=>i.indexOf(a.definition?.model)!==-1)),r.length>0&&(n=n.filter(a=>r.indexOf(a.power_source)!==-1)),o.length>0&&(n=n.filter(a=>o.indexOf(a.state?.availability)!==-1)),n});datasourceSignal=P(null);get datasource(){return this.datasourceSignal()||new Sn(this.finalyFilter,this.injector)}vendorsMap=new Map;modelMap=new Map;powerMap=new Map;avaliMap=new Map;vendorList=H(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.definition?e.definition.vendor:void 0).filter(e=>e!==""&&e!==void 0))).map(e=>(this.vendorsMap.has(e)||this.vendorsMap.set(e,{label:e,isSelected:!1}),this.vendorsMap.get(e))));modelList=H(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.definition?e.definition.model:void 0).filter(e=>e!==""&&e!==void 0))).map(e=>(this.modelMap.has(e)||this.modelMap.set(e,{label:e,isSelected:!1}),this.modelMap.get(e))));powerOptionList=H(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.power_source).filter(e=>e!==""&&e!==void 0))).map(e=>(this.powerMap.has(e)||this.powerMap.set(e,{label:e,isSelected:!1}),this.powerMap.get(e))));availabilityList=H(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.state?.availability).filter(e=>e!==""&&e!==void 0))).map(e=>(this.avaliMap.has(e)||this.avaliMap.set(e,{label:e,isSelected:!1}),this.avaliMap.get(e))));selectedDevice=H(()=>this.deviceStore.selectedEntity());constructor(){this.datasourceSignal.set(new Sn(this.finalyFilter,this.injector)),_e(()=>{this.finalyFilter(),this.datasourceSignal.set(new Sn(this.finalyFilter,this.injector))}),_e(()=>{let e=this.devices()});let n=this.settingsService.getPreference("devicelist_columns");n&&this.displayedColumns.set(n),this.applicationService.mainTitle="DEVICE_VIEW"}trackByFn(n,e){return e.friendly_name||e.ieee_address}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction)}columnOrderChange(n){this.settingsService.setPreference("devicelist_columns",n)}getDeviceValue(n,e){switch(e){case"name":return n.friendly_name?.toLowerCase()||"";case"model":return n.definition?.model?.toLowerCase()||"";case"vendor":return n.definition?.vendor?.toLowerCase()||"";case"availability":return n.state?.availability?.toLowerCase()||"";case"linkquality":return n.state?.linkquality??-1;case"battery":return n.state?.battery??-1;case"lastseenhuman":return n.state?.last_seen??0;case"supported":return n.supported??0;case"type":return n.type??0;case"firmware_state":return n.update?.state??0;case"ieee_address":return n.ieee_address??"";case"health_messages":return n.health?n.health.messages??-1:-1;case"health_messages_sec":return n.health?n.health.messages_per_sec??-1:-1;case"health_adr_change":return n.health?n.health.network_address_changes??-1:-1;case"health_leave_count":return n.health?n.health.leave_count??-1:-1;default:return""}}applySearch(n){this.searchText.set(n)}getSearchableFields(n){return[n.friendly_name,n.ieee_address,n.definition?.model,n.definition?.vendor,n.definition?.description,n.state?.availability]}selectDevice(n){this.deviceStore.setSelectedEntityById(n),this.applicationService.inspector="device";let e=this.deviceStore.entities().find(i=>i.ieee_address===n);e&&this.tabManager.openTab({id:n,label:e.friendly_name,data:{ieee_address:n},component:xc,iconComponent:Pn,iconData:{device:e}})}vendorsSelectionChanged(n){Array.isArray(n)&&this.selectedVendors.set(n.filter(e=>e.isSelected))}modelSelectionChanged(n){Array.isArray(n)&&this.selectedModels.set(n.filter(e=>e.isSelected))}powerSelectionChanged(n){Array.isArray(n)&&this.selectedPowering.set(n.filter(e=>e.isSelected))}availabilitySelectionChanged(n){Array.isArray(n)&&this.selectedAvailability.set(n.filter(e=>e.isSelected))}permitJoin(){this.bridgeService.permitJoin(this.bridgeInfo()?.permit_join?0:254)}checkUpdateAll(){this.devicesView().forEach(n=>{this.deviceService.checkUpdate(n)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["DeviceListComponent"]],viewQuery:function(e,i){e&1&&Kt(i.tableSettings,Bt,5),e&2&&un()},decls:47,vars:29,consts:[[1,"flex","w-full","h-full"],[1,"mt-2"],[1,"mt-2",3,"searchChange"],[3,"optionsChanged","title","entities"],[3,"optionsChanged","title","entities","options"],[1,"mt-10","mb-4"],[1,"flex-1","ml-2","overflow-auto","scrollbar"],[3,"sortChange","rowClick","columnOrderChange","dataSource","config","columnOrder"],["appTableCell","status"],["appTableCell","icon"],["appTableCell","name"],["appTableCell","vendor"],["appTableCell","model"],["appTableCell","linkquality"],["appTableCell","ieee_address"],["appTableCell","supported"],["appTableCell","availability"],["appTableCell","health_messages"],["appTableCell","health_messages_sec"],["appTableCell","health_adr_change"],["appTableCell","health_leave_count"],["appTableCell","firmware_state"],["appTableCell","battery"],["appTableCell","lastseenhuman"],[1,"mt-2","flex","flex-col"],[1,"button"],[1,"button-link","left",3,"click"],[1,"mt-4"],[1,"flex","ml-2"],[1,"statusIcon"],["width","25px",1,"icon","ml-2",3,"device"],[3,"device"],[1,"firmware_available"],[1,"flex","flex-row","items-center"],[1,"block","ml-1","max-w-36",3,"percent"],[1,"material-symbols-outlined"],[3,"battery_ok","battery_warning","battery_low"],[1,"ml-2","mr-2"]],template:function(e,i){if(e&1&&(m(0,"div",0)(1,"SettingsBarComponent")(2,"span",1),_(3,"Filter"),v(),m(4,"SearchInput",2),k("searchChange",function(o){return i.applySearch(o)}),v(),m(5,"div",1)(6,"OptionPanelComponent",3),S(7,"translate"),k("optionsChanged",function(o){return i.vendorsSelectionChanged(o)}),v()(),m(8,"div",1)(9,"OptionPanelComponent",3),S(10,"translate"),k("optionsChanged",function(o){return i.modelSelectionChanged(o)}),v()(),m(11,"div",1)(12,"OptionPanelComponent",4),S(13,"translate"),k("optionsChanged",function(o){return i.availabilitySelectionChanged(o)}),v()(),m(14,"div",1)(15,"OptionPanelComponent",3),S(16,"translate"),k("optionsChanged",function(o){return i.powerSelectionChanged(o)}),v()(),W(17,"hr",5),m(18,"span"),_(19,"Settings"),v(),m(20,"div",1),W(21,"TableSettingsControl"),v()(),m(22,"div",6)(23,"TableComponent",7),k("sortChange",function(o){return i.onSort(o)})("rowClick",function(o){return i.selectDevice(o.ieee_address)})("columnOrderChange",function(o){return i.columnOrderChange(o)}),yt(24,Dg,2,6,"ng-template",8)(25,Eg,1,1,"ng-template",9)(26,Mg,1,1,"ng-template",10)(27,Rg,1,1,"ng-template",11)(28,Tg,1,1,"ng-template",12)(29,kg,1,1,"ng-template",13)(30,Og,2,4,"ng-template",14)(31,Ig,2,3,"ng-template",15)(32,Ng,1,1,"ng-template",16)(33,Pg,1,1,"ng-template",17)(34,Ag,1,1,"ng-template",18)(35,Lg,1,1,"ng-template",19)(36,zg,1,1,"ng-template",20)(37,$g,2,1,"ng-template",21)(38,Wg,2,1,"ng-template",22)(39,Qg,1,1,"ng-template",23),v(),G(40,Yg,8,11,"div",24)(41,Kg,4,3,"div",25),m(42,"div",25)(43,"button",26),k("click",function(){return i.checkUpdateAll()}),_(44),S(45,"translate"),v()(),W(46,"div",27),v()()),e&2){let r;d(6),N("title",Ie(R(7,18,"MANUFACTURER")))("entities",i.vendorList()),d(3),N("title",Ie(R(10,20,"MODEL")))("entities",i.modelList()),d(3),N("title",Ie(R(13,22,"STATUS")))("entities",i.availabilityList())("options",In(28,xg)),d(3),N("title",Ie(R(16,24,"POWER")))("entities",i.powerOptionList()),d(8),N("dataSource",i.datasource)("config",i.tableConfig())("columnOrder",i.displayedColumns()),d(17),q(((r=i.bridgeInfo())==null?null:r.permit_join)===!0&&((r=i.bridgeInfo())!=null&&r.permit_join_end)?40:41),d(4),E(R(45,26,"CHECK_FOR_UPDATE_ALL"))}},dependencies:[re,oi,vn,Pn,bi,xn,Bt,wc,bc,xi,se,Cc,vc,Bo],styles:["[_nghost-%COMP%]{width:100%}.icon[_ngcontent-%COMP%]{max-width:30px}.icon_cell[_ngcontent-%COMP%]{width:50px;padding:4px}.battery_ok[_ngcontent-%COMP%], .firmware_available[_ngcontent-%COMP%]{color:var(--app-link-good-color)}.battery_warning[_ngcontent-%COMP%]{color:--app-link-warning-color}.battery_low[_ngcontent-%COMP%]{color:var(--app-link-danger-color)}th.last-column[_ngcontent-%COMP%], td.last-column[_ngcontent-%COMP%]{flex:1;overflow:visible;text-overflow:clip}td.last-column[_ngcontent-%COMP%]{word-break:break-word;white-space:normal}th[_ngcontent-%COMP%]:not(.last-column), td[_ngcontent-%COMP%]:not(.last-column){flex:0 0 auto}hr[_ngcontent-%COMP%]{background-color:var(--app-border-color);border:none;height:1px}span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.scrollbar[_ngcontent-%COMP%]{min-width:0}"]})};var Zg={value:()=>{}};function ed(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new $o(e)}function $o(t){this._=t}function Jg(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}$o.prototype=ed.prototype={constructor:$o,on:function(t,n){var e=this._,i=Jg(t+"",e),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=e0(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(r=(t=i[o]).type)e[r]=Ju(e[r],t.name,n);else if(n==null)for(r in e)e[r]=Ju(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new $o(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function e0(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function Ju(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=Zg,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var en=ed;var Ho="http://www.w3.org/1999/xhtml",Is={svg:"http://www.w3.org/2000/svg",xhtml:Ho,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Is.hasOwnProperty(n)?{space:Is[n],local:t}:t}function t0(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ho&&n.documentElement.namespaceURI===Ho?n.createElement(t):n.createElementNS(e,t)}}function n0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Go(t){var n=tn(t);return(n.local?n0:t0)(n)}function i0(){}function Hn(t){return t==null?i0:function(){return this.querySelector(t)}}function td(t){typeof t!="function"&&(t=Hn(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new be(i,this._parents)}function Ns(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function r0(){return[]}function lr(t){return t==null?r0:function(){return this.querySelectorAll(t)}}function o0(t){return function(){return Ns(t.apply(this,arguments))}}function nd(t){typeof t=="function"?t=o0(t):t=lr(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var a=n[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(i.push(t.call(l,l.__data__,c,a)),r.push(l));return new be(i,r)}function cr(t){return function(){return this.matches(t)}}function qo(t){return function(n){return n.matches(t)}}var a0=Array.prototype.find;function s0(t){return function(){return a0.call(this.children,t)}}function l0(){return this.firstElementChild}function id(t){return this.select(t==null?l0:s0(typeof t=="function"?t:qo(t)))}var c0=Array.prototype.filter;function u0(){return Array.from(this.children)}function d0(t){return function(){return c0.call(this.children,t)}}function rd(t){return this.selectAll(t==null?u0:d0(typeof t=="function"?t:qo(t)))}function od(t){typeof t!="function"&&(t=cr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new be(i,this._parents)}function Wo(t){return new Array(t.length)}function ad(){return new be(this._enter||this._groups.map(Wo),this._parents)}function ur(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ur.prototype={constructor:ur,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function sd(t){return function(){return t}}function p0(t,n,e,i,r,o){for(var a=0,s,l=n.length,c=o.length;a<c;++a)(s=n[a])?(s.__data__=o[a],i[a]=s):e[a]=new ur(t,o[a]);for(;a<l;++a)(s=n[a])&&(r[a]=s)}function f0(t,n,e,i,r,o,a){var s,l,c=new Map,u=n.length,f=o.length,h=new Array(u),g;for(s=0;s<u;++s)(l=n[s])&&(h[s]=g=a.call(l,l.__data__,s,n)+"",c.has(g)?r[s]=l:c.set(g,l));for(s=0;s<f;++s)g=a.call(t,o[s],s,o)+"",(l=c.get(g))?(i[s]=l,l.__data__=o[s],c.delete(g)):e[s]=new ur(t,o[s]);for(s=0;s<u;++s)(l=n[s])&&c.get(h[s])===l&&(r[s]=l)}function h0(t){return t.__data__}function ld(t,n){if(!arguments.length)return Array.from(this,h0);var e=n?f0:p0,i=this._parents,r=this._groups;typeof t!="function"&&(t=sd(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],f=r[c],h=f.length,g=m0(t.call(u,u&&u.__data__,c,i)),T=g.length,x=s[c]=new Array(T),w=a[c]=new Array(T),y=l[c]=new Array(h);e(u,f,x,w,y,g,n);for(var O=0,j=0,b,U;O<T;++O)if(b=x[O]){for(O>=j&&(j=O+1);!(U=w[j])&&++j<T;);b._next=U||null}}return a=new be(a,i),a._enter=s,a._exit=l,a}function m0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function cd(){return new be(this._exit||this._groups.map(Wo),this._parents)}function ud(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function dd(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var c=e[l],u=i[l],f=c.length,h=s[l]=new Array(f),g,T=0;T<f;++T)(g=c[T]||u[T])&&(h[T]=g);for(;l<r;++l)s[l]=e[l];return new be(s,this._parents)}function pd(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function fd(t){t||(t=g0);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a=e[o],s=a.length,l=r[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(n)}return new be(r,this._parents).order()}function g0(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function hd(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function md(){return Array.from(this)}function gd(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function vd(){let t=0;for(let n of this)++t;return t}function _d(){return!this.node()}function yd(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,a=r.length,s;o<a;++o)(s=r[o])&&t.call(s,s.__data__,o,r);return this}function v0(t){return function(){this.removeAttribute(t)}}function _0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function y0(t,n){return function(){this.setAttribute(t,n)}}function C0(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function w0(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function b0(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Cd(t,n){var e=tn(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?_0:v0:typeof n=="function"?e.local?b0:w0:e.local?C0:y0)(e,n))}function Qo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x0(t){return function(){this.style.removeProperty(t)}}function S0(t,n,e){return function(){this.style.setProperty(t,n,e)}}function D0(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function wd(t,n,e){return arguments.length>1?this.each((n==null?x0:typeof n=="function"?D0:S0)(t,n,e??"")):Dn(this.node(),t)}function Dn(t,n){return t.style.getPropertyValue(n)||Qo(t).getComputedStyle(t,null).getPropertyValue(n)}function E0(t){return function(){delete this[t]}}function M0(t,n){return function(){this[t]=n}}function R0(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function bd(t,n){return arguments.length>1?this.each((n==null?E0:typeof n=="function"?R0:M0)(t,n)):this.node()[t]}function xd(t){return t.trim().split(/^|\s+/)}function Ps(t){return t.classList||new Sd(t)}function Sd(t){this._node=t,this._names=xd(t.getAttribute("class")||"")}Sd.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Dd(t,n){for(var e=Ps(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function Ed(t,n){for(var e=Ps(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function T0(t){return function(){Dd(this,t)}}function k0(t){return function(){Ed(this,t)}}function O0(t,n){return function(){(n.apply(this,arguments)?Dd:Ed)(this,t)}}function Md(t,n){var e=xd(t+"");if(arguments.length<2){for(var i=Ps(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?O0:n?T0:k0)(e,n))}function I0(){this.textContent=""}function N0(t){return function(){this.textContent=t}}function P0(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Rd(t){return arguments.length?this.each(t==null?I0:(typeof t=="function"?P0:N0)(t)):this.node().textContent}function A0(){this.innerHTML=""}function L0(t){return function(){this.innerHTML=t}}function z0(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Td(t){return arguments.length?this.each(t==null?A0:(typeof t=="function"?z0:L0)(t)):this.node().innerHTML}function V0(){this.nextSibling&&this.parentNode.appendChild(this)}function kd(){return this.each(V0)}function F0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Od(){return this.each(F0)}function Id(t){var n=typeof t=="function"?t:Go(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function U0(){return null}function Nd(t,n){var e=typeof t=="function"?t:Go(t),i=n==null?U0:typeof n=="function"?n:Hn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function B0(){var t=this.parentNode;t&&t.removeChild(this)}function Pd(){return this.each(B0)}function j0(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function $0(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ad(t){return this.select(t?$0:j0)}function Ld(t){return arguments.length?this.property("__data__",t):this.node().__data__}function H0(t){return function(n){t.call(this,n,this.__data__)}}function G0(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function q0(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function W0(t,n,e){return function(){var i=this.__on,r,o=H0(n);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function zd(t,n,e){var i=G0(t+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(s=n?W0:q0,r=0;r<o;++r)this.each(s(i[r],n,e));return this}function Vd(t,n,e){var i=Qo(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function Q0(t,n){return function(){return Vd(this,t,n)}}function Y0(t,n){return function(){return Vd(this,t,n.apply(this,arguments))}}function Fd(t,n){return this.each((typeof n=="function"?Y0:Q0)(t,n))}function*Ud(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var As=[null];function be(t,n){this._groups=t,this._parents=n}function Bd(){return new be([[document.documentElement]],As)}function K0(){return this}be.prototype=Bd.prototype={constructor:be,select:td,selectAll:nd,selectChild:id,selectChildren:rd,filter:od,data:ld,enter:ad,exit:cd,join:ud,merge:dd,selection:K0,order:pd,sort:fd,call:hd,nodes:md,node:gd,size:vd,empty:_d,each:yd,attr:Cd,style:wd,property:bd,classed:Md,text:Rd,html:Td,raise:kd,lower:Od,append:Id,insert:Nd,remove:Pd,clone:Ad,datum:Ld,on:zd,dispatch:Fd,[Symbol.iterator]:Ud};var nn=Bd;function Ve(t){return typeof t=="string"?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],As)}function jd(t){let n;for(;n=t.sourceEvent;)t=n;return t}function pt(t,n){if(t=jd(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}var $d={passive:!1},Gn={capture:!0,passive:!1};function Yo(t){t.stopImmediatePropagation()}function En(t){t.preventDefault(),t.stopImmediatePropagation()}function dr(t){var n=t.document.documentElement,e=Ve(t).on("dragstart.drag",En,Gn);"onselectstart"in n?e.on("selectstart.drag",En,Gn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function pr(t,n){var e=t.document.documentElement,i=Ve(t).on("dragstart.drag",null);n&&(i.on("click.drag",En,Gn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var fr=t=>()=>t;function hr(t,{sourceEvent:n,subject:e,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}hr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function X0(t){return!t.ctrlKey&&!t.button}function Z0(){return this.parentNode}function J0(t,n){return n??{x:t.x,y:t.y}}function ev(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ls(){var t=X0,n=Z0,e=J0,i=ev,r={},o=en("start","drag","end"),a=0,s,l,c,u,f=0;function h(b){b.on("mousedown.drag",g).filter(i).on("touchstart.drag",w).on("touchmove.drag",y,$d).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(b,U){if(!(u||!t.call(this,b,U))){var Q=j(this,n.call(this,b,U),b,U,"mouse");Q&&(Ve(b.view).on("mousemove.drag",T,Gn).on("mouseup.drag",x,Gn),dr(b.view),Yo(b),c=!1,s=b.clientX,l=b.clientY,Q("start",b))}}function T(b){if(En(b),!c){var U=b.clientX-s,Q=b.clientY-l;c=U*U+Q*Q>f}r.mouse("drag",b)}function x(b){Ve(b.view).on("mousemove.drag mouseup.drag",null),pr(b.view,c),En(b),r.mouse("end",b)}function w(b,U){if(t.call(this,b,U)){var Q=b.changedTouches,J=n.call(this,b,U),ne=Q.length,ve,ce;for(ve=0;ve<ne;++ve)(ce=j(this,J,b,U,Q[ve].identifier,Q[ve]))&&(Yo(b),ce("start",b,Q[ve]))}}function y(b){var U=b.changedTouches,Q=U.length,J,ne;for(J=0;J<Q;++J)(ne=r[U[J].identifier])&&(En(b),ne("drag",b,U[J]))}function O(b){var U=b.changedTouches,Q=U.length,J,ne;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),J=0;J<Q;++J)(ne=r[U[J].identifier])&&(Yo(b),ne("end",b,U[J]))}function j(b,U,Q,J,ne,ve){var ce=o.copy(),xe=pt(ve||Q,U),Xe,$e,C;if((C=e.call(b,new hr("beforestart",{sourceEvent:Q,target:h,identifier:ne,active:a,x:xe[0],y:xe[1],dx:0,dy:0,dispatch:ce}),J))!=null)return Xe=C.x-xe[0]||0,$e=C.y-xe[1]||0,function A(M,L,X){var ee=xe,te;switch(M){case"start":r[ne]=A,te=a++;break;case"end":delete r[ne],--a;case"drag":xe=pt(X||L,U),te=a;break}ce.call(M,b,new hr(M,{sourceEvent:L,subject:C,target:h,identifier:ne,active:te,x:xe[0]+Xe,y:xe[1]+$e,dx:xe[0]-ee[0],dy:xe[1]-ee[1],dispatch:ce}),J)}}return h.filter=function(b){return arguments.length?(t=typeof b=="function"?b:fr(!!b),h):t},h.container=function(b){return arguments.length?(n=typeof b=="function"?b:fr(b),h):n},h.subject=function(b){return arguments.length?(e=typeof b=="function"?b:fr(b),h):e},h.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:fr(!!b),h):i},h.on=function(){var b=o.on.apply(o,arguments);return b===o?h:b},h.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,h):Math.sqrt(f)},h}function Ko(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function zs(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function vr(){}var mr=.7,Jo=1/mr,Si="\\s*([+-]?\\d+)\\s*",gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tv=/^#([0-9a-f]{3,8})$/,nv=new RegExp(`^rgb\\(${Si},${Si},${Si}\\)$`),iv=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),rv=new RegExp(`^rgba\\(${Si},${Si},${Si},${gr}\\)$`),ov=new RegExp(`^rgba\\(${jt},${jt},${jt},${gr}\\)$`),av=new RegExp(`^hsl\\(${gr},${jt},${jt}\\)$`),sv=new RegExp(`^hsla\\(${gr},${jt},${jt},${gr}\\)$`),Hd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ko(vr,Mn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Gd,formatHex:Gd,formatHex8:lv,formatHsl:cv,formatRgb:qd,toString:qd});function Gd(){return this.rgb().formatHex()}function lv(){return this.rgb().formatHex8()}function cv(){return Zd(this).formatHsl()}function qd(){return this.rgb().formatRgb()}function Mn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=tv.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Wd(n):e===3?new Ke(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?Xo(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?Xo(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=nv.exec(t))?new Ke(n[1],n[2],n[3],1):(n=iv.exec(t))?new Ke(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=rv.exec(t))?Xo(n[1],n[2],n[3],n[4]):(n=ov.exec(t))?Xo(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=av.exec(t))?Kd(n[1],n[2]/100,n[3]/100,1):(n=sv.exec(t))?Kd(n[1],n[2]/100,n[3]/100,n[4]):Hd.hasOwnProperty(t)?Wd(Hd[t]):t==="transparent"?new Ke(NaN,NaN,NaN,0):null}function Wd(t){return new Ke(t>>16&255,t>>8&255,t&255,1)}function Xo(t,n,e,i){return i<=0&&(t=n=e=NaN),new Ke(t,n,e,i)}function uv(t){return t instanceof vr||(t=Mn(t)),t?(t=t.rgb(),new Ke(t.r,t.g,t.b,t.opacity)):new Ke}function Di(t,n,e,i){return arguments.length===1?uv(t):new Ke(t,n,e,i??1)}function Ke(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}Ko(Ke,Di,zs(vr,{brighter(t){return t=t==null?Jo:Math.pow(Jo,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mr:Math.pow(mr,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ke(Wn(this.r),Wn(this.g),Wn(this.b),ea(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qd,formatHex:Qd,formatHex8:dv,formatRgb:Yd,toString:Yd}));function Qd(){return`#${qn(this.r)}${qn(this.g)}${qn(this.b)}`}function dv(){return`#${qn(this.r)}${qn(this.g)}${qn(this.b)}${qn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yd(){let t=ea(this.opacity);return`${t===1?"rgb(":"rgba("}${Wn(this.r)}, ${Wn(this.g)}, ${Wn(this.b)}${t===1?")":`, ${t})`}`}function ea(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qn(t){return t=Wn(t),(t<16?"0":"")+t.toString(16)}function Kd(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new St(t,n,e,i)}function Zd(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof vr||(t=Mn(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),a=NaN,s=o-r,l=(o+r)/2;return s?(n===o?a=(e-i)/s+(e<i)*6:e===o?a=(i-n)/s+2:a=(n-e)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new St(a,s,l,t.opacity)}function Jd(t,n,e,i){return arguments.length===1?Zd(t):new St(t,n,e,i??1)}function St(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}Ko(St,Jd,zs(vr,{brighter(t){return t=t==null?Jo:Math.pow(Jo,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mr:Math.pow(mr,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new Ke(Vs(t>=240?t-240:t+120,r,i),Vs(t,r,i),Vs(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new St(Xd(this.h),Zo(this.s),Zo(this.l),ea(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=ea(this.opacity);return`${t===1?"hsl(":"hsla("}${Xd(this.h)}, ${Zo(this.s)*100}%, ${Zo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xd(t){return t=(t||0)%360,t<0?t+360:t}function Zo(t){return Math.max(0,Math.min(1,t||0))}function Vs(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function Fs(t,n,e,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*i+a*r)/6}function ep(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<n-1?t[i+2]:2*o-r;return Fs((e-i/n)*n,a,r,o,s)}}function tp(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),r=t[(i+n-1)%n],o=t[i%n],a=t[(i+1)%n],s=t[(i+2)%n];return Fs((e-i/n)*n,r,o,a,s)}}var Us=t=>()=>t;function pv(t,n){return function(e){return t+e*n}}function fv(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function np(t){return(t=+t)==1?ta:function(n,e){return e-n?fv(n,e,t):Us(isNaN(n)?e:n)}}function ta(t,n){var e=n-t;return e?pv(t,e):Us(isNaN(t)?n:t)}var na=(function t(n){var e=np(n);function i(r,o){var a=e((r=Di(r)).r,(o=Di(o)).r),s=e(r.g,o.g),l=e(r.b,o.b),c=ta(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i})(1);function ip(t){return function(n){var e=n.length,i=new Array(e),r=new Array(e),o=new Array(e),a,s;for(a=0;a<e;++a)s=Di(n[a]),i[a]=s.r||0,r[a]=s.g||0,o[a]=s.b||0;return i=t(i),r=t(r),o=t(o),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=o(l),s+""}}}var hv=ip(ep),mv=ip(tp);function ft(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var js=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bs=new RegExp(js.source,"g");function gv(t){return function(){return t}}function vv(t){return function(n){return t(n)+""}}function $s(t,n){var e=js.lastIndex=Bs.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(t=t+"",n=n+"";(i=js.exec(t))&&(r=Bs.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ft(i,r)})),e=Bs.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?vv(l[0].x):gv(n):(n=l.length,function(c){for(var u=0,f;u<n;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}var rp=180/Math.PI,ia={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hs(t,n,e,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(s=Math.sqrt(e*e+i*i))&&(e/=s,i/=s,l/=s),t*i<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*rp,skewX:Math.atan(l)*rp,scaleX:a,scaleY:s}}var ra;function op(t){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?ia:Hs(n.a,n.b,n.c,n.d,n.e,n.f)}function ap(t){return t==null?ia:(ra||(ra=document.createElementNS("http://www.w3.org/2000/svg","g")),ra.setAttribute("transform",t),(t=ra.transform.baseVal.consolidate())?(t=t.matrix,Hs(t.a,t.b,t.c,t.d,t.e,t.f)):ia)}function sp(t,n,e,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,g,T){if(c!==f||u!==h){var x=g.push("translate(",null,n,null,e);T.push({i:x-4,x:ft(c,f)},{i:x-2,x:ft(u,h)})}else(f||h)&&g.push("translate("+f+n+h+e)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:ft(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function s(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:ft(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,g,T){if(c!==f||u!==h){var x=g.push(r(g)+"scale(",null,",",null,")");T.push({i:x-4,x:ft(c,f)},{i:x-2,x:ft(u,h)})}else(f!==1||h!==1)&&g.push(r(g)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),s(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(g){for(var T=-1,x=h.length,w;++T<x;)f[(w=h[T]).i]=w.x(g);return f.join("")}}}var Gs=sp(op,"px, ","px)","deg)"),qs=sp(ap,", ",")",")");var _v=1e-12;function lp(t){return((t=Math.exp(t))+1/t)/2}function yv(t){return((t=Math.exp(t))-1/t)/2}function Cv(t){return((t=Math.exp(2*t))-1)/(t+1)}var Ws=(function t(n,e,i){function r(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],f=a[1],h=a[2],g=u-s,T=f-l,x=g*g+T*T,w,y;if(x<_v)y=Math.log(h/c)/n,w=function(J){return[s+J*g,l+J*T,c*Math.exp(n*J*y)]};else{var O=Math.sqrt(x),j=(h*h-c*c+i*x)/(2*c*e*O),b=(h*h-c*c-i*x)/(2*h*e*O),U=Math.log(Math.sqrt(j*j+1)-j),Q=Math.log(Math.sqrt(b*b+1)-b);y=(Q-U)/n,w=function(J){var ne=J*y,ve=lp(U),ce=c/(e*O)*(ve*Cv(n*ne+U)-yv(U));return[s+ce*g,l+ce*T,c*ve/lp(n*ne+U)]}}return w.duration=y*1e3*n/Math.SQRT2,w}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return t(a,s,l)},r})(Math.SQRT2,2,4);var Ei=0,yr=0,_r=0,up=1e3,oa,Cr,aa=0,Qn=0,sa=0,wr=typeof performance=="object"&&performance.now?performance:Date,dp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xr(){return Qn||(dp(wv),Qn=wr.now()+sa)}function wv(){Qn=0}function br(){this._call=this._time=this._next=null}br.prototype=Mi.prototype={constructor:br,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?xr():+e)+(n==null?0:+n),!this._next&&Cr!==this&&(Cr?Cr._next=this:oa=this,Cr=this),this._call=t,this._time=e,Qs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qs())}};function Mi(t,n,e){var i=new br;return i.restart(t,n,e),i}function pp(){xr(),++Ei;for(var t=oa,n;t;)(n=Qn-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Ei}function cp(){Qn=(aa=wr.now())+sa,Ei=yr=0;try{pp()}finally{Ei=0,xv(),Qn=0}}function bv(){var t=wr.now(),n=t-aa;n>up&&(sa-=n,aa=t)}function xv(){for(var t,n=oa,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:oa=e);Cr=t,Qs(i)}function Qs(t){if(!Ei){yr&&(yr=clearTimeout(yr));var n=t-Qn;n>24?(t<1/0&&(yr=setTimeout(cp,t-wr.now()-sa)),_r&&(_r=clearInterval(_r))):(_r||(aa=wr.now(),_r=setInterval(bv,up)),Ei=1,dp(cp))}}function la(t,n,e){var i=new br;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Sv=en("start","end","cancel","interrupt"),Dv=[],mp=0,fp=1,ua=2,ca=3,hp=4,da=5,Sr=6;function Rn(t,n,e,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Ev(t,e,{name:n,index:i,group:r,on:Sv,tween:Dv,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:mp})}function Dr(t,n){var e=Oe(t,n);if(e.state>mp)throw new Error("too late; already scheduled");return e}function Ae(t,n){var e=Oe(t,n);if(e.state>ca)throw new Error("too late; already running");return e}function Oe(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Ev(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=Mi(o,0,e.time);function o(c){e.state=fp,e.timer.restart(a,e.delay,e.time),e.delay<=c&&a(c-e.delay)}function a(c){var u,f,h,g;if(e.state!==fp)return l();for(u in i)if(g=i[u],g.name===e.name){if(g.state===ca)return la(a);g.state===hp?(g.state=Sr,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[u]):+u<n&&(g.state=Sr,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[u])}if(la(function(){e.state===ca&&(e.state=hp,e.timer.restart(s,e.delay,e.time),s(c))}),e.state=ua,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ua){for(e.state=ca,r=new Array(h=e.tween.length),u=0,f=-1;u<h;++u)(g=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(r[++f]=g);r.length=f+1}}function s(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=da,1),f=-1,h=r.length;++f<h;)r[f].call(t,u);e.state===da&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=Sr,e.timer.stop(),delete i[n];for(var c in i)return;delete t.__transition}}function Tn(t,n){var e=t.__transition,i,r,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((i=e[a]).name!==n){o=!1;continue}r=i.state>ua&&i.state<da,i.state=Sr,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[a]}o&&delete t.__transition}}function gp(t){return this.each(function(){Tn(this,t)})}function Mv(t,n){var e,i;return function(){var r=Ae(this,t),o=r.tween;if(o!==e){i=e=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===n){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Rv(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=Ae(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:n,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function vp(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=Oe(this.node(),e).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((n==null?Mv:Rv)(e,t,n))}function Ri(t,n,e){var i=t._id;return t.each(function(){var r=Ae(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return Oe(r,i).value[n]}}function pa(t,n){var e;return(typeof n=="number"?ft:n instanceof Mn?na:(e=Mn(n))?(n=e,na):$s)(t,n)}function Tv(t){return function(){this.removeAttribute(t)}}function kv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ov(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=n(i=a,e)}}function Iv(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=n(i=a,e)}}function Nv(t,n,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function Pv(t,n,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function _p(t,n){var e=tn(t),i=e==="transform"?qs:pa;return this.attrTween(t,typeof n=="function"?(e.local?Pv:Nv)(e,i,Ri(this,"attr."+t,n)):n==null?(e.local?kv:Tv)(e):(e.local?Iv:Ov)(e,i,n))}function Av(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Lv(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function zv(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&Lv(t,o)),e}return r._value=n,r}function Vv(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&Av(t,o)),e}return r._value=n,r}function yp(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=tn(t);return this.tween(e,(i.local?zv:Vv)(i,n))}function Fv(t,n){return function(){Dr(this,t).delay=+n.apply(this,arguments)}}function Uv(t,n){return n=+n,function(){Dr(this,t).delay=n}}function Cp(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Fv:Uv)(n,t)):Oe(this.node(),n).delay}function Bv(t,n){return function(){Ae(this,t).duration=+n.apply(this,arguments)}}function jv(t,n){return n=+n,function(){Ae(this,t).duration=n}}function wp(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Bv:jv)(n,t)):Oe(this.node(),n).duration}function $v(t,n){if(typeof n!="function")throw new Error;return function(){Ae(this,t).ease=n}}function bp(t){var n=this._id;return arguments.length?this.each($v(n,t)):Oe(this.node(),n).ease}function Hv(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Ae(this,t).ease=e}}function xp(t){if(typeof t!="function")throw new Error;return this.each(Hv(this._id,t))}function Sp(t){typeof t!="function"&&(t=cr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new Be(i,this._parents,this._name,this._id)}function Dp(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=n[s],c=e[s],u=l.length,f=a[s]=new Array(u),h,g=0;g<u;++g)(h=l[g]||c[g])&&(f[g]=h);for(;s<i;++s)a[s]=n[s];return new Be(a,this._parents,this._name,this._id)}function Gv(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function qv(t,n,e){var i,r,o=Gv(n)?Dr:Ae;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(n,e),a.on=r}}function Ep(t,n){var e=this._id;return arguments.length<2?Oe(this.node(),e).on.on(t):this.each(qv(e,t,n))}function Wv(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Mp(){return this.on("end.remove",Wv(this._id))}function Rp(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Hn(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,c=o[a]=new Array(l),u,f,h=0;h<l;++h)(u=s[h])&&(f=t.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,Rn(c[h],n,e,h,c,Oe(u,e)));return new Be(o,this._parents,n,e)}function Tp(t){var n=this._name,e=this._id;typeof t!="function"&&(t=lr(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),g,T=Oe(u,e),x=0,w=h.length;x<w;++x)(g=h[x])&&Rn(g,n,e,x,h,T);o.push(h),a.push(u)}return new Be(o,a,n,e)}var Qv=nn.prototype.constructor;function kp(){return new Qv(this._groups,this._parents)}function Yv(t,n){var e,i,r;return function(){var o=Dn(this,t),a=(this.style.removeProperty(t),Dn(this,t));return o===a?null:o===e&&a===i?r:r=n(e=o,i=a)}}function Op(t){return function(){this.style.removeProperty(t)}}function Kv(t,n,e){var i,r=e+"",o;return function(){var a=Dn(this,t);return a===r?null:a===i?o:o=n(i=a,e)}}function Xv(t,n,e){var i,r,o;return function(){var a=Dn(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Dn(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s))}}function Zv(t,n){var e,i,r,o="style."+n,a="end."+o,s;return function(){var l=Ae(this,t),c=l.on,u=l.value[o]==null?s||(s=Op(n)):void 0;(c!==e||r!==u)&&(i=(e=c).copy()).on(a,r=u),l.on=i}}function Ip(t,n,e){var i=(t+="")=="transform"?Gs:pa;return n==null?this.styleTween(t,Yv(t,i)).on("end.style."+t,Op(t)):typeof n=="function"?this.styleTween(t,Xv(t,i,Ri(this,"style."+t,n))).each(Zv(this._id,t)):this.styleTween(t,Kv(t,i,n),e).on("end.style."+t,null)}function Jv(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function e_(t,n,e){var i,r;function o(){var a=n.apply(this,arguments);return a!==r&&(i=(r=a)&&Jv(t,a,e)),i}return o._value=n,o}function Np(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,e_(t,n,e??""))}function t_(t){return function(){this.textContent=t}}function n_(t){return function(){var n=t(this);this.textContent=n??""}}function Pp(t){return this.tween("text",typeof t=="function"?n_(Ri(this,"text",t)):t_(t==null?"":t+""))}function i_(t){return function(n){this.textContent=t.call(this,n)}}function r_(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&i_(r)),n}return i._value=t,i}function Ap(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,r_(t))}function Lp(){for(var t=this._name,n=this._id,e=fa(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=Oe(l,n);Rn(l,t,e,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Be(i,this._parents,t,e)}function zp(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};e.each(function(){var c=Ae(this,i),u=c.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),c.on=n}),r===0&&o()})}var o_=0;function Be(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function Vp(t){return nn().transition(t)}function fa(){return++o_}var rn=nn.prototype;Be.prototype=Vp.prototype={constructor:Be,select:Rp,selectAll:Tp,selectChild:rn.selectChild,selectChildren:rn.selectChildren,filter:Sp,merge:Dp,selection:kp,transition:Lp,call:rn.call,nodes:rn.nodes,node:rn.node,size:rn.size,empty:rn.empty,each:rn.each,on:Ep,attr:_p,attrTween:yp,style:Ip,styleTween:Np,text:Pp,textTween:Ap,remove:Mp,tween:vp,delay:Cp,duration:wp,ease:bp,easeVarying:xp,end:zp,[Symbol.iterator]:rn[Symbol.iterator]};function ha(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var a_={time:null,delay:0,duration:250,ease:ha};function s_(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function Fp(t){var n,e;t instanceof Be?(n=t._id,t=t._name):(n=fa(),(e=a_).time=xr(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&Rn(l,t,n,c,a,e||s_(l,n));return new Be(i,this._parents,t,n)}nn.prototype.interrupt=gp;nn.prototype.transition=Fp;var{abs:OR,max:IR,min:NR}=Math;function Up(t){return[+t[0],+t[1]]}function l_(t){return[Up(t[0]),Up(t[1])]}var PR={name:"x",handles:["w","e"].map(Ys),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},AR={name:"y",handles:["n","s"].map(Ys),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},LR={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ys),input:function(t){return t==null?null:l_(t)},output:function(t){return t}};function Ys(t){return{type:t}}function Ks(t,n){var e,i=1;t==null&&(t=0),n==null&&(n=0);function r(){var o,a=e.length,s,l=0,c=0;for(o=0;o<a;++o)s=e[o],l+=s.x,c+=s.y;for(l=(l/a-t)*i,c=(c/a-n)*i,o=0;o<a;++o)s=e[o],s.x-=l,s.y-=c}return r.initialize=function(o){e=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(n=+o,r):n},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Bp(t){let n=+this._x.call(null,t),e=+this._y.call(null,t);return jp(this.cover(n,e),n,e,t)}function jp(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var r,o=t._root,a={data:i},s=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,g,T,x,w,y,O;if(!o)return t._root=a,t;for(;o.length;)if((x=n>=(f=(s+c)/2))?s=f:c=f,(w=e>=(h=(l+u)/2))?l=h:u=h,r=o,!(o=o[y=w<<1|x]))return r[y]=a,t;if(g=+t._x.call(null,o.data),T=+t._y.call(null,o.data),n===g&&e===T)return a.next=o,r?r[y]=a:t._root=a,t;do r=r?r[y]=new Array(4):t._root=new Array(4),(x=n>=(f=(s+c)/2))?s=f:c=f,(w=e>=(h=(l+u)/2))?l=h:u=h;while((y=w<<1|x)===(O=(T>=h)<<1|g>=f));return r[O]=o,r[y]=a,t}function $p(t){var n,e,i=t.length,r,o,a=new Array(i),s=new Array(i),l=1/0,c=1/0,u=-1/0,f=-1/0;for(e=0;e<i;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=r,s[e]=o,r<l&&(l=r),r>u&&(u=r),o<c&&(c=o),o>f&&(f=o));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),e=0;e<i;++e)jp(this,a[e],s[e],t[e]);return this}function Hp(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(i=Math.floor(n))+1;else{for(var a=r-e||1,s=this._root,l,c;e>t||t>=r||i>n||n>=o;)switch(c=(n<i)<<1|t<e,l=new Array(4),l[c]=s,s=l,a*=2,c){case 0:r=e+a,o=i+a;break;case 1:e=r-a,o=i+a;break;case 2:r=e+a,i=o-a;break;case 3:e=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=i,this._x1=r,this._y1=o,this}function Gp(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function qp(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ne(t,n,e,i,r){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=r}function Wp(t,n,e){var i,r=this._x0,o=this._y0,a,s,l,c,u=this._x1,f=this._y1,h=[],g=this._root,T,x;for(g&&h.push(new Ne(g,r,o,u,f)),e==null?e=1/0:(r=t-e,o=n-e,u=t+e,f=n+e,e*=e);T=h.pop();)if(!(!(g=T.node)||(a=T.x0)>u||(s=T.y0)>f||(l=T.x1)<r||(c=T.y1)<o))if(g.length){var w=(a+l)/2,y=(s+c)/2;h.push(new Ne(g[3],w,y,l,c),new Ne(g[2],a,y,w,c),new Ne(g[1],w,s,l,y),new Ne(g[0],a,s,w,y)),(x=(n>=y)<<1|t>=w)&&(T=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=T)}else{var O=t-+this._x.call(null,g.data),j=n-+this._y.call(null,g.data),b=O*O+j*j;if(b<e){var U=Math.sqrt(e=b);r=t-U,o=n-U,u=t+U,f=n+U,i=g.data}}return i}function Qp(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var n,e=this._root,i,r,o,a=this._x0,s=this._y0,l=this._x1,c=this._y1,u,f,h,g,T,x,w,y;if(!e)return this;if(e.length)for(;;){if((T=u>=(h=(a+l)/2))?a=h:l=h,(x=f>=(g=(s+c)/2))?s=g:c=g,n=e,!(e=e[w=x<<1|T]))return this;if(!e.length)break;(n[w+1&3]||n[w+2&3]||n[w+3&3])&&(i=n,y=w)}for(;e.data!==t;)if(r=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,r?(o?r.next=o:delete r.next,this):n?(o?n[w]=o:delete n[w],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(i?i[y]=e:this._root=e),this):(this._root=o,this)}function Yp(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Kp(){return this._root}function Xp(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Zp(t){var n=[],e,i=this._root,r,o,a,s,l;for(i&&n.push(new Ne(i,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(i=e.node,o=e.x0,a=e.y0,s=e.x1,l=e.y1)&&i.length){var c=(o+s)/2,u=(a+l)/2;(r=i[3])&&n.push(new Ne(r,c,u,s,l)),(r=i[2])&&n.push(new Ne(r,o,u,c,l)),(r=i[1])&&n.push(new Ne(r,c,a,s,u)),(r=i[0])&&n.push(new Ne(r,o,a,c,u))}return this}function Jp(t){var n=[],e=[],i;for(this._root&&n.push(new Ne(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,l=i.x1,c=i.y1,u=(a+l)/2,f=(s+c)/2;(o=r[0])&&n.push(new Ne(o,a,s,u,f)),(o=r[1])&&n.push(new Ne(o,u,s,l,f)),(o=r[2])&&n.push(new Ne(o,a,f,u,c)),(o=r[3])&&n.push(new Ne(o,u,f,l,c))}e.push(i)}for(;i=e.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function ef(t){return t[0]}function tf(t){return arguments.length?(this._x=t,this):this._x}function nf(t){return t[1]}function rf(t){return arguments.length?(this._y=t,this):this._y}function Yn(t,n,e){var i=new Xs(n??ef,e??nf,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Xs(t,n,e,i,r,o){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function of(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var je=Yn.prototype=Xs.prototype;je.copy=function(){var t=new Xs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,i;if(!n)return t;if(!n.length)return t._root=of(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?e.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=of(i));return t};je.add=Bp;je.addAll=$p;je.cover=Hp;je.data=Gp;je.extent=qp;je.find=Wp;je.remove=Qp;je.removeAll=Yp;je.root=Kp;je.size=Xp;je.visit=Zp;je.visitAfter=Jp;je.x=tf;je.y=rf;function $t(t){return function(){return t}}function Dt(t){return(t()-.5)*1e-6}function c_(t){return t.x+t.vx}function u_(t){return t.y+t.vy}function Zs(t){var n,e,i,r=1,o=1;typeof t!="function"&&(t=$t(t==null?1:+t));function a(){for(var c,u=n.length,f,h,g,T,x,w,y=0;y<o;++y)for(f=Yn(n,c_,u_).visitAfter(s),c=0;c<u;++c)h=n[c],x=e[h.index],w=x*x,g=h.x+h.vx,T=h.y+h.vy,f.visit(O);function O(j,b,U,Q,J){var ne=j.data,ve=j.r,ce=x+ve;if(ne){if(ne.index>h.index){var xe=g-ne.x-ne.vx,Xe=T-ne.y-ne.vy,$e=xe*xe+Xe*Xe;$e<ce*ce&&(xe===0&&(xe=Dt(i),$e+=xe*xe),Xe===0&&(Xe=Dt(i),$e+=Xe*Xe),$e=(ce-($e=Math.sqrt($e)))/$e*r,h.vx+=(xe*=$e)*(ce=(ve*=ve)/(w+ve)),h.vy+=(Xe*=$e)*ce,ne.vx-=xe*(ce=1-ce),ne.vy-=Xe*ce)}return}return b>g+ce||Q<g-ce||U>T+ce||J<T-ce}}function s(c){if(c.data)return c.r=e[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(n){var c,u=n.length,f;for(e=new Array(u),c=0;c<u;++c)f=n[c],e[f.index]=+t(f,c,n)}}return a.initialize=function(c,u){n=c,i=u,l()},a.iterations=function(c){return arguments.length?(o=+c,a):o},a.strength=function(c){return arguments.length?(r=+c,a):r},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:$t(+c),l(),a):t},a}function d_(t){return t.index}function af(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function Js(t){var n=d_,e=f,i,r=$t(30),o,a,s,l,c,u=1;t==null&&(t=[]);function f(w){return 1/Math.min(s[w.source.index],s[w.target.index])}function h(w){for(var y=0,O=t.length;y<u;++y)for(var j=0,b,U,Q,J,ne,ve,ce;j<O;++j)b=t[j],U=b.source,Q=b.target,J=Q.x+Q.vx-U.x-U.vx||Dt(c),ne=Q.y+Q.vy-U.y-U.vy||Dt(c),ve=Math.sqrt(J*J+ne*ne),ve=(ve-o[j])/ve*w*i[j],J*=ve,ne*=ve,Q.vx-=J*(ce=l[j]),Q.vy-=ne*ce,U.vx+=J*(ce=1-ce),U.vy+=ne*ce}function g(){if(a){var w,y=a.length,O=t.length,j=new Map(a.map((U,Q)=>[n(U,Q,a),U])),b;for(w=0,s=new Array(y);w<O;++w)b=t[w],b.index=w,typeof b.source!="object"&&(b.source=af(j,b.source)),typeof b.target!="object"&&(b.target=af(j,b.target)),s[b.source.index]=(s[b.source.index]||0)+1,s[b.target.index]=(s[b.target.index]||0)+1;for(w=0,l=new Array(O);w<O;++w)b=t[w],l[w]=s[b.source.index]/(s[b.source.index]+s[b.target.index]);i=new Array(O),T(),o=new Array(O),x()}}function T(){if(a)for(var w=0,y=t.length;w<y;++w)i[w]=+e(t[w],w,t)}function x(){if(a)for(var w=0,y=t.length;w<y;++w)o[w]=+r(t[w],w,t)}return h.initialize=function(w,y){a=w,c=y,g()},h.links=function(w){return arguments.length?(t=w,g(),h):t},h.id=function(w){return arguments.length?(n=w,h):n},h.iterations=function(w){return arguments.length?(u=+w,h):u},h.strength=function(w){return arguments.length?(e=typeof w=="function"?w:$t(+w),T(),h):e},h.distance=function(w){return arguments.length?(r=typeof w=="function"?w:$t(+w),x(),h):r},h}function sf(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function lf(t){return t.x}function cf(t){return t.y}var p_=10,f_=Math.PI*(3-Math.sqrt(5));function el(t){var n,e=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=Mi(f),c=en("tick","end"),u=sf();t==null&&(t=[]);function f(){h(),c.call("tick",n),e<i&&(l.stop(),c.call("end",n))}function h(x){var w,y=t.length,O;x===void 0&&(x=1);for(var j=0;j<x;++j)for(e+=(o-e)*r,s.forEach(function(b){b(e)}),w=0;w<y;++w)O=t[w],O.fx==null?O.x+=O.vx*=a:(O.x=O.fx,O.vx=0),O.fy==null?O.y+=O.vy*=a:(O.y=O.fy,O.vy=0);return n}function g(){for(var x=0,w=t.length,y;x<w;++x){if(y=t[x],y.index=x,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var O=p_*Math.sqrt(.5+x),j=x*f_;y.x=O*Math.cos(j),y.y=O*Math.sin(j)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function T(x){return x.initialize&&x.initialize(t,u),x}return g(),n={tick:h,restart:function(){return l.restart(f),n},stop:function(){return l.stop(),n},nodes:function(x){return arguments.length?(t=x,g(),s.forEach(T),n):t},alpha:function(x){return arguments.length?(e=+x,n):e},alphaMin:function(x){return arguments.length?(i=+x,n):i},alphaDecay:function(x){return arguments.length?(r=+x,n):+r},alphaTarget:function(x){return arguments.length?(o=+x,n):o},velocityDecay:function(x){return arguments.length?(a=1-x,n):1-a},randomSource:function(x){return arguments.length?(u=x,s.forEach(T),n):u},force:function(x,w){return arguments.length>1?(w==null?s.delete(x):s.set(x,T(w)),n):s.get(x)},find:function(x,w,y){var O=0,j=t.length,b,U,Q,J,ne;for(y==null?y=1/0:y*=y,O=0;O<j;++O)J=t[O],b=x-J.x,U=w-J.y,Q=b*b+U*U,Q<y&&(ne=J,y=Q);return ne},on:function(x,w){return arguments.length>1?(c.on(x,w),n):c.on(x)}}}function tl(){var t,n,e,i,r=$t(-30),o,a=1,s=1/0,l=.81;function c(g){var T,x=t.length,w=Yn(t,lf,cf).visitAfter(f);for(i=g,T=0;T<x;++T)n=t[T],w.visit(h)}function u(){if(t){var g,T=t.length,x;for(o=new Array(T),g=0;g<T;++g)x=t[g],o[x.index]=+r(x,g,t)}}function f(g){var T=0,x,w,y=0,O,j,b;if(g.length){for(O=j=b=0;b<4;++b)(x=g[b])&&(w=Math.abs(x.value))&&(T+=x.value,y+=w,O+=w*x.x,j+=w*x.y);g.x=O/y,g.y=j/y}else{x=g,x.x=x.data.x,x.y=x.data.y;do T+=o[x.data.index];while(x=x.next)}g.value=T}function h(g,T,x,w){if(!g.value)return!0;var y=g.x-n.x,O=g.y-n.y,j=w-T,b=y*y+O*O;if(j*j/l<b)return b<s&&(y===0&&(y=Dt(e),b+=y*y),O===0&&(O=Dt(e),b+=O*O),b<a&&(b=Math.sqrt(a*b)),n.vx+=y*g.value*i/b,n.vy+=O*g.value*i/b),!0;if(g.length||b>=s)return;(g.data!==n||g.next)&&(y===0&&(y=Dt(e),b+=y*y),O===0&&(O=Dt(e),b+=O*O),b<a&&(b=Math.sqrt(a*b)));do g.data!==n&&(j=o[g.data.index]*i/b,n.vx+=y*j,n.vy+=O*j);while(g=g.next)}return c.initialize=function(g,T){t=g,e=T,u()},c.strength=function(g){return arguments.length?(r=typeof g=="function"?g:$t(+g),u(),c):r},c.distanceMin=function(g){return arguments.length?(a=g*g,c):Math.sqrt(a)},c.distanceMax=function(g){return arguments.length?(s=g*g,c):Math.sqrt(s)},c.theta=function(g){return arguments.length?(l=g*g,c):Math.sqrt(l)},c}var Er=t=>()=>t;function nl(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Et(t,n,e){this.k=t,this.x=n,this.y=e}Et.prototype={constructor:Et,scale:function(t){return t===1?this:new Et(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Et(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Et(1,0,0);il.prototype=Et.prototype;function il(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Kn;return t.__zoom}function ma(t){t.stopImmediatePropagation()}function Ti(t){t.preventDefault(),t.stopImmediatePropagation()}function h_(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function m_(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function uf(){return this.__zoom||Kn}function g_(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function v_(){return navigator.maxTouchPoints||"ontouchstart"in this}function __(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function rl(){var t=h_,n=m_,e=__,i=g_,r=v_,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ws,c=en("start","zoom","end"),u,f,h,g=500,T=150,x=0,w=10;function y(C){C.property("__zoom",uf).on("wheel.zoom",ne,{passive:!1}).on("mousedown.zoom",ve).on("dblclick.zoom",ce).filter(r).on("touchstart.zoom",xe).on("touchmove.zoom",Xe).on("touchend.zoom touchcancel.zoom",$e).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(C,A,M,L){var X=C.selection?C.selection():C;X.property("__zoom",uf),C!==X?U(C,A,M,L):X.interrupt().each(function(){Q(this,arguments).event(L).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},y.scaleBy=function(C,A,M,L){y.scaleTo(C,function(){var X=this.__zoom.k,ee=typeof A=="function"?A.apply(this,arguments):A;return X*ee},M,L)},y.scaleTo=function(C,A,M,L){y.transform(C,function(){var X=n.apply(this,arguments),ee=this.__zoom,te=M==null?b(X):typeof M=="function"?M.apply(this,arguments):M,he=ee.invert(te),Se=typeof A=="function"?A.apply(this,arguments):A;return e(j(O(ee,Se),te,he),X,a)},M,L)},y.translateBy=function(C,A,M,L){y.transform(C,function(){return e(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof M=="function"?M.apply(this,arguments):M),n.apply(this,arguments),a)},null,L)},y.translateTo=function(C,A,M,L,X){y.transform(C,function(){var ee=n.apply(this,arguments),te=this.__zoom,he=L==null?b(ee):typeof L=="function"?L.apply(this,arguments):L;return e(Kn.translate(he[0],he[1]).scale(te.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof M=="function"?-M.apply(this,arguments):-M),ee,a)},L,X)};function O(C,A){return A=Math.max(o[0],Math.min(o[1],A)),A===C.k?C:new Et(A,C.x,C.y)}function j(C,A,M){var L=A[0]-M[0]*C.k,X=A[1]-M[1]*C.k;return L===C.x&&X===C.y?C:new Et(C.k,L,X)}function b(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function U(C,A,M,L){C.on("start.zoom",function(){Q(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){Q(this,arguments).event(L).end()}).tween("zoom",function(){var X=this,ee=arguments,te=Q(X,ee).event(L),he=n.apply(X,ee),Se=M==null?b(he):typeof M=="function"?M.apply(X,ee):M,Mt=Math.max(he[1][0]-he[0][0],he[1][1]-he[0][1]),Pe=X.__zoom,ht=typeof A=="function"?A.apply(X,ee):A,Ht=l(Pe.invert(Se).concat(Mt/Pe.k),ht.invert(Se).concat(Mt/ht.k));return function(mt){if(mt===1)mt=ht;else{var Gt=Ht(mt),Ea=Mt/Gt[2];mt=new Et(Ea,Se[0]-Gt[0]*Ea,Se[1]-Gt[1]*Ea)}te.zoom(null,mt)}})}function Q(C,A,M){return!M&&C.__zooming||new J(C,A)}function J(C,A){this.that=C,this.args=A,this.active=0,this.sourceEvent=null,this.extent=n.apply(C,A),this.taps=0}J.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,A){return this.mouse&&C!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var A=Ve(this.that).datum();c.call(C,this.that,new nl(C,{sourceEvent:this.sourceEvent,target:y,type:C,transform:this.that.__zoom,dispatch:c}),A)}};function ne(C,...A){if(!t.apply(this,arguments))return;var M=Q(this,A).event(C),L=this.__zoom,X=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,i.apply(this,arguments)))),ee=pt(C);if(M.wheel)(M.mouse[0][0]!==ee[0]||M.mouse[0][1]!==ee[1])&&(M.mouse[1]=L.invert(M.mouse[0]=ee)),clearTimeout(M.wheel);else{if(L.k===X)return;M.mouse=[ee,L.invert(ee)],Tn(this),M.start()}Ti(C),M.wheel=setTimeout(te,T),M.zoom("mouse",e(j(O(L,X),M.mouse[0],M.mouse[1]),M.extent,a));function te(){M.wheel=null,M.end()}}function ve(C,...A){if(h||!t.apply(this,arguments))return;var M=C.currentTarget,L=Q(this,A,!0).event(C),X=Ve(C.view).on("mousemove.zoom",Se,!0).on("mouseup.zoom",Mt,!0),ee=pt(C,M),te=C.clientX,he=C.clientY;dr(C.view),ma(C),L.mouse=[ee,this.__zoom.invert(ee)],Tn(this),L.start();function Se(Pe){if(Ti(Pe),!L.moved){var ht=Pe.clientX-te,Ht=Pe.clientY-he;L.moved=ht*ht+Ht*Ht>x}L.event(Pe).zoom("mouse",e(j(L.that.__zoom,L.mouse[0]=pt(Pe,M),L.mouse[1]),L.extent,a))}function Mt(Pe){X.on("mousemove.zoom mouseup.zoom",null),pr(Pe.view,L.moved),Ti(Pe),L.event(Pe).end()}}function ce(C,...A){if(t.apply(this,arguments)){var M=this.__zoom,L=pt(C.changedTouches?C.changedTouches[0]:C,this),X=M.invert(L),ee=M.k*(C.shiftKey?.5:2),te=e(j(O(M,ee),L,X),n.apply(this,A),a);Ti(C),s>0?Ve(this).transition().duration(s).call(U,te,L,C):Ve(this).call(y.transform,te,L,C)}}function xe(C,...A){if(t.apply(this,arguments)){var M=C.touches,L=M.length,X=Q(this,A,C.changedTouches.length===L).event(C),ee,te,he,Se;for(ma(C),te=0;te<L;++te)he=M[te],Se=pt(he,this),Se=[Se,this.__zoom.invert(Se),he.identifier],X.touch0?!X.touch1&&X.touch0[2]!==Se[2]&&(X.touch1=Se,X.taps=0):(X.touch0=Se,ee=!0,X.taps=1+!!u);u&&(u=clearTimeout(u)),ee&&(X.taps<2&&(f=Se[0],u=setTimeout(function(){u=null},g)),Tn(this),X.start())}}function Xe(C,...A){if(this.__zooming){var M=Q(this,A).event(C),L=C.changedTouches,X=L.length,ee,te,he,Se;for(Ti(C),ee=0;ee<X;++ee)te=L[ee],he=pt(te,this),M.touch0&&M.touch0[2]===te.identifier?M.touch0[0]=he:M.touch1&&M.touch1[2]===te.identifier&&(M.touch1[0]=he);if(te=M.that.__zoom,M.touch1){var Mt=M.touch0[0],Pe=M.touch0[1],ht=M.touch1[0],Ht=M.touch1[1],mt=(mt=ht[0]-Mt[0])*mt+(mt=ht[1]-Mt[1])*mt,Gt=(Gt=Ht[0]-Pe[0])*Gt+(Gt=Ht[1]-Pe[1])*Gt;te=O(te,Math.sqrt(mt/Gt)),he=[(Mt[0]+ht[0])/2,(Mt[1]+ht[1])/2],Se=[(Pe[0]+Ht[0])/2,(Pe[1]+Ht[1])/2]}else if(M.touch0)he=M.touch0[0],Se=M.touch0[1];else return;M.zoom("touch",e(j(te,he,Se),M.extent,a))}}function $e(C,...A){if(this.__zooming){var M=Q(this,A).event(C),L=C.changedTouches,X=L.length,ee,te;for(ma(C),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),ee=0;ee<X;++ee)te=L[ee],M.touch0&&M.touch0[2]===te.identifier?delete M.touch0:M.touch1&&M.touch1[2]===te.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(te=pt(te,this),Math.hypot(f[0]-te[0],f[1]-te[1])<w)){var he=Ve(this).on("dblclick.zoom");he&&he.apply(this,arguments)}}}return y.wheelDelta=function(C){return arguments.length?(i=typeof C=="function"?C:Er(+C),y):i},y.filter=function(C){return arguments.length?(t=typeof C=="function"?C:Er(!!C),y):t},y.touchable=function(C){return arguments.length?(r=typeof C=="function"?C:Er(!!C),y):r},y.extent=function(C){return arguments.length?(n=typeof C=="function"?C:Er([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),y):n},y.scaleExtent=function(C){return arguments.length?(o[0]=+C[0],o[1]=+C[1],y):[o[0],o[1]]},y.translateExtent=function(C){return arguments.length?(a[0][0]=+C[0][0],a[1][0]=+C[1][0],a[0][1]=+C[0][1],a[1][1]=+C[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(C){return arguments.length?(e=C,y):e},y.duration=function(C){return arguments.length?(s=+C,y):s},y.interpolate=function(C){return arguments.length?(l=C,y):l},y.on=function(){var C=c.on.apply(c,arguments);return C===c?y:C},y.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,y):Math.sqrt(x)},y.tapDistance=function(C){return arguments.length?(w=+C,y):w},y}var C_=["networkContainer"],w_=["svgElement"],Le={INITIAL_SPACING_RADIUS_RATIO:1/2,INITIAL_RANDOM_OFFSET:50,ALPHA_DECAY:.05,LINK_DISTANCE:120,LINK_STRENGTH:.2,CHARGE_STRENGTH:-100,CHARGE_DISTANCE_MIN:50,CHARGE_DISTANCE_MAX:500,CENTER_FORCE_STRENGTH:.05,COLLISION_RADIUS:50,COLLISION_STRENGTH:.8,DRAG_ALPHA_TARGET:.01,NODE_RADIUS_COORDINATOR:25,NODE_RADIUS_ROUTER:20,NODE_RADIUS_ENDDEVICE:15,NODE_RADIUS_DEFAULT:20},ga=class t{networkContainer=Xt("networkContainer");svgElement=Xt("svgElement");networkData=pe(null);selectedNode=P(null);connectedNodeIds=P(new Set);simulation;svgGroup;linkSelection;nodeSelection;labelSelection;zoomBehavior;containerWidth=800;containerHeight=600;draggedNode=null;d3Nodes=[];d3Links=[];fixedNodes=P(new Set);svgInitialized=!1;constructor(){_e(()=>{this.networkData()&&this.svgInitialized&&this.initializeGraph()})}ngOnInit(){}ngAfterViewInit(){let n=this.networkContainer();n&&(this.containerWidth=n.nativeElement.clientWidth||800,this.containerHeight=n.nativeElement.clientHeight||600,this.setupSVG(),this.svgInitialized=!0,this.networkData()&&this.initializeGraph())}setupSVG(){let n=this.svgElement();if(!n)return;let e=Ve(n.nativeElement);e.attr("width",this.containerWidth).attr("height",this.containerHeight),this.svgGroup=e.append("g"),this.zoomBehavior=rl().on("zoom",i=>{this.svgGroup.attr("transform",i.transform)}),e.call(this.zoomBehavior),e.on("dblclick.zoom",()=>{e.transition().duration(750).call(this.zoomBehavior.transform,Kn.translate(this.containerWidth/2,this.containerHeight/2))})}prepareData(){let n=this.networkData();if(!n||!n.nodes||!n.links)return null;let e=n.links.filter(i=>{let r=i.sourceIeeeAddr,o=i.targetIeeeAddr,a=n.nodes.find(l=>l.ieeeAddr===r),s=n.nodes.find(l=>l.ieeeAddr===o);return a!==void 0&&s!==void 0});return me(I({},n),{links:e})}initializeGraph(){let n=this.prepareData();if(n===null)return;let e=Math.min(this.containerWidth,this.containerHeight)*Le.INITIAL_SPACING_RADIUS_RATIO;this.d3Nodes=n.nodes.map((i,r)=>{let o=r/n.nodes.length*Math.PI*2,a=this.containerWidth/2+Math.cos(o)*e+(Math.random()-.5)*Le.INITIAL_RANDOM_OFFSET,s=this.containerHeight/2+Math.sin(o)*e+(Math.random()-.5)*Le.INITIAL_RANDOM_OFFSET;return{id:i.ieeeAddr,label:i.friendlyName,type:i.type,data:i,x:a,y:s}}),this.d3Links=n.links.map(i=>({source:i.sourceIeeeAddr,target:i.targetIeeeAddr,linkquality:i.linkquality,data:i,sourceId:i.sourceIeeeAddr,targetId:i.targetIeeeAddr})),this.simulation&&this.simulation.stop(),this.simulation=el(this.d3Nodes).alphaDecay(Le.ALPHA_DECAY).force("link",Js(this.d3Links).id(i=>i.id).distance(Le.LINK_DISTANCE).strength(Le.LINK_STRENGTH)).force("charge",tl().strength(Le.CHARGE_STRENGTH).distanceMin(Le.CHARGE_DISTANCE_MIN).distanceMax(Le.CHARGE_DISTANCE_MAX)).force("center",Ks(this.containerWidth/2,this.containerHeight/2).strength(Le.CENTER_FORCE_STRENGTH)).force("collision",Zs(Le.COLLISION_RADIUS).strength(Le.COLLISION_STRENGTH)),this.linkSelection=this.svgGroup.selectAll("line").data(this.d3Links,i=>`${i.source.id}-${i.target.id}`).join(i=>i.append("line").attr("stroke",r=>this.getLinkColor(r)).attr("stroke-width",2).attr("class","network-link"),i=>i.attr("stroke",r=>this.getLinkColor(r)),i=>i.remove()),this.svgGroup.selectAll("g.lqi-label-group").data(this.d3Links,i=>`${i.source.id}-${i.target.id}`).join(i=>{let r=i.append("g").attr("class","lqi-label-group");return r.append("rect").attr("class","lqi-label-bg").attr("width",24).attr("height",14).attr("x",-12).attr("y",-7).attr("rx",2).attr("fill","#1e1e2e").attr("stroke","#888").attr("stroke-width",1).attr("pointer-events","none"),r.each(function(o){let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("class","lqi-label-text"),a.setAttribute("text-anchor","middle"),a.setAttribute("dominant-baseline","central"),a.setAttribute("font-size","10px"),a.setAttribute("font-weight","700"),a.setAttribute("fill","#ffffff"),a.setAttribute("pointer-events","none");let s=o.data?.lqi??o.linkquality??0;a.textContent=s.toString(),this.appendChild(a)}),r},i=>(i.each(function(r){let o=Ve(this).select("text.lqi-label-text").node();if(o){let a=r.data?.lqi??r.linkquality??0;o.textContent=a.toString()}}),i),i=>i.remove()),this.nodeSelection=this.svgGroup.selectAll("circle").data(this.d3Nodes,i=>i.id).join(i=>i.append("circle").attr("class",r=>`network-node node-type-${r.type}`).attr("r",r=>this.getNodeRadius(r.type)).attr("fill",r=>this.getNodeFill(r.type)).attr("stroke",r=>this.getNodeStroke(r.type)).attr("stroke-width",r=>this.getNodeStrokeWidth(r.type)).attr("cursor","pointer").on("click",(r,o)=>this.onNodeClick(r,o)).on("dblclick",(r,o)=>this.onNodeDoubleClick(r,o)).call(r=>this.addDragBehavior(r)),i=>i,i=>i.remove()),this.labelSelection=this.svgGroup.selectAll("text.network-label").data(this.d3Nodes,i=>i.id).join(i=>i.append("text").attr("text-anchor","middle").attr("dy","0.3em").attr("class","network-label").attr("fill","#dfe0e3").attr("font-weight","500").attr("font-size","12px").attr("pointer-events","none").text(r=>r.label),i=>i,i=>i.remove()),this.simulation.on("tick",()=>{this.linkSelection.attr("x1",i=>i.source.x||0).attr("y1",i=>i.source.y||0).attr("x2",i=>i.target.x||0).attr("y2",i=>i.target.y||0),this.svgGroup.selectAll("g.lqi-label-group").attr("transform",i=>{let r=((i.source.x||0)+(i.target.x||0))/2,o=((i.source.y||0)+(i.target.y||0))/2;return`translate(${r},${o})`}),this.nodeSelection.attr("cx",i=>i.x||0).attr("cy",i=>i.y||0),this.labelSelection.attr("x",i=>i.x||0).attr("y",i=>i.y||0)})}addDragBehavior(n){let e=(o,a)=>{this.simulation.alphaTarget(Le.DRAG_ALPHA_TARGET).restart(),this.draggedNode=a,a.fx=a.x,a.fy=a.y},i=(o,a)=>{a.fx=o.x,a.fy=o.y},r=(o,a)=>{this.simulation.alphaTarget(0);let s=new Set(this.fixedNodes());s.add(a.id),this.fixedNodes.set(s),this.draggedNode=null};n.call(Ls().on("start",e).on("drag",i).on("end",r))}onNodeClick(n,e){n.stopPropagation(),this.selectedNode()?.id===e.id?(this.selectedNode.set(null),this.connectedNodeIds.set(new Set)):(this.selectedNode.set(e),this.connectedNodeIds.set(this.getConnectedNodes(e.id))),this.updateNodeVisibility()}onNodeDoubleClick(n,e){n.stopPropagation();let i=new Set(this.fixedNodes());i.has(e.id)?(i.delete(e.id),e.fx=null,e.fy=null):(i.add(e.id),e.fx=e.x,e.fy=e.y),this.fixedNodes.set(i)}getConnectedNodes(n){let e=this.networkData();if(!e||!e.links)return new Set;let i=new Set;return i.add(n),e.links.forEach(r=>{r.sourceIeeeAddr===n?i.add(r.targetIeeeAddr):r.targetIeeeAddr===n&&i.add(r.sourceIeeeAddr)}),i}updateNodeVisibility(){let n=this.selectedNode(),e=this.connectedNodeIds();if(!n){this.nodeSelection.attr("opacity",1).attr("fill",i=>this.getNodeFill(i.type)),this.labelSelection.attr("opacity",1),this.linkSelection.attr("opacity",.6).attr("stroke",i=>this.getLinkColor(i)).attr("stroke-width",2);return}this.nodeSelection.attr("opacity",i=>e.has(i.id)?1:.3).attr("fill",i=>e.has(i.id)?this.getNodeFill(i.type):"#737c87"),this.labelSelection.attr("opacity",i=>e.has(i.id)?1:.3),this.linkSelection.attr("opacity",i=>{let r=typeof i.source=="string"?i.source:i.source.id,o=typeof i.target=="string"?i.target:i.target.id;return e.has(r)&&e.has(o)?.6:.1}).attr("stroke",i=>{let r=typeof i.source=="string"?i.source:i.source.id,o=typeof i.target=="string"?i.target:i.target.id;return e.has(r)&&e.has(o)?this.getLinkColor(i):"#737c87"})}onContainerClick(){this.selectedNode.set(null),this.connectedNodeIds.set(new Set),this.updateNodeVisibility()}getNodeRadius(n){switch(n){case"Coordinator":return Le.NODE_RADIUS_COORDINATOR;case"Router":return Le.NODE_RADIUS_ROUTER;case"EndDevice":return Le.NODE_RADIUS_ENDDEVICE;default:return Le.NODE_RADIUS_DEFAULT}}getNodeFill(n){switch(n){case"Coordinator":return"#dc2626";case"Router":return"#0891b2";case"EndDevice":return"#84cc16";default:return"#4797ff"}}getNodeStroke(n){switch(n){case"Coordinator":case"Router":return"#fff";case"EndDevice":return"rgba(0, 0, 0, 0.3)";default:return"#4797ff"}}getNodeStrokeWidth(n){switch(n){case"Coordinator":return 3;default:return 2}}getLinkColor(n){let e=n.source,i=n.target,r=e.type,o=i.type;return r==="EndDevice"||o==="EndDevice"?"#84cc16":r==="Router"||o==="Router"?"#0891b2":"#dc2626"}ngOnDestroy(){this.simulation&&this.simulation.stop()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-network-graph"]],viewQuery:function(e,i){e&1&&(Kt(i.networkContainer,C_,5),Kt(i.svgElement,w_,5)),e&2&&un(2)},inputs:{networkData:[1,"networkData"]},decls:4,vars:0,consts:[["networkContainer",""],["svgElement",""],[1,"network-graph-container",3,"click"],[1,"network-svg"]],template:function(e,i){if(e&1){let r=Z();B(0,"div",2,0),Ee("click",function(){return z(r),V(i.onContainerClick())}),Pi(),It(2,"svg",3,1),$()}},styles:["[_nghost-%COMP%]{width:100%}.network-graph-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background-color:var(--app-background-color);border-radius:8px;overflow:hidden}.network-graph-container[_ngcontent-%COMP%]   .network-svg[_ngcontent-%COMP%]{width:100%;height:100%;cursor:grab}.network-graph-container[_ngcontent-%COMP%]   .network-svg[_ngcontent-%COMP%]:active{cursor:grabbing}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]{fill:var(--network-graph-node-default);stroke:var(--network-graph-node-default);stroke-width:1px;transition:all .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]:hover{r:26;stroke-width:3px;filter:drop-shadow(0 0 8px var(--network-graph-node-hover-shadow))}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Coordinator[_ngcontent-%COMP%]{fill:var(--network-graph-node-coordinator);r:25;stroke-width:3px;stroke:#fff}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Router[_ngcontent-%COMP%]{fill:var(--network-graph-node-router);r:20;stroke:#fff}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-EndDevice[_ngcontent-%COMP%]{fill:var(--network-graph-node-enddevice);r:15;stroke:#0000004d}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-faded[_ngcontent-%COMP%]{fill:var(--network-graph-node-faded);opacity:.3;cursor:not-allowed}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-faded[_ngcontent-%COMP%]:hover{r:20;filter:none}.network-graph-container[_ngcontent-%COMP%]   .network-link[_ngcontent-%COMP%]{stroke:var(--network-graph-link-default);stroke-width:1px;opacity:.6;transition:all .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-link[_ngcontent-%COMP%]:hover{stroke:var(--network-graph-node-default);stroke-width:3px;opacity:1;filter:drop-shadow(0 0 4px var(--network-graph-link-hover-shadow))}.network-graph-container[_ngcontent-%COMP%]   .network-link.link-faded[_ngcontent-%COMP%]{stroke:var(--network-graph-link-faded);opacity:.1;pointer-events:none}.network-graph-container[_ngcontent-%COMP%]   .network-link.link-faded[_ngcontent-%COMP%]:hover{stroke:var(--network-graph-link-faded);stroke-width:1px;opacity:.1;filter:none}.network-graph-container[_ngcontent-%COMP%]   .network-label[_ngcontent-%COMP%]{font-weight:500;font-size:12px;pointer-events:none;transition:opacity .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-label.label-faded[_ngcontent-%COMP%]{opacity:.3}.network-graph-container[_ngcontent-%COMP%]   .lqi-label-bg[_ngcontent-%COMP%]{fill:var(--app-background-color);stroke:var(--app-border-color);stroke-width:1;pointer-events:none}.network-graph-container[_ngcontent-%COMP%]   .lqi-label[_ngcontent-%COMP%]{pointer-events:none;text-anchor:middle;fill:var(--app-text-color);font-size:11px;font-weight:600}@media(max-width:768px){.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Coordinator[_ngcontent-%COMP%]{r:20}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Router[_ngcontent-%COMP%]{r:16}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-EndDevice[_ngcontent-%COMP%]{r:12}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]:hover{r:20}.network-graph-container[_ngcontent-%COMP%]   .network-label[_ngcontent-%COMP%]{font-size:10px}}"]})};function b_(t,n){if(t&1&&_(0),t&2){let e=n;pn(" Nodes: ",e.nodes.length," | Links: ",e.links.length," ")}}var va=class t{networkData=P(null);bridgeService=p(we);applicationService=p(ct);constructor(){_e(()=>{let e=this.bridgeService.bridgeInfo()?.networkMap;if(console.log("NMChange"),e){console.log(e);let i=e.value;console.log(i),this.networkData.set(i)}}),this.applicationService.mainTitle="NETWORK_VIEW"}scan(){console.log("Start network scan"),this.bridgeService.requestMap()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["NetworkMapPage"]],decls:8,vars:2,consts:[[1,"flex","flex-col","gap-4","p-4","h-full"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-blue-500","text-white","rounded",3,"click"],[1,"text-sm","text-gray-400"],[1,"flex-1","min-h-0","border","border-gray-600","rounded"],[1,"w-full","h-full",3,"networkData"]],template:function(e,i){if(e&1&&(m(0,"div",0)(1,"div",1)(2,"button",2),k("click",function(){return i.scan()}),_(3,"Scan Network"),v(),m(4,"div",3),G(5,b_,1,2),v()(),m(6,"div",4),W(7,"app-network-graph",5),v()()),e&2){let r;d(5),q((r=i.networkData())?5:-1,r),d(2),N("networkData",i.networkData())}},dependencies:[ga],encapsulation:2})};var x_=t=>({name:t}),Xn=class t{translate=p(lt);dialogRef=p(Lt);data=p(_n);cancel(){this.dialogRef.close()}ok(){this.dialogRef.close(me(I({},this.data),{delete:!0}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["DeleteObjectDialog"]],decls:19,vars:15,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"danger","min-w-20",3,"click"],[1,"primary","min-w-20",3,"click"]],template:function(e,i){e&1&&(B(0,"div",0)(1,"header")(2,"div",1),_(3),S(4,"translate"),$()(),B(5,"div",2)(6,"span"),_(7),S(8,"translate"),$()(),B(9,"footer")(10,"div",3),It(11,"div",4),B(12,"div",5)(13,"button",6),Ee("click",function(){return i.ok()}),_(14),S(15,"translate"),$(),B(16,"button",7),Ee("click",function(){return i.cancel()}),_(17),S(18,"translate"),$()()()()()),e&2&&(d(3),E(R(4,4,i.data.title)),d(4),E(it(8,6,i.data.message,nt(13,x_,i.data.objectName))),d(7),E(R(15,9,"DELETE")),d(3),E(R(18,11,"CANCEL")))},dependencies:[re,se],styles:["button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}"]})};var S_=t=>({name:t});function D_(t,n){if(t&1){let e=Z();B(0,"div",3)(1,"label",8),_(2),S(3,"translate"),$(),B(4,"div",9)(5,"input",10),Ee("change",function(r){let o=z(e).$implicit,a=D();return V(a.changeProperty(o.name,r))}),$()()()}if(t&2){let e=n.$implicit,i=D();d(),zi("htmlFor",Nt("input_",e.name)),d(),E(R(3,6,e.label)),d(3),zi("id",Nt("input_",e.name))("value",i.dialogData.data[e.name])}}var ki=class t{translate=p(lt);dialogRef=p(Lt);dialogData=p(_n);cancel(){this.dialogRef.close()}changeProperty(n,e){n&&e.target.value&&(this.dialogData.data[n]=e.target.value)}ok(){this.dialogRef.close(me(I({},this.dialogData),{created:!0}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["AddObjectDialog"]],decls:21,vars:15,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"container"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"],[3,"for"],[1,"input-container"],[1,"w-full","text-left","panel",3,"change","id","value"]],template:function(e,i){e&1&&(B(0,"div",0)(1,"header")(2,"div",1),_(3),S(4,"translate"),$()(),B(5,"div",2)(6,"span"),_(7),S(8,"translate"),$()(),Re(9,D_,6,8,"div",3,Qe),B(11,"footer")(12,"div",4),It(13,"div",5),B(14,"div",6)(15,"button",7),Ee("click",function(){return i.ok()}),_(16),S(17,"translate"),$(),B(18,"button",7),Ee("click",function(){return i.cancel()}),_(19),S(20,"translate"),$()()()()()),e&2&&(d(3),E(R(4,4,i.dialogData.title)),d(4),E(it(8,6,i.dialogData.message,nt(13,S_,i.dialogData.objectName))),d(2),Te(i.dialogData.control),d(7),E(R(17,9,"ADD")),d(3),E(R(20,11,"CANCEL")))},dependencies:[re,se],styles:["label[_ngcontent-%COMP%]{width:20%;height:32px;line-height:32px}.container[_ngcontent-%COMP%]{padding:2px 20px 10px!important;display:flex;flex-direction:row}button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}"]})};function E_(t,n){if(t&1){let e=Z();m(0,"div",4)(1,"ExpansionPanelComponent",9)(2,"div",5)(3,"span",10),_(4),S(5,"translate"),v(),m(6,"span",11)(7,"div",12)(8,"div",13)(9,"input",14),k("change",function(r){let o=z(e).$implicit,a=D(2);return V(a.updateSceneName(o.id,r))}),v()()()()(),m(10,"div",15)(11,"button",7),k("click",function(){let r=z(e).$implicit,o=D(2);return V(o.recallScene(r.id))}),_(12),S(13,"translate"),v()(),m(14,"div",16)(15,"div",17)(16,"button",7),k("click",function(){let r=z(e).$implicit,o=D(2);return V(o.updateScene(r.id,r.name))}),_(17),S(18,"translate"),v(),m(19,"span",18),_(20,"This will also save the state of all members of this scene"),v()()(),m(21,"div",15)(22,"button",8),k("click",function(){let r=z(e).$implicit,o=D(2);return V(o.deleteScene(r.id,r.name))}),_(23),S(24,"translate"),v()()()()}if(t&2){let e=n.$implicit;d(),N("label",Nr("",e.name," (",e.id,")"))("colorTrigger",!1),d(3),E(R(5,9,"SCENE_NAME")),d(5),N("value",e.name||""),d(3),E(R(13,11,"RECALL_SCENE")),d(5),E(R(18,13,"UPDATE_SCENE")),d(6),E(R(24,15,"DELETE_SCENE"))}}function M_(t,n){if(t&1){let e=Z();m(0,"div",1)(1,"div",2),_(2),S(3,"translate"),v()(),m(4,"div",3),Re(5,E_,25,17,"div",4,Qe),m(7,"div",5)(8,"div",6)(9,"button",7),k("click",function(){z(e);let r=D();return V(r.newScene())}),_(10),S(11,"translate"),v()()(),m(12,"div",5)(13,"div",6)(14,"button",8),k("click",function(){z(e);let r=D();return V(r.deleteAllScenes())}),_(15),S(16,"translate"),v()()()()}if(t&2){let e=D();d(2),E(R(3,5,"SCENES")),d(3),Te(e.group().scenes),d(5),E(R(11,7,"NEW_SCENE")),d(4),ae("disabled",e.group().scenes.length===0),d(),E(R(16,9,"DELETE_ALL_SCENES"))}}var _a=class t{groupStore=p(At);bridgeService=p(we);dialog=p(ut);group_id=pe.required();group=H(()=>{let n=Nn(this.groupStore,{criteria:[{property:"id",value:this.group_id(),operator:"equals"}],logicalOperator:"AND"},!1,void 0);return n().length>0?n()[0]:null});recallScene(n){this.group()&&this.bridgeService.recallScene(this.group().friendly_name,n)}updateSceneName(n,e){let i=e.target.value;if(this.group()&&i){let r=this.group().scenes.findIndex(o=>o.id===n);if(r>-1){let o=me(I({},this.group().scenes[r]),{name:i});console.log(o),this.group().scenes[r]=o}else console.log("ID NF",n)}}deleteScene(n,e){let i={title:"DELETE_SCENE",message:"WANT_DELETE_SCENE",objectName:e,delete:!1};this.dialog.open(Xn,{width:"600px",panelClass:"overlay",data:i}).closed.subscribe(o=>{o!==void 0&&o.delete===!0&&this.bridgeService.deleteScene(this.group().friendly_name,n)})}updateScene(n,e){let i={scene_store:{ID:n,name:e}};this.bridgeService.saveScene(this.group().friendly_name,i)}newScene(){let n=this.group()&&this.group()?.scenes?this.group()?.scenes.map(o=>o.id):[],i={data:{id:Br(n??[]),name:""},title:"ADD_SCENE",message:"ADD_SCENE_DATA",control:[{name:"id",label:"SCENE_ID"},{name:"name",label:"SCENE_NAME"}],created:!1};this.dialog.open(ki,{width:"600px",panelClass:"overlay",data:i}).closed.subscribe(o=>{if(o!==void 0&&o.created===!0){let a={scene_store:{ID:o.data.id,name:o.data.name}};this.bridgeService.saveScene(this.group().friendly_name,a)}})}deleteAllScenes(){let n={title:"DELETE_ALL_SCENES",message:"WANT_DELETE_ALL_SCENES",objectName:"",delete:!1};this.dialog.open(Xn,{width:"600px",panelClass:"overlay",data:n}).closed.subscribe(i=>{i!==void 0&&i.delete===!0&&this.bridgeService.deleteAllScenes(this.group().friendly_name)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["GroupSceneComponent"]],inputs:{group_id:[1,"group_id"]},decls:2,vars:1,consts:[[1,"containerwrapper"],[1,"container","header"],[1,"font-bold","text-center","mt-5"],[1,"container"],[1,"group_row","flex","mt-5"],[1,"sidbar_row"],[1,"button","w-full"],[1,"button-link","left",3,"click"],[1,"button-link-danger","left",3,"click"],["titleClass","center","contentClass","content_filled",1,"panel","w-full",2,"flex-grow","inherit",3,"label","colorTrigger"],[1,"label"],[1,"value"],[1,"input-container"],[1,"input-content"],[1,"w-full","text-right","panel",3,"change","value"],[1,"button"],[1,"button","hint"],[1,"flex","flex-col"],[1,"hint","ml-1"]],template:function(e,i){e&1&&(m(0,"div",0),G(1,M_,17,11),v()),e&2&&(d(),q(i.group()!==null?1:-1))},dependencies:[re,zr,se],styles:["[_nghost-%COMP%]{flex:1;display:flex}"]})};var df=["*","*"];function R_(t,n){t&1&&(m(0,"span",4),_(1,"arrow_drop_down"),v())}function T_(t,n){t&1&&(m(0,"span",4),_(1,"arrow_drop_up"),v())}function k_(t,n){t&1&&(m(0,"div",1)(1,"div"),W(2,"SearchInput"),v(),m(3,"div"),Ct(4),v()())}function O_(t,n){t&1&&Ct(0,1)}var ya=class t extends zr{device=pe.required();static \u0275fac=(()=>{let n;return function(i){return(n||(n=ei(t)))(i||t)}})();static \u0275cmp=F({type:t,selectors:[["ExpansionPanelDeviceComponent"]],inputs:{device:[1,"device"]},features:[ln],ngContentSelectors:df,decls:13,vars:16,consts:[["type","button","tabindex","0",1,"trigger",3,"click"],[1,"root_control"],[1,"w-full","flex","flex-row","items-center"],[1,"max-w-7","ml-3",3,"device"],[1,"material-symbols-outlined"],[1,"content","flex","flex-col",2,"flex-grow","inherit"],[1,"options","flex","flex-col",2,"flex-grow","inherit"]],template:function(e,i){e&1&&(cn(df),m(0,"div")(1,"button",0),k("click",function(){return i.toggle()}),m(2,"div",1)(3,"div",2),W(4,"DeviceImage",3),m(5,"div"),_(6),v()()(),G(7,R_,2,0,"span",4)(8,T_,2,0,"span",4),v(),m(9,"div",5)(10,"div",6),G(11,k_,5,0,"div",1)(12,O_,1,0),v()()()),e&2&&(Vi(Nt("root_control flex flex-col ",i.contentClass())),ae("panel-open",i.isOpen()===!0),d(),ae("trigger-colored",i.colorTrigger()===!0),d(3),N("device",i.device()),d(),Vi(Nt("title ",i.titleClass()," ml-3")),d(),E(i.label()?i.label():i.device().friendly_name),d(),q(i.isOpen()===!1?7:8),d(2),ae("content-open",i.isOpen()),d(2),q(i.hasSearch()===!0?11:12))},dependencies:[oi,Pn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{display:grid;grid-template-rows:0fr;overflow:hidden;transition:grid-template-rows .3s ease-out;opacity:0;pointer-events:none}.content-open[_ngcontent-%COMP%]{grid-template-rows:1fr;opacity:1;pointer-events:auto;overflow:visible;transition:grid-template-rows .3s ease-out,opacity .3s ease-out}.content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-height:0}.content[_ngcontent-%COMP%] > .options[_ngcontent-%COMP%]{padding:2px 7px;min-width:0;overflow:hidden}.content[_ngcontent-%COMP%] > .options[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%]{border:none}.trigger[_ngcontent-%COMP%]{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font:inherit;gap:4px;justify-content:space-between;margin:0;padding:7px;width:100%}.trigger.trigger-colored[_ngcontent-%COMP%]:focus-within{outline:1px solid;outline-color:var(--expansion-panel-trigger-focus-color)}.trigger[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%]{display:flex;gap:4px;width:100%;border:none}.trigger[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;color:var(--app-text-color);font-size:12px;line-height:16px;margin-top:2px;font-size:16px;font-weight:400}.root_control[_ngcontent-%COMP%]{display:flex}.panel-open[_ngcontent-%COMP%]{flex-grow:inherit}.content_filled[_ngcontent-%COMP%]{background-color:var(--app-panel-color)}",".trigger[_ngcontent-%COMP%]{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font:inherit;gap:4px;justify-content:space-between;margin:0;padding:4px 7px 2px 3px;width:100%}"]})};var pf=()=>({maxShown:10,showSelection:!1,multi:!1}),I_=t=>({id:t}),N_=t=>[t];function P_(t,n){if(t&1){let e=Z();m(0,"div",9)(1,"ExpansionPanelDeviceComponent",15),S(2,"translate"),m(3,"div",16),W(4,"DeviceFeaturesComponent",17),m(5,"div",18)(6,"button",14),k("click",function(){let r=z(e).$implicit,o=D(2);return V(o.removeDeviceFromGroup(r.device,r.endpoint))}),_(7),S(8,"translate"),v()()()()()}if(t&2){let e=n.$implicit;d(),N("label",Nr("",e==null||e.device==null?null:e.device.friendly_name," (",it(2,8,"ENDPOINT_",nt(13,I_,e.endpoint)),")"))("device",e==null?null:e.device)("colorTrigger",!1),d(3),N("ieee_address",e==null||e.device==null?null:e.device.ieee_address)("filterEndpoints",nt(15,N_,e.endpoint)),d(3),E(R(8,11,"REMOVE_DEVICE"))}}function A_(t,n){if(t&1){let e=Z();m(0,"div",4)(1,"div",11)(2,"OptionPanelComponent",12),k("optionsChanged",function(r){z(e);let o=D(2);return V(o.selectNewEndPoint(r))}),v()()()}if(t&2){let e=D(2);d(2),N("title",Ie(e.endPointSelectorTitle()))("entities",e.selectedDeviceEndPoints())("options",In(4,pf))}}function L_(t,n){if(t&1){let e=Z();m(0,"div",4)(1,"div",19)(2,"button",20),k("click",function(){z(e);let r=D(2);return V(r.addDevice())}),_(3),S(4,"translate"),v()()()}t&2&&(d(3),E(R(4,1,"ADD")))}function z_(t,n){if(t&1){let e=Z();m(0,"div",1)(1,"div",2),_(2),S(3,"translate"),v()(),m(4,"div",3)(5,"div",4)(6,"span",5),_(7),S(8,"translate"),v(),m(9,"span",6),_(10),m(11,"span",7),k("click",function(){z(e);let r=D();return V(r.renameGroup())}),_(12,"edit_square"),v()()(),m(13,"div",1)(14,"div",8),_(15),S(16,"translate"),v()(),Re(17,P_,9,17,"div",9,Qe),m(19,"div",10)(20,"div",1)(21,"div",8),_(22),S(23,"translate"),v()(),m(24,"div",4)(25,"div",11)(26,"OptionPanelComponent",12),k("optionsChanged",function(r){z(e);let o=D();return V(o.selectNewDevice(r))}),v()()(),G(27,A_,3,5,"div",4),G(28,L_,5,3,"div",4),v(),m(29,"div",4)(30,"div",13)(31,"button",14),k("click",function(){z(e);let r=D();return V(r.deleteGroup())}),_(32),S(33,"translate"),v()()()()}if(t&2){let e,i,r=D();d(2),E(R(3,12,"SETTINGS")),d(5),E(R(8,14,"FRIENDLY_NAME")),d(3),E((e=r.group())==null?null:e.friendly_name),d(5),E(R(16,16,"DEVICES")),d(2),Te(r.members()),d(5),E(R(23,18,"ADD_DEVICE")),d(4),N("title",Ie(r.deviceSelectorTitle()))("entities",r.deviceNameList())("options",In(22,pf)),d(),q(r.selectedDevice()!==null&&((i=r.selectedDevice())!=null&&i.endpoints)?27:-1),d(),q(r.selectedDevice()!==null&&r.selectedEndpointId()!==null?28:-1),d(4),E(R(33,20,"DELETE_GROUP"))}}var Ca=class t{groupStore=p(At);deviceStore=p(mn);deviceService=p(si);translate=p(lt);bridgeService=p(we);dialog=p(ut);tabManager=p(Ye);group_id=pe.required();group=H(()=>{let n=Nn(this.groupStore,{criteria:[{property:"id",value:this.group_id(),operator:"equals"}],logicalOperator:"AND"},!1,void 0);return n().length>0?n()[0]:null});members=H(()=>{let n=this.group()?.members,e=this.deviceStore.entities();return n?.map(i=>({device:e.find(r=>r.ieee_address===i.ieee_address),endpoint:i.endpoint}))});selectedDevice=P(null);selectedEndpointId=P(null);deviceSelectorTitle=H(()=>{let n=this.selectedDevice();return n!==null?n.friendly_name:this.translate.instant("SELECT_DEVICE")});selectedDeviceEndPoints=H(()=>{let n=this.selectedDevice();return n!==null?Object.keys(n.endpoints).map(e=>({label:e,value:e,isSelected:!1})):[]});endPointSelectorTitle=H(()=>{let n=this.selectedEndpointId();return n!==null?this.translate.instant("ENDPOINT_",{id:n}):this.translate.instant("ENDPOINT")});availabelDevices=Nn(this.deviceStore,{criteria:[{property:"type",value:"Coordinator",operator:"not"}],logicalOperator:"AND"},!1,void 0);deviceNameList=H(()=>this.availabelDevices().map(e=>({isSelected:!1,label:e.friendly_name,value:e.ieee_address})).sort((e,i)=>e.label>i.label?1:e.label<i.label?-1:0));renameGroup(){console.log(this.group())}deleteGroup(){if(this.group()){let n={title:"DELETE_GROUP",message:"WANT_DELETE_GROUP",objectName:this.group()?.friendly_name,delete:!1};this.dialog.open(Xn,{width:"600px",panelClass:"overlay",data:n}).closed.subscribe(i=>{if(i!==void 0&&i.delete===!0){let r=this.group().id;this.bridgeService.deleteGroup(this.group().friendly_name),this.tabManager.closeTab(String(r))}})}}removeDeviceFromGroup(n,e){if(this.group()){let i={device:n.friendly_name,group:this.group().friendly_name,endpoint:e};this.deviceService.removeDeviceFromGroup(i)}}addDevice(){let n=this.selectedDevice(),e=this.selectedEndpointId(),i=this.group();if(n&&e&&i){let r={device:n.friendly_name,group:i.friendly_name,endpoint:e};this.deviceService.addDeviceToGroup(r),this.selectedDevice.set(null),this.selectedEndpointId.set(null)}}selectNewDevice(n){let e=this.availabelDevices().find(i=>i.ieee_address===n.value);if(e){this.selectedDevice.set(e);let i=e.endpoints;if(i){if(Object.keys(i).length===1){let r=Object.keys(i)[0];this.selectedEndpointId.set(r)}}else this.selectedEndpointId.set(null)}}selectNewEndPoint(n){if(this.selectedDevice()){let i=n.value;this.selectedEndpointId.set(i)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["GroupInfoComponent"]],inputs:{group_id:[1,"group_id"]},decls:2,vars:1,consts:[[1,"containerwrapper"],[1,"container","header"],[1,"font-bold","text-center","w-full","mt-5"],[1,"container"],[1,"sidbar_row"],[1,"label"],[1,"value","flex","flex-row"],[1,"material-symbols-outlined","edit_icon","mr-2","ml-2","cursor-pointer",3,"click"],[1,"font-bold","text-left","w-full","mt-5"],[1,"sidbar_row","flex"],[1,"row","flex-col"],[1,"mt-2","w-full"],[1,"panel","w-full",2,"flex-grow","inherit",3,"optionsChanged","title","entities","options"],[1,"mt-5","button"],[1,"button-link-danger","left",3,"click"],["titleClass","center","contentClass","content_filled",1,"panel","w-full",2,"flex-grow","inherit",3,"device","label","colorTrigger"],[1,"wrapper"],["displayMode","scene",3,"ieee_address","filterEndpoints"],[1,"button","ml-2"],[1,"button"],[1,"button-link","left",3,"click"]],template:function(e,i){e&1&&(m(0,"div",0),G(1,z_,34,23),v()),e&2&&(d(),q(i.group()!==null?1:-1))},dependencies:[re,ya,jr,vn,se],styles:["[_nghost-%COMP%]{flex:1;display:flex}.group_row[_ngcontent-%COMP%]{display:flex;min-height:20px;-webkit-box-pack:justify;justify-content:space-between;width:100%;padding:.5em;margin-top:.5em;gap:8px;color:var(--app-text-color)}.header[_ngcontent-%COMP%]{display:flex;align-items:center}.edit_icon[_ngcontent-%COMP%]{max-width:13px;color:var(--app-link-color)}"]})};function V_(t,n){if(t&1&&W(0,"GroupInfoComponent",10),t&2){let e=D(2);N("group_id",e.group().id)}}function F_(t,n){if(t&1&&W(0,"GroupSceneComponent",10),t&2){let e=D(2);N("group_id",e.group().id)}}function U_(t,n){if(t&1){let e=Z();m(0,"header",0)(1,"h1",1),_(2),v(),m(3,"div",2)(4,"button",3),k("click",function(){z(e);let r=D();return V(r.closeSidebar())}),m(5,"span",4),_(6,"close"),v(),W(7,"div",5),v()()(),m(8,"nav",6)(9,"button",7),k("click",function(){z(e);let r=D();return V(r.panel.set(1))}),m(10,"span",4),_(11,"dashboard"),v()(),m(12,"button",8),k("click",function(){z(e);let r=D();return V(r.panel.set(2))}),m(13,"span",4),_(14,"wallpaper_slideshow"),v()()(),m(15,"div",9),G(16,V_,1,1,"GroupInfoComponent",10),G(17,F_,1,1,"GroupSceneComponent",10),v()}if(t&2){let e,i=D();d(2),E((e=i.group())==null?null:e.friendly_name),d(7),ae("navbutton-selected",i.panel()===1),d(3),ae("navbutton-selected",i.panel()===2),d(4),q(i.panel()===1?16:-1),d(),q(i.panel()===2?17:-1)}}var wa=class t{groupStore=p(At);tabManager=p(Ye);groupid=pe.required();panel=P(1);group=H(()=>this.groupid()?this.groupStore.entities().find(n=>String(n.id)===this.groupid()):null);closeSidebar(){this.tabManager.closeTab(this.groupid())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["GroupInspectorComponent"]],inputs:{groupid:[1,"groupid"]},decls:1,vars:1,consts:[[1,"h-14","flex","items-center","justify-between","px-4"],[1,"text-lg","font-semibold","w-full","text-center"],[1,"wrap"],["type","button",1,"headerButton",3,"click"],[1,"material-symbols-outlined"],[1,"stateIcon"],[1,"inspector"],["title","Settings",1,"navbutton",3,"click"],["title","Scenes",1,"navbutton",3,"click"],[1,"flex-1","flex","flex-col"],[3,"group_id"]],template:function(e,i){e&1&&G(0,U_,18,7),e&2&&q(i.group()!==null?0:-1)},dependencies:[Ca,_a],styles:['[_nghost-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;flex-basis:0%;flex-grow:1;flex-shrink:1;font-family:Inter,UI Sans,Lato,Arial,sans-serif;font-feature-settings:"kern";font-synthesis-small-caps:none;font-synthesis-style:none;font-synthesis-weight:none;font-variant-ligatures:no-common-ligatures;background-color:var(--app-background-color);line-height:18.4px;padding-bottom:0;padding-right:2px;padding-top:0;position:relative;-webkit-font-smoothing:antialiased;border-color:var(--app-section-border-color)}']})};var ba=class t{group=pe();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["GroupImage"]],inputs:{group:[1,"group"]},decls:2,vars:0,consts:[[1,"material-symbols-outlined","pt-2"]],template:function(e,i){e&1&&(B(0,"span",0),_(1,"group_work"),$())},encapsulation:2})};function B_(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.id," ")}}function j_(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.friendly_name," ")}}function $_(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.members?e.members.length:0," ")}}function H_(t,n){if(t&1&&_(0),t&2){let e=n.$implicit;ie(" ",e.scenes?e.scenes.length:0," ")}}var xa=class t{injector=p(kt);groupStore=p(At);applicationService=p(ct);tabManager=p(Ye);dialog=p(ut);bridgeService=p(we);tableSettings=Xt(Bt);displayedColumns=P(["id","friendly_name","members","scenes"]);tableConfig=H(()=>{let n=[{id:"id",label:"ID",hideLabel:!0,minWidth:50,maxWidth:50,sortable:!0},{id:"friendly_name",label:"NAME",minWidth:250,maxWidth:450,sortable:!0},{id:"members",label:"MEMBERS",minWidth:50,maxWidth:200,sortable:!1},{id:"scenes",label:"SCENES",minWidth:50,maxWidth:200,sortable:!1}],e=this.displayedColumns();n.forEach(o=>{o.hidden=!e.includes(o.id)});let i=this.selectedGroup(),r=this.sortDirection();return{columns:n,trackByFn:(o,a)=>a.id||o,selectedItem:i||void 0,onRowClick:o=>this.selectGroup(o.id),initialSort:{column:this.sortColumn(),direction:r==="asc"||r==="desc"?r:"asc"},settingsControl:this.tableSettings()}});sortColumn=P("id");sortDirection=P("asc");selectedGroup=H(()=>this.groupStore.selectedEntity());datasourceSignal=P(null);groups=H(()=>{let n=this.groupStore.entities();return Ur(n,this.sortColumn(),this.sortDirection(),(e,i)=>this.getGroupValue(e,i))});get datasource(){return this.datasourceSignal()||new Sn(this.groups,this.injector)}constructor(){this.applicationService.mainTitle="GROUP_VIEW"}trackByFn(n,e){return e.friendly_name||String(e.id)}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction)}selectGroup(n){let e=this.groupStore.entities().find(i=>i.id===n);e&&this.tabManager.openTab({id:String(n),label:e.friendly_name,data:{groupid:String(n)},component:wa,iconComponent:ba,iconData:{group:e}})}getGroupValue(n,e){switch(e){case"friendly_name":return n.friendly_name?.toLowerCase()||"";case"id":return n.id||0}}createGroup(){let n=this.groupStore&&this.groupStore?.entities()?this.groupStore?.entities().map(o=>o.id):[];console.log(n);let i={data:{id:Br(n??[],1),name:""},title:"ADD_GROUP",message:"ADD_GROUP_DATA",control:[{name:"id",label:"GROUP_ID"},{name:"name",label:"GROUP_NAME"}],created:!1};this.dialog.open(ki,{width:"600px",panelClass:"overlay",data:i}).closed.subscribe(o=>{o!==void 0&&o.created===!0&&this.bridgeService.addGroup(o.data.id,o.data.name)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["GroupListComponent"]],viewQuery:function(e,i){e&1&&Kt(i.tableSettings,Bt,5),e&2&&un()},decls:14,vars:5,consts:[[1,"flex","w-full","overflow-x-hidden","flex-grow","h-full"],[1,"mt-2"],[1,"w-full","ml-2","overflow-y-auto","scrollbar"],[3,"sortChange","rowClick","dataSource","config"],["appTableCell","id"],["appTableCell","friendly_name"],["appTableCell","members"],["appTableCell","scenes"],[1,"button"],[1,"button-link","left",3,"click"]],template:function(e,i){e&1&&(m(0,"div",0)(1,"SettingsBarComponent")(2,"div",1),W(3,"TableSettingsControl"),v()(),m(4,"div",2)(5,"TableComponent",3),k("sortChange",function(o){return i.onSort(o)})("rowClick",function(o){return i.selectGroup(o.id)}),yt(6,B_,1,1,"ng-template",4)(7,j_,1,1,"ng-template",5)(8,$_,1,1,"ng-template",6)(9,H_,1,1,"ng-template",7),v(),m(10,"div",8)(11,"button",9),k("click",function(){return i.createGroup()}),_(12),S(13,"translate"),v()()()()),e&2&&(d(5),N("dataSource",i.datasource)("config",i.tableConfig()),d(7),E(R(13,3,"CREATE_NEW_GROUP")))},dependencies:[bi,xn,Bt,re,xi,se],styles:["[_nghost-%COMP%]{display:flex}"]})};var ff=[{path:"",component:Io,children:[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:Po},{path:"devices",component:jo},{path:"network",component:va},{path:"groups",component:xa}]}];var Sa=class{constructor(n,e=[{prefix:"./assets/i18n/",suffix:".json"},{prefix:"./assets/i18n/zigbee/",suffix:".json"}]){this.http=n;this.resources=e}getTranslation(n){let e=this.resources.map(i=>this.http.get(`${i.prefix}${n}${i.suffix}`));return pl(e).pipe(Me(i=>Object.assign({},...i)))}};var hf={providers:[wl(),Bl({eventCoalescing:!0}),Ss(ff,Es()),nc(),rc({loader:{provide:ic,useFactory:t=>new Sa(t),deps:[Lr]}}),vl(oc.forRoot({level:jl()?Ua.DEBUG:Ua.ERROR}))]};var Da=class t{title=P("sigbee2mqtt-dashboard");bs=p(we);ds=p(si);as=p(ct);translate=p(lt);darkClass="dark-theme";storageKey="theme";constructor(){this.translate.setFallbackLang("en");let n=this.translate.getBrowserLang();this.translate.use(n?.match(/en|de/)?n:"en"),window.matchMedia("(prefers-color-scheme: dark)").matches&&this.enableDarkMode()}enableDarkMode(){document.body.classList.add(this.darkClass),localStorage.setItem(this.storageKey,"dark")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-root"]],features:[Fi([])],decls:1,vars:0,template:function(e,i){e&1&&W(0,"router-outlet")},dependencies:[jn,re],encapsulation:2})};Ka(Da,hf).catch(t=>console.error(t));

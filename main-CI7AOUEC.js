import{$ as vt,$a as _,$b as qr,$c as Ic,A as Fi,Aa as yt,Ab as Gi,Ac as lr,B as on,Ba as Hl,Bb as Ie,Bc as Yi,C as Ha,Ca as Ja,Cb as Nt,Cc as gn,D as Il,Da as We,Db as Hi,Dc as wc,E as st,Ea as ql,Eb as Gr,Ec as Cc,F as an,Fa as sn,Fb as Ln,Fc as rs,G as qe,Ga as Wl,Gb as nt,Gc as Ki,H as he,Ha as $i,Hb as R,Hc as cr,I as qa,Ia as V,Ib as O,Ic as is,J as ee,Ja as Pn,Jb as rt,Jc as bc,K as In,Ka as _e,Kb as ec,Kc as xc,L as Nl,La as Xl,Lb as q,Lc as Sc,M as ue,Ma as ln,Mb as qi,Mc as Ji,N as te,Na as wt,Nb as Pt,Nc as vn,O as d,Oa as Ql,Ob as me,Oc as _n,P as jr,Pa as Yl,Pb as Yt,Pc as Lt,Q as Pl,Qa as Za,Qb as pn,Qc as Dc,R as Ot,Ra as es,Rb as tc,Rc as Tc,S as Fe,Sa as Kl,Sb as fn,Sc as Qe,T as j,Ta as Jl,Tb as ar,Tc as zn,U,Ua as G,Ub as nc,Uc as Ec,V as Ur,Va as H,Vb as bt,Vc as ur,W as Wa,Wa as Xe,Wb as rc,Wc as Rc,X as kt,Xa as Ee,Xb as Hr,Xc as Mc,Y as Ue,Ya as Re,Yb as ic,Yc as Fn,Z as Xa,Za as N,Zb as oc,Zc as Oc,_ as Al,_a as g,_b as ac,_c as kc,a as I,aa as ir,ab as X,ac as sc,ad as Zi,b as ve,ba as Qa,bb as ne,bc as sr,bd as eo,c as fe,ca as ji,cb as oe,cc as lc,cd as Nc,d as Dl,da as Ll,db as cn,dc as cc,dd as to,e as Tl,ea as P,eb as ts,ec as uc,f as Ai,fa as zl,fb as ns,fc as dc,g as qt,ga as Ce,gb as lt,gc as Wi,h as ze,ha as It,hb as K,hc as Wr,i as Wt,ia as Xt,ib as Br,ic as Xi,j as He,ja as or,jb as k,jc as Qi,k as W,ka as Fl,kb as ke,kc as pc,l as El,la as _t,lb as S,lc as fc,m as zr,ma as jl,mb as un,mc as hc,n as Rl,na as Ya,nb as Ct,nc as ct,o as Ml,oa as Ul,ob as Ze,oc as pe,p as we,pa as Ui,pb as et,pc as mc,q as Ga,qa as Ka,qb as tt,qc as se,r as Mt,ra as Vl,rb as Qt,rc as hn,s as Fr,sa as Vi,sb as dn,sc as gc,t as Ol,ta as Bl,tb as An,tc as At,u as Li,ua as f,ub as ae,uc as mn,v as kl,va as Vr,vb as Zl,vc,w as gt,wa as $l,wb as $r,wc as _c,x as zi,xa as Bi,xb as b,xc as ut,y as kn,ya as Gl,yb as M,yc,z as rr,za as Nn,zb as de,zc as Te}from"./chunk-FVBR4WO4.js";var Xr=class{_doc;constructor(n){this._doc=n}manager},no=(()=>{class t extends Xr{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(te(Ue))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),oo=new ue(""),ls=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(a=>{a.manager=this});let i=e.filter(a=>!(a instanceof no));this._plugins=i.slice().reverse();let o=e.find(a=>a instanceof no);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(te(oo),te(ir))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),os="ng-app-id";function Pc(t){for(let n of t)n.remove()}function Ac(t,n){let e=n.createElement("style");return e.textContent=t,e}function zf(t,n,e,r){let i=t.head?.querySelectorAll(`style[${os}="${n}"],link[${os}="${n}"]`);if(i)for(let o of i)o.removeAttribute(os),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function ss(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var cs=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,zf(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,Ac);r?.forEach(i=>this.addUsage(i,this.external,ss))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(Pc(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Pc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,Ac(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,ss(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(te(Ue),te(Ya),te(Ka,8),te(Ui))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),as={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},us=/%COMP%/g;var zc="%COMP%",Ff=`_nghost-${zc}`,jf=`_ngcontent-${zc}`,Uf=!0,Vf=new ue("",{factory:()=>Uf});function Bf(t){return jf.replace(us,t)}function $f(t){return Ff.replace(us,t)}function Fc(t,n){return n.map(e=>e.replace(us,t))}var ds=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,a,s,l=null,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=s,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Qr(e,a,s,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof io?i.applyToHost(e):i instanceof Yr&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,p=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Vi.Emulated:o=new io(l,c,r,this.appId,u,a,s,p,h);break;case Vi.ShadowDom:return new ro(l,e,r,a,s,this.nonce,p,h,c);case Vi.ExperimentalIsolatedShadowDom:return new ro(l,e,r,a,s,this.nonce,p,h);default:o=new Yr(l,c,r,u,a,s,p,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(te(ls),te(cs),te(Ya),te(Vf),te(Ue),te(ir),te(Ka),te(Bi,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Qr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,i,o){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(as[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(Lc(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(Lc(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new he(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;let o=as[i];o?n.setAttributeNS(o,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let i=as[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(Vr.DashCase|Vr.Important)?n.style.setProperty(e,r,i&Vr.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&Vr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,i){if(typeof n=="string"&&(n=Hr().getGlobalEventTarget(this.doc,n),!n))throw new he(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,e,o)),this.eventManager.addEventListener(n,e,o,i)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function Lc(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ro=class extends Qr{hostEl;sharedStylesHost;shadowRoot;constructor(n,e,r,i,o,a,s,l,c){super(n,i,o,s,l),this.hostEl=e,this.sharedStylesHost=c,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=Fc(r.id,u);for(let h of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}let p=r.getExternalStyles?.();if(p)for(let h of p){let m=ss(h,i);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Yr=class extends Qr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,i,o,a,s,l,c){super(n,o,a,s,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?Fc(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&$l.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},io=class extends Yr{contentAttr;hostAttr;constructor(n,e,r,i,o,a,s,l,c){let u=i+"-"+r.id;super(n,e,r,o,a,s,l,c,u),this.contentAttr=Bf(u),this.hostAttr=$f(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var ao=class t extends oc{supportsDOMEvents=!0;static makeCurrent(){ic(new t)}onAndCancel(n,e,r,i){return n.addEventListener(e,r,i),()=>{n.removeEventListener(e,r,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Gf();return e==null?null:Hf(e)}resetBaseElement(){Kr=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Xi(document.cookie,n)}},Kr=null;function Gf(){return Kr=Kr||document.head.querySelector("base"),Kr?Kr.getAttribute("href"):null}function Hf(t){return new URL(t,document.baseURI).pathname}var qf=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),jc=["alt","control","meta","shift"],Wf={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xf={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Uc=(()=>{class t extends Xr{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,i,o){let a=t.parseEventName(r),s=t.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hr().onAndCancel(e,a.domEventName,s,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),a="code."),jc.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),a+=c+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(e,r){let i=Wf[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jc.forEach(a=>{if(a!==i){let s=Xf[a];s(e)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{t.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(te(Ue))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();function ps(t,n,e){let r=I({rootComponent:t,platformRef:e?.platformRef},Qf(n));return nc(r)}function Qf(t){return{appProviders:[...eh,...t?.providers??[]],platformProviders:Zf}}function Yf(){ao.makeCurrent()}function Kf(){return new Qa}function Jf(){return jl(document),document}var Zf=[{provide:Ui,useValue:pc},{provide:Ul,useValue:Yf,multi:!0},{provide:Ue,useFactory:Jf}];var eh=[{provide:Pl,useValue:"root"},{provide:Qa,useFactory:Kf},{provide:oo,useClass:no,multi:!0},{provide:oo,useClass:Uc,multi:!0},ds,cs,ls,{provide:Hl,useExisting:ds},{provide:Qi,useClass:qf},[]];var yn=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var lo=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}},co=class{encodeKey(n){return Vc(n)}encodeValue(n){return Vc(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function th(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],l=e.get(a)||[];l.push(s),e.set(a,l)}),e}var nh=/%(\d[a-f0-9])/gi,rh={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Vc(t){return encodeURIComponent(t).replace(nh,(n,e)=>rh[e]??n)}function so(t){return`${t}`}var Kt=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new co,n.fromString){if(n.fromObject)throw new he(2805,!1);this.map=th(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],i=Array.isArray(r)?r.map(so):[so(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(so(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(so(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};function ih(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Bc(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function $c(t){return typeof Blob<"u"&&t instanceof Blob}function Gc(t){return typeof FormData<"u"&&t instanceof FormData}function oh(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Hc="Content-Type",qc="Accept",Wc="text/plain",Xc="application/json",ah=`${Xc}, ${Wc}, */*`,dr=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,e,r,i){this.url=e,this.method=n.toUpperCase();let o;if(ih(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new he(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new yn,this.context??=new lo,!this.params)this.params=new Kt,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),l=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Bc(this.body)||$c(this.body)||Gc(this.body)||oh(this.body)?this.body:this.body instanceof Kt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Gc(this.body)?null:$c(this.body)?this.body.type||null:Bc(this.body)?null:typeof this.body=="string"?Wc:this.body instanceof Kt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Xc:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.keepalive??this.keepalive,a=n.priority||this.priority,s=n.cache||this.cache,l=n.mode||this.mode,c=n.redirect||this.redirect,u=n.credentials||this.credentials,p=n.referrer||this.referrer,h=n.integrity||this.integrity,m=n.referrerPolicy||this.referrerPolicy,T=n.transferCache??this.transferCache,x=n.timeout??this.timeout,y=n.body!==void 0?n.body:this.body,v=n.withCredentials??this.withCredentials,E=n.reportProgress??this.reportProgress,L=n.headers||this.headers,w=n.params||this.params,A=n.context??this.context;return n.setHeaders!==void 0&&(L=Object.keys(n.setHeaders).reduce((B,$)=>B.set($,n.setHeaders[$]),L)),n.setParams&&(w=Object.keys(n.setParams).reduce((B,$)=>B.set($,n.setParams[$]),w)),new t(e,r,y,{params:w,headers:L,context:A,reportProgress:E,responseType:i,withCredentials:v,transferCache:T,keepalive:o,cache:s,priority:a,timeout:x,mode:l,redirect:c,credentials:u,referrer:p,integrity:h,referrerPolicy:m})}},jn=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(jn||{}),fr=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(n,e=200,r="OK"){this.headers=n.headers||new yn,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.redirected=n.redirected,this.responseType=n.responseType,this.ok=this.status>=200&&this.status<300}},uo=class t extends fr{constructor(n={}){super(n)}type=jn.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Jr=class t extends fr{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=jn.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0,redirected:n.redirected??this.redirected,responseType:n.responseType??this.responseType})}},pr=class extends fr{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},sh=200,lh=204;var ch=new ue("");var uh=/^\)\]\}',?\n/;var hs=(()=>{class t{xhrFactory;tracingService=d(Bi,{optional:!0});constructor(e){this.xhrFactory=e}maybePropagateTrace(e){return this.tracingService?.propagate?this.tracingService.propagate(e):e}handle(e){if(e.method==="JSONP")throw new he(-2800,!1);let r=this.xhrFactory;return W(null).pipe(st(()=>new Ai(o=>{let a=r.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((y,v)=>a.setRequestHeader(y,v.join(","))),e.headers.has(qc)||a.setRequestHeader(qc,ah),!e.headers.has(Hc)){let y=e.detectContentTypeHeader();y!==null&&a.setRequestHeader(Hc,y)}if(e.timeout&&(a.timeout=e.timeout),e.responseType){let y=e.responseType.toLowerCase();a.responseType=y!=="json"?y:"text"}let s=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let y=a.statusText||"OK",v=new yn(a.getAllResponseHeaders()),E=a.responseURL||e.url;return l=new uo({headers:v,status:a.status,statusText:y,url:E}),l},u=this.maybePropagateTrace(()=>{let{headers:y,status:v,statusText:E,url:L}=c(),w=null;v!==lh&&(w=typeof a.response>"u"?a.responseText:a.response),v===0&&(v=w?sh:0);let A=v>=200&&v<300;if(e.responseType==="json"&&typeof w=="string"){let B=w;w=w.replace(uh,"");try{w=w!==""?JSON.parse(w):null}catch($){w=B,A&&(A=!1,w={error:$,text:w})}}A?(o.next(new Jr({body:w,headers:y,status:v,statusText:E,url:L||void 0})),o.complete()):o.error(new pr({error:w,headers:y,status:v,statusText:E,url:L||void 0}))}),p=this.maybePropagateTrace(y=>{let{url:v}=c(),E=new pr({error:y,status:a.status||0,statusText:a.statusText||"Unknown Error",url:v||void 0});o.error(E)}),h=p;e.timeout&&(h=this.maybePropagateTrace(y=>{let{url:v}=c(),E=new pr({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:v||void 0});o.error(E)}));let m=!1,T=this.maybePropagateTrace(y=>{m||(o.next(c()),m=!0);let v={type:jn.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(v.total=y.total),e.responseType==="text"&&a.responseText&&(v.partialText=a.responseText),o.next(v)}),x=this.maybePropagateTrace(y=>{let v={type:jn.UploadProgress,loaded:y.loaded};y.lengthComputable&&(v.total=y.total),o.next(v)});return a.addEventListener("load",u),a.addEventListener("error",p),a.addEventListener("timeout",h),a.addEventListener("abort",p),e.reportProgress&&(a.addEventListener("progress",T),s!==null&&a.upload&&a.upload.addEventListener("progress",x)),a.send(s),o.next({type:jn.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",u),a.removeEventListener("timeout",h),e.reportProgress&&(a.removeEventListener("progress",T),s!==null&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(r){return new(r||t)(te(Qi))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dh(t,n){return n(t)}function ph(t,n,e){return(r,i)=>Fe(e,()=>n(r,o=>t(o,i)))}var Qc=new ue("",{factory:()=>[]}),Yc=new ue(""),Kc=new ue("",{providedIn:"root",factory:()=>!0});var ms=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=te(hs),i},providedIn:"root"})}return t})();var po=(()=>{class t{backend;injector;chain=null;pendingTasks=d(zl);contributeToStability=d(Kc);constructor(e,r){this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Qc),...this.injector.get(Yc,[])]));this.chain=r.reduceRight((i,o)=>ph(i,o,this.injector),dh)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(Fi(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(te(ms),te(Ot))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=te(po),i},providedIn:"root"})}return t})();function fs(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var hr=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof dr)o=e;else{let l;i.headers instanceof yn?l=i.headers:l=new yn(i.headers);let c;i.params&&(i.params instanceof Kt?c=i.params:c=new Kt({fromObject:i.params})),o=new dr(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let a=W(o).pipe(kn(l=>this.handler.handle(l)));if(e instanceof dr||i.observe==="events")return a;let s=a.pipe(gt(l=>l instanceof Jr));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(we(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new he(2806,!1);return l.body}));case"blob":return s.pipe(we(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new he(2807,!1);return l.body}));case"text":return s.pipe(we(l=>{if(l.body!==null&&typeof l.body!="string")throw new he(2808,!1);return l.body}));case"json":default:return s.pipe(we(l=>l.body))}case"response":return s;default:throw new he(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Kt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,fs(i,r))}post(e,r,i={}){return this.request("POST",e,fs(i,r))}put(e,r,i={}){return this.request("PUT",e,fs(i,r))}static \u0275fac=function(r){return new(r||t)(te(gs))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var fh=new ue("",{factory:()=>!0}),hh="XSRF-TOKEN",mh=new ue("",{providedIn:"root",factory:()=>hh}),gh="X-XSRF-TOKEN",vh=new ue("",{providedIn:"root",factory:()=>gh}),_h=(()=>{class t{cookieName=d(mh);doc=d(Ue);lastCookieString="";lastToken=null;parseCount=0;getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xi(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=te(_h),i},providedIn:"root"})}return t})();function yh(t,n){let e=t.url.toLowerCase();if(!d(fh)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=d(Jc).getToken(),i=d(vh);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}function vs(...t){let n=[hr,po,{provide:gs,useExisting:po},{provide:ms,useFactory:()=>d(ch,{optional:!0})??d(hs)},{provide:Qc,useValue:yh,multi:!0}];for(let e of t)n.push(...e.\u0275providers);return jr(n)}var Zc=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(te(Ue))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Q="primary",ci=Symbol("RouteTitle"),bs=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function $n(t){return new bs(t)}function lu(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=t[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _o(t){return new Promise((n,e)=>{t.pipe(on()).subscribe({next:r=>n(r),error:r=>e(r)})})}function bh(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!zt(t[e],n[e]))return!1;return!0}function zt(t,n){let e=t?xs(t):void 0,r=n?xs(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!cu(t[i],n[i]))return!1;return!0}function xs(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cu(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((i,o)=>r[o]===i)}else return t===n}function uu(t){return t.length>0?t[t.length-1]:null}function Gn(t){return zr(t)?t:Yl(t)?He(Promise.resolve(t)):W(t)}function du(t){return zr(t)?_o(t):Promise.resolve(t)}var xh={exact:fu,subset:hu},pu={exact:Sh,subset:Dh,ignored:()=>!0};function eu(t,n,e){return xh[e.paths](t.root,n.root,e.matrixParams)&&pu[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Sh(t,n){return zt(t,n)}function fu(t,n,e){if(!Vn(t.segments,n.segments)||!mo(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!fu(t.children[r],n.children[r],e))return!1;return!0}function Dh(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>cu(t[e],n[e]))}function hu(t,n,e){return mu(t,n,n.segments,e)}function mu(t,n,e,r){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!Vn(i,e)||n.hasChildren()||!mo(i,e,r))}else if(t.segments.length===e.length){if(!Vn(t.segments,e)||!mo(t.segments,e,r))return!1;for(let i in n.children)if(!t.children[i]||!hu(t.children[i],n.children[i],r))return!1;return!0}else{let i=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!Vn(t.segments,i)||!mo(t.segments,i,r)||!t.children[Q]?!1:mu(t.children[Q],n,o,r)}}function mo(t,n,e){return n.every((r,i)=>pu[e](t[i].parameters,r.parameters))}var St=class{root;queryParams;fragment;_queryParamMap;constructor(n=new le([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$n(this.queryParams),this._queryParamMap}toString(){return Rh.serialize(this)}},le=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return go(this)}},wn=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=$n(this.parameters),this._parameterMap}toString(){return vu(this)}};function Th(t,n){return Vn(t,n)&&t.every((e,r)=>zt(e.parameters,n[r].parameters))}function Vn(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function Eh(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===Q&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Q&&(e=e.concat(n(i,r)))}),e}var Hn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>new Jt,providedIn:"root"})}return t})(),Jt=class{parse(n){let e=new Ds(n);return new St(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Zr(n.root,!0)}`,r=kh(n.queryParams),i=typeof n.fragment=="string"?`#${Mh(n.fragment)}`:"";return`${e}${r}${i}`}},Rh=new Jt;function go(t){return t.segments.map(n=>vu(n)).join("/")}function Zr(t,n){if(!t.hasChildren())return go(t);if(n){let e=t.children[Q]?Zr(t.children[Q],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Q&&r.push(`${i}:${Zr(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Eh(t,(r,i)=>i===Q?[Zr(t.children[Q],!1)]:[`${i}:${Zr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Q]!=null?`${go(t)}/${e[0]}`:`${go(t)}/(${e.join("//")})`}}function gu(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fo(t){return gu(t).replace(/%3B/gi,";")}function Mh(t){return encodeURI(t)}function Ss(t){return gu(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vo(t){return decodeURIComponent(t)}function tu(t){return vo(t.replace(/\+/g,"%20"))}function vu(t){return`${Ss(t.path)}${Oh(t.parameters)}`}function Oh(t){return Object.entries(t).map(([n,e])=>`;${Ss(n)}=${Ss(e)}`).join("")}function kh(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(i=>`${fo(e)}=${fo(i)}`).join("&"):`${fo(e)}=${fo(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Ih=/^[^\/()?;#]+/;function _s(t){let n=t.match(Ih);return n?n[0]:""}var Nh=/^[^\/()?;=#]+/;function Ph(t){let n=t.match(Nh);return n?n[0]:""}var Ah=/^[^=?&#]+/;function Lh(t){let n=t.match(Ah);return n?n[0]:""}var zh=/^[^&#]+/;function Fh(t){let n=t.match(zh);return n?n[0]:""}var Ds=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[Q]=new le(n,e)),r}parseSegment(){let n=_s(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(n),new wn(vo(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Ph(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=_s(this.remaining);i&&(r=i,this.capture(r))}n[vo(e)]=vo(r)}parseQueryParam(n){let e=Lh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let a=Fh(this.remaining);a&&(r=a,this.capture(r))}let i=tu(e),o=tu(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(o)}else n[i]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_s(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Q);let a=this.parseChildren();e[o??Q]=Object.keys(a).length===1&&a[Q]?a[Q]:new le([],a),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new he(4011,!1)}};function _u(t){return t.segments.length>0?new le([],{[Q]:t}):t}function yu(t){let n={};for(let[r,i]of Object.entries(t.children)){let o=yu(i);if(r===Q&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let e=new le(t.segments,n);return jh(e)}function jh(t){if(t.numberOfChildren===1&&t.children[Q]){let n=t.children[Q];return new le(t.segments.concat(n.segments),n.children)}return t}function Cn(t){return t instanceof St}function wu(t,n,e=null,r=null,i=new Jt){let o=Cu(t);return bu(o,n,e,r,i)}function Cu(t){let n;function e(o){let a={};for(let l of o.children){let c=e(l);a[l.outlet]=c}let s=new le(o.url,a);return o===t&&(n=s),s}let r=e(t.root),i=_u(r);return n??i}function bu(t,n,e,r,i){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return ys(o,o,o,e,r,i);let a=Uh(n);if(a.toRoot())return ys(o,o,new le([],{}),e,r,i);let s=Vh(a,o,t),l=s.processChildren?ti(s.segmentGroup,s.index,a.commands):Su(s.segmentGroup,s.index,a.commands);return ys(o,s.segmentGroup,l,e,r,i)}function yo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ri(t){return typeof t=="object"&&t!=null&&t.outlets}function nu(t,n,e){t||="\u0275";let r=new St;return r.queryParams={[t]:n},e.parse(e.serialize(r)).queryParams[t]}function ys(t,n,e,r,i,o){let a={};for(let[c,u]of Object.entries(r??{}))a[c]=Array.isArray(u)?u.map(p=>nu(c,p,o)):nu(c,u,o);let s;t===n?s=e:s=xu(t,n,e);let l=_u(yu(s));return new St(l,a,i)}function xu(t,n,e){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===n?r[i]=e:r[i]=xu(o,n,e)}),new le(t.segments,r)}var wo=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&yo(r[0]))throw new he(4003,!1);let i=r.find(ri);if(i&&i!==uu(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Uh(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new wo(!0,0,t);let n=0,e=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,c])=>{s[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?n++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new wo(e,n,r)}var gr=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function Vh(t,n,e){if(t.isAbsolute)return new gr(n,!0,0);if(!e)return new gr(n,!1,NaN);if(e.parent===null)return new gr(e,!0,0);let r=yo(t.commands[0])?0:1,i=e.segments.length-1+r;return Bh(e,i,t.numberOfDoubleDots)}function Bh(t,n,e){let r=t,i=n,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new gr(r,!1,i-o)}function $h(t){return ri(t[0])?t[0].outlets:{[Q]:t}}function Su(t,n,e){if(t??=new le([],{}),t.segments.length===0&&t.hasChildren())return ti(t,n,e);let r=Gh(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new le(t.segments.slice(0,r.pathIndex),{});return o.children[Q]=new le(t.segments.slice(r.pathIndex),t.children),ti(o,0,i)}else return r.match&&i.length===0?new le(t.segments,{}):r.match&&!t.hasChildren()?Ts(t,n,e):r.match?ti(t,0,i):Ts(t,n,e)}function ti(t,n,e){if(e.length===0)return new le(t.segments,{});{let r=$h(e),i={};if(Object.keys(r).some(o=>o!==Q)&&t.children[Q]&&t.numberOfChildren===1&&t.children[Q].segments.length===0){let o=ti(t.children[Q],n,e);return new le(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Su(t.children[o],n,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new le(t.segments,i)}}function Gh(t,n,e){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return o;let a=t.segments[i],s=e[r];if(ri(s))break;let l=`${s}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!iu(l,c,a))return o;r+=2}else{if(!iu(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ts(t,n,e){let r=t.segments.slice(0,n),i=0;for(;i<e.length;){let o=e[i];if(ri(o)){let l=Hh(o.outlets);return new le(r,l)}if(i===0&&yo(e[0])){let l=t.segments[n];r.push(new wn(l.path,ru(e[0]))),i++;continue}let a=ri(o)?o.outlets[Q]:`${o}`,s=i<e.length-1?e[i+1]:null;a&&s&&yo(s)?(r.push(new wn(a,ru(s))),i+=2):(r.push(new wn(a,{})),i++)}return new le(r,{})}function Hh(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=Ts(new le([],{}),0,r))}),n}function ru(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function iu(t,n,e){return t==e.path&&zt(n,e.parameters)}var vr="imperative",Me=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Me||{}),ot=class{id;url;constructor(n,e){this.id=n,this.url=e}},bn=class extends ot{type=Me.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",i=null){super(n,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},at=class extends ot{urlAfterRedirects;type=Me.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ve=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ve||{}),yr=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(yr||{}),Ft=class extends ot{reason;code;type=Me.NavigationCancel;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jt=class extends ot{reason;code;type=Me.NavigationSkipped;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}},wr=class extends ot{error;target;type=Me.NavigationError;constructor(n,e,r,i){super(n,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ii=class extends ot{urlAfterRedirects;state;type=Me.RoutesRecognized;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Co=class extends ot{urlAfterRedirects;state;type=Me.GuardsCheckStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bo=class extends ot{urlAfterRedirects;state;shouldActivate;type=Me.GuardsCheckEnd;constructor(n,e,r,i,o){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xo=class extends ot{urlAfterRedirects;state;type=Me.ResolveStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},So=class extends ot{urlAfterRedirects;state;type=Me.ResolveEnd;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Do=class{route;type=Me.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},To=class{route;type=Me.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Eo=class{snapshot;type=Me.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ro=class{snapshot;type=Me.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mo=class{snapshot;type=Me.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oo=class{snapshot;type=Me.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cr=class{routerEvent;position;anchor;type=Me.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},oi=class{},br=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function qh(t){return!(t instanceof oi)&&!(t instanceof br)}function Wh(t,n){return t.providers&&!t._injector&&(t._injector=$i(t.providers,n,`Route: ${t.path}`)),t._injector??n}function xt(t){return t.outlet||Q}function Xh(t,n){let e=t.filter(r=>xt(r)===n);return e.push(...t.filter(r=>xt(r)!==n)),e}function Dr(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var ko=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Dr(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new qn(this.rootInjector)}},qn=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new ko(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(te(Ot))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Io=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=Es(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=Es(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=Rs(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Rs(n,this._root).map(e=>e.value)}};function Es(t,n){if(t===n.value)return n;for(let e of n.children){let r=Es(t,e);if(r)return r}return null}function Rs(t,n){if(t===n.value)return[n];for(let e of n.children){let r=Rs(t,e);if(r.length)return r.unshift(n),r}return[]}var it=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function mr(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var ai=class extends Io{snapshot;constructor(n,e){super(n),this.snapshot=e,Ps(this,n)}toString(){return this.snapshot.toString()}};function Du(t){let n=Qh(t),e=new ze([new wn("",{})]),r=new ze({}),i=new ze({}),o=new ze({}),a=new ze(""),s=new Ut(e,r,o,a,i,Q,t,n.root);return s.snapshot=n.root,new ai(new it(s,[]),n)}function Qh(t){let n={},e={},r={},o=new Bn([],n,r,"",e,Q,t,null,{});return new si("",new it(o,[]))}var Ut=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,i,o,a,s,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(we(c=>c[ci]))??W(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(n=>$n(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(n=>$n(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function No(t,n,e="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:I(I({},n.params),t.params),data:I(I({},n.data),t.data),resolve:I(I(I(I({},t.data),n.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&Eu(i)&&(r.resolve[ci]=i.title),r}var Bn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ci]}constructor(n,e,r,i,o,a,s,l,c){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$n(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$n(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},si=class extends Io{url;constructor(n,e){super(e),this.url=n,Ps(this,e)}toString(){return Tu(this._root)}};function Ps(t,n){n.value._routerState=t,n.children.forEach(e=>Ps(t,e))}function Tu(t){let n=t.children.length>0?` { ${t.children.map(Tu).join(", ")} } `:"";return`${t.value}${n}`}function ws(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,zt(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),zt(n.params,e.params)||t.paramsSubject.next(e.params),bh(n.url,e.url)||t.urlSubject.next(e.url),zt(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ms(t,n){let e=zt(t.params,n.params)&&Th(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||Ms(t.parent,n.parent))}function Eu(t){return typeof t.title=="string"||t.title===null}var Ru=new ue(""),Wn=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Q;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=me();parentContexts=d(qn);location=d(sn);changeDetector=d(fn);inputBinder=d(ui,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=e;let i=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new Os(e,s,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xt]})}return t})(),Os=class{route;childContexts;parent;outletData;constructor(n,e,r,i){this.route=n,this.childContexts=e,this.parent=r,this.outletData=i}get(n,e){return n===Ut?this.route:n===qn?this.childContexts:n===Ru?this.outletData:this.parent.get(n,e)}},ui=new ue(""),As=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=Ga([r.queryParams,r.params,r.data]).pipe(st(([o,a,s],l)=>(s=I(I(I({},o),a),s),l===0?W(s):Promise.resolve(s)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let a=rc(r.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:s}of a.inputs)e.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Ls=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=V({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&X(0,"router-outlet")},dependencies:[Wn],encapsulation:2})}return t})();function zs(t){let n=t.children&&t.children.map(zs),e=n?ve(I({},t),{children:n}):I({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Q&&(e.component=Ls),e}function Yh(t,n,e){let r=li(t,n._root,e?e._root:void 0);return new ai(r,n)}function li(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let i=Kh(t,n,e);return new it(r,i)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>li(t,s)),a}}let r=Jh(n.value),i=n.children.map(o=>li(t,o));return new it(r,i)}}function Kh(t,n,e){return n.children.map(r=>{for(let i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return li(t,r,i);return li(t,r)})}function Jh(t){return new Ut(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var xr=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},Mu="ngNavigationCancelingError";function Po(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Cn(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=Ou(!1,Ve.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function Ou(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[Mu]=!0,e.cancellationCode=n,e}function Zh(t){return ku(t)&&Cn(t.url)}function ku(t){return!!t&&t[Mu]}var em=(t,n,e,r)=>we(i=>(new ks(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)),ks=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,i,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),ws(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let i=mr(e);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,e,r){let i=n.value,o=e?e.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,e,a.children)}else this.deactivateChildRoutes(n,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,o=mr(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,o=mr(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let i=mr(e);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Oo(o.value.snapshot))}),n.children.length&&this.forwardEvent(new Ro(n.value.snapshot))}activateRoutes(n,e,r){let i=n.value,o=e?e.value:null;if(ws(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,a.children)}else this.activateChildRoutes(n,e,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),ws(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,r)}},Ao=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},_r=class{component;route;constructor(n,e){this.component=n,this.route=e}};function tm(t,n,e){let r=t._root,i=n?n._root:null;return ei(r,i,e,[r.value])}function nm(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Tr(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!Nl(t)?t:n.get(t):r}function ei(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=mr(n);return t.children.forEach(a=>{rm(a,o[a.value.outlet],e,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>ni(s,e.getContext(a),i)),i}function rm(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=im(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Ao(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?ei(t,n,s?s.children:null,r,i):ei(t,n,e,r,i),l&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new _r(s.outlet.component,a))}else a&&ni(n,s,i),i.canActivateChecks.push(new Ao(r)),o.component?ei(t,null,s?s.children:null,r,i):ei(t,null,e,r,i);return i}function im(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Vn(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Vn(t.url,n.url)||!zt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ms(t,n)||!zt(t.queryParams,n.queryParams);case"paramsChange":default:return!Ms(t,n)}}function ni(t,n,e){let r=mr(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?n?ni(a,n.children.getContext(o),e):ni(a,null,e):ni(a,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new _r(n.outlet.component,i)):e.canDeactivateChecks.push(new _r(null,i)):e.canDeactivateChecks.push(new _r(null,i))}function di(t){return typeof t=="function"}function om(t){return typeof t=="boolean"}function am(t){return t&&di(t.canLoad)}function sm(t){return t&&di(t.canActivate)}function lm(t){return t&&di(t.canActivateChild)}function cm(t){return t&&di(t.canDeactivate)}function um(t){return t&&di(t.canMatch)}function Iu(t){return t instanceof Rl||t?.name==="EmptyError"}var ho=Symbol("INITIAL_VALUE");function Sr(){return st(t=>Ga(t.map(n=>n.pipe(rr(1),Il(ho)))).pipe(we(n=>{for(let e of n)if(e!==!0){if(e===ho)return ho;if(e===!1||dm(e))return e}return!0}),gt(n=>n!==ho),rr(1)))}function dm(t){return Cn(t)||t instanceof xr}function Nu(t){return t.aborted?W(void 0).pipe(rr(1)):new Ai(n=>{let e=()=>{n.next(),n.complete()};return t.addEventListener("abort",e),()=>t.removeEventListener("abort",e)})}function Pu(t){return an(Nu(t))}function pm(t,n){return Mt(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?W(ve(I({},e),{guardsResult:!0})):fm(a,r,i,t).pipe(Mt(s=>s&&om(s)?hm(r,o,t,n):W(s)),we(s=>ve(I({},e),{guardsResult:s})))})}function fm(t,n,e,r){return He(t).pipe(Mt(i=>ym(i.component,i.route,e,n,r)),on(i=>i!==!0,!0))}function hm(t,n,e,r){return He(n).pipe(kn(i=>Ol(gm(i.route.parent,r),mm(i.route,r),_m(t,i.path,e),vm(t,i.route,e))),on(i=>i!==!0,!0))}function mm(t,n){return t!==null&&n&&n(new Mo(t)),W(!0)}function gm(t,n){return t!==null&&n&&n(new Eo(t)),W(!0)}function vm(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Li(()=>{let a=Dr(n)??e,s=Tr(o,a),l=sm(s)?s.canActivate(n,t):Fe(a,()=>s(n,t));return Gn(l).pipe(on())}));return W(i).pipe(Sr())}function _m(t,n,e){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>nm(a)).filter(a=>a!==null).map(a=>Li(()=>{let s=a.guards.map(l=>{let c=Dr(a.node)??e,u=Tr(l,c),p=lm(u)?u.canActivateChild(r,t):Fe(c,()=>u(r,t));return Gn(p).pipe(on())});return W(s).pipe(Sr())}));return W(o).pipe(Sr())}function ym(t,n,e,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let a=o.map(s=>{let l=Dr(n)??i,c=Tr(s,l),u=cm(c)?c.canDeactivate(t,n,e,r):Fe(l,()=>c(t,n,e,r));return Gn(u).pipe(on())});return W(a).pipe(Sr())}function wm(t,n,e,r,i){let o=n.canLoad;if(o===void 0||o.length===0)return W(!0);let a=o.map(s=>{let l=Tr(s,t),c=am(l)?l.canLoad(n,e):Fe(t,()=>l(n,e)),u=Gn(c);return i?u.pipe(Pu(i)):u});return W(a).pipe(Sr(),Au(r))}function Au(t){return Tl(qe(n=>{if(typeof n!="boolean")throw Po(t,n)}),we(n=>n===!0))}function Cm(t,n,e,r,i){let o=n.canMatch;if(!o||o.length===0)return W(!0);let a=o.map(s=>{let l=Tr(s,t),c=um(l)?l.canMatch(n,e):Fe(t,()=>l(n,e)),u=Gn(c);return i?u.pipe(Pu(i)):u});return W(a).pipe(Sr(),Au(r))}var Un=class Lu extends Error{segmentGroup;constructor(n){super(),this.segmentGroup=n||null,Object.setPrototypeOf(this,Lu.prototype)}},Is=class zu extends Error{urlTree;constructor(n){super(),this.urlTree=n,Object.setPrototypeOf(this,zu.prototype)}};function bm(t){throw new he(4e3,!1)}function xm(t){throw Ou(!1,Ve.GuardRejected)}var Sm=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){return fe(this,null,function*(){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Q])throw bm(`${n.redirectTo}`);i=i.children[Q]}})}applyRedirectCommands(n,e,r,i,o){return fe(this,null,function*(){let a=yield Dm(e,i,o);if(a instanceof St)throw new Is(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),n,r);if(a[0]==="/")throw new Is(s);return s})}applyRedirectCreateUrlTree(n,e,r,i){let o=this.createSegmentGroup(n,e.root,r,i);return new St(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);r[i]=e[s]}else r[i]=o}),r}createSegmentGroup(n,e,r,i){let o=this.createSegments(n,e.segments,r,i),a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(n,l,r,i)}),new le(o,a)}createSegments(n,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,e,r){let i=r[e.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(n,e){let r=0;for(let i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}};function Dm(t,n,e){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:a,url:s,outlet:l,params:c,data:u,title:p}=n;return _o(Gn(Fe(e,()=>r({params:c,data:u,queryParams:i,fragment:o,routeConfig:a,url:s,outlet:l,title:p}))))}var Ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tm(t,n,e,r,i,o){let a=Fu(t,n,e);return a.matched?(r=Wh(n,r),Cm(r,n,e,i,o).pipe(we(s=>s===!0?a:I({},Ns)))):W(a)}function Fu(t,n,e){if(n.path==="**")return Em(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?I({},Ns):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||lu)(e,t,n);if(!i)return I({},Ns);let o={};Object.entries(i.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=i.consumed.length>0?I(I({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Em(t){return{matched:!0,parameters:t.length>0?uu(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ou(t,n,e,r){return e.length>0&&Om(t,e,r)?{segmentGroup:new le(n,Mm(r,new le(e,t.children))),slicedSegments:[]}:e.length===0&&km(t,e,r)?{segmentGroup:new le(t.segments,Rm(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new le(t.segments,t.children),slicedSegments:e}}function Rm(t,n,e,r){let i={};for(let o of e)if(zo(t,n,o)&&!r[xt(o)]){let a=new le([],{});i[xt(o)]=a}return I(I({},r),i)}function Mm(t,n){let e={};e[Q]=n;for(let r of t)if(r.path===""&&xt(r)!==Q){let i=new le([],{});e[xt(r)]=i}return e}function Om(t,n,e){return e.some(r=>zo(t,n,r)&&xt(r)!==Q)}function km(t,n,e){return e.some(r=>zo(t,n,r))}function zo(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Im(t,n,e){return n.length===0&&!t.children[e]}var Nm=class{};function Pm(t,n,e,r,i,o,a="emptyOnly",s){return fe(this,null,function*(){return new Lm(t,n,e,r,i,a,o,s).recognize()})}var Am=31,Lm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,i,o,a,s,l){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.abortSignal=l,this.applyRedirects=new Sm(this.urlSerializer,this.urlTree)}noMatchError(n){return new he(4002,`'${n.segmentGroup}'`)}recognize(){return fe(this,null,function*(){let n=ou(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:r}=yield this.match(n),i=new it(r,e),o=new si("",i),a=wu(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}})}match(n){return fe(this,null,function*(){let e=new Bn([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Q,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,n,Q,e),rootSnapshot:e}}catch(r){if(r instanceof Is)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Un?this.noMatchError(r):r}})}processSegmentGroup(n,e,r,i,o){return fe(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(n,e,r,o);let a=yield this.processSegment(n,e,r,r.segments,i,!0,o);return a instanceof it?[a]:[]})}processChildren(n,e,r,i){return fe(this,null,function*(){let o=[];for(let l of Object.keys(r.children))l==="primary"?o.unshift(l):o.push(l);let a=[];for(let l of o){let c=r.children[l],u=Xh(e,l),p=yield this.processSegmentGroup(n,u,c,l,i);a.push(...p)}let s=ju(a);return zm(s),s})}processSegment(n,e,r,i,o,a,s){return fe(this,null,function*(){for(let l of e)try{return yield this.processSegmentAgainstRoute(l._injector??n,e,l,r,i,o,a,s)}catch(c){if(c instanceof Un||Iu(c))continue;throw c}if(Im(r,i,o))return new Nm;throw new Un(r)})}processSegmentAgainstRoute(n,e,r,i,o,a,s,l){return fe(this,null,function*(){if(xt(r)!==a&&(a===Q||!zo(i,o,r)))throw new Un(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(n,i,r,o,a,l);if(this.allowRedirects&&s)return this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,o,a,l);throw new Un(i)})}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,o,a,s){return fe(this,null,function*(){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:p,remainingSegments:h}=Fu(e,i,o);if(!l)throw new Un(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Am&&(this.allowRedirects=!1));let m=new Bn(o,c,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,au(i),xt(i),i.component??i._loadedComponent??null,i,su(i)),T=No(m,s,this.paramsInheritanceStrategy);if(m.params=Object.freeze(T.params),m.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=yield this.applyRedirects.applyRedirectCommands(u,i.redirectTo,p,m,n),y=yield this.applyRedirects.lineralizeSegments(i,x);return this.processSegment(n,r,e,y.concat(h),a,!1,s)})}matchSegmentAgainstRoute(n,e,r,i,o,a){return fe(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let s=yield _o(Tm(e,r,i,n,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(e.children={}),!s?.matched)throw new Un(e);n=r._injector??n;let{routes:l}=yield this.getChildConfig(n,r,i),c=r._loadedInjector??n,{parameters:u,consumedSegments:p,remainingSegments:h}=s,m=new Bn(p,u,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,au(r),xt(r),r.component??r._loadedComponent??null,r,su(r)),T=No(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(T.params),m.data=Object.freeze(T.data);let{segmentGroup:x,slicedSegments:y}=ou(e,p,h,l);if(y.length===0&&x.hasChildren()){let L=yield this.processChildren(c,l,x,m);return new it(m,L)}if(l.length===0&&y.length===0)return new it(m,[]);let v=xt(r)===o,E=yield this.processSegment(c,l,x,y,v?Q:o,!0,m);return new it(m,E instanceof it?[E]:[])})}getChildConfig(n,e,r){return fe(this,null,function*(){if(e.children)return{routes:e.children,injector:n};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield _o(wm(n,e,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(n,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw xm(e)}return{routes:[],injector:n}})}};function zm(t){t.sort((n,e)=>n.value.outlet===Q?-1:e.value.outlet===Q?1:n.value.outlet.localeCompare(e.value.outlet))}function Fm(t){let n=t.value.routeConfig;return n&&n.path===""}function ju(t){let n=[],e=new Set;for(let r of t){if(!Fm(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):n.push(r)}for(let r of e){let i=ju(r.children);n.push(new it(r.value,i))}return n.filter(r=>!e.has(r))}function au(t){return t.data||{}}function su(t){return t.resolve||{}}var jm=new ue("",{factory:()=>Pm});function Um(t,n,e,r,i,o,a){let s=t.get(jm);return Mt(l=>W(l).pipe(st(c=>s(t,n,e,r,c.extractedUrl,i,o,a)),we(({state:c,tree:u})=>ve(I({},l),{targetSnapshot:c,urlAfterRedirects:u}))))}function Vm(t,n){return Mt(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return W(e);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let c of Uu(l))a.add(c);let s=0;return He(a).pipe(kn(l=>o.has(l)?Bm(l,r,t,n):(l.data=No(l,l.parent,t).resolve,W(void 0))),qe(()=>s++),Ha(1),Mt(l=>s===a.size?W(e):Wt))})}function Uu(t){let n=t.children.map(e=>Uu(e)).flat();return[t,...n]}function Bm(t,n,e,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Eu(i)&&(o[ci]=i.title),Li(()=>(t.data=No(t,t.parent,e).resolve,$m(o,t,n,r).pipe(we(a=>(t._resolvedData=a,t.data=I(I({},t.data),a),null)))))}function $m(t,n,e,r){let i=xs(t);if(i.length===0)return W({});let o={};return He(i).pipe(Mt(a=>Gm(t[a],n,e,r).pipe(on(),qe(s=>{if(s instanceof xr)throw Po(new Jt,s);o[a]=s}))),Ha(1),we(()=>o),zi(a=>Iu(a)?Wt:El(a)))}function Gm(t,n,e,r){let i=Dr(n)??r,o=Tr(t,i),a=o.resolve?o.resolve(n,e):Fe(i,()=>o(n,e));return Gn(a)}function Cs(t){return st(n=>{let e=t(n);return e?He(e).pipe(we(()=>n)):W(n)})}var Fs=(()=>{class t{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Q);return r}getResolvedTitleForRoute(e){return e.data[ci]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>d(Vu),providedIn:"root"})}return t})(),Vu=(()=>{class t extends Fs{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(te(Zc))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xn=new ue("",{factory:()=>({})}),Xn=new ue(""),Fo=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=d(ec);loadComponent(e,r){return fe(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=fe(this,null,function*(){try{let o=yield du(Fe(e,()=>r.loadComponent())),a=yield Gu($u(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a,a}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=fe(this,null,function*(){try{let o=yield Bu(r,this.compiler,e,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bu(t,n,e,r){return fe(this,null,function*(){let i=yield du(Fe(e,()=>t.loadChildren())),o=yield Gu($u(i)),a;o instanceof Wl||Array.isArray(o)?a=o:a=yield n.compileModuleAsync(o),r&&r(t);let s,l,c=!1;return Array.isArray(a)?(l=a,c=!0):(s=a.create(e).injector,l=s.get(Xn,[],{optional:!0,self:!0}).flat()),{routes:l.map(zs),injector:s}})}function Hm(t){return t&&typeof t=="object"&&"default"in t}function $u(t){return Hm(t)?t.default:t}function Gu(t){return fe(this,null,function*(){return t})}var jo=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>d(qm),providedIn:"root"})}return t})(),qm=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),js=new ue(""),Us=new ue("");function Hu(t,n,e){let r=t.get(Us),i=t.get(Ue);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,a=new Promise(c=>{o=c}),s=i.startViewTransition(()=>(o(),Wm(t)));s.ready.catch(c=>{});let{onViewTransitionCreated:l}=r;return l&&Fe(t,()=>l({transition:s,from:n,to:e})),a}function Wm(t){return new Promise(n=>{Nn({read:()=>setTimeout(n)},{injector:t})})}var Xm=()=>{},Vs=new ue(""),Uo=(()=>{class t{currentNavigation=P(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=P(null);events=new qt;transitionAbortWithErrorSubject=new qt;configLoader=d(Fo);environmentInjector=d(Ot);destroyRef=d(Xa);urlSerializer=d(Hn);rootContexts=d(qn);location=d(sr);inputBindingEnabled=d(ui,{optional:!0})!==null;titleStrategy=d(Fs);options=d(xn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=d(jo);createViewTransition=d(js,{optional:!0});navigationErrorHandler=d(Vs,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Do(i)),r=i=>this.events.next(new To(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;It(()=>{this.transitions?.next(ve(I({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(e){return this.transitions=new ze(null),this.transitions.pipe(gt(r=>r!==null),st(r=>{let i=!1,o=new AbortController;return W(r).pipe(st(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ve.SupersededByNewNavigation),Wt;this.currentTransition=r;let s=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:s?ve(I({},s),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&c!=="reload")return this.events.next(new jt(a.id,this.urlSerializer.serialize(a.rawUrl),"",yr.IgnoredSameUrlNavigation)),a.resolve(!1),Wt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return W(a).pipe(st(u=>(this.events.next(new bn(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Wt:Promise.resolve(u))),Um(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let p=new ii(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:u,extractedUrl:p,source:h,restoredState:m,extras:T}=a,x=new bn(u,this.urlSerializer.serialize(p),h,m);this.events.next(x);let y=Du(this.rootComponentType).snapshot;return this.currentTransition=r=ve(I({},a),{targetSnapshot:y,urlAfterRedirects:p,extras:ve(I({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(v=>(v.finalUrl=p,v)),W(r)}else return this.events.next(new jt(a.id,this.urlSerializer.serialize(a.extractedUrl),"",yr.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Wt}),qe(a=>{let s=new Co(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),we(a=>(this.currentTransition=r=ve(I({},a),{guards:tm(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),pm(this.environmentInjector,a=>this.events.next(a)),qe(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Po(this.urlSerializer,a.guardsResult);let s=new bo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(s)}),gt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Ve.GuardRejected),!1)),Cs(a=>{if(a.guards.canActivateChecks.length!==0)return W(a).pipe(qe(s=>{let l=new xo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),st(s=>{let l=!1;return W(s).pipe(Vm(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(s,"",Ve.NoDataFromResolver)}}))}),qe(s=>{let l=new So(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}))}),Cs(a=>{let s=c=>{let u=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let p=Dr(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(p,c.routeConfig).then(h=>{c.component=h}))}for(let p of c.children)u.push(...s(p));return u},l=s(a.targetSnapshot.root);return l.length===0?W(a):He(Promise.all(l).then(()=>a))}),Cs(()=>this.afterPreactivation()),st(()=>{let{currentSnapshot:a,targetSnapshot:s}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,s.root);return l?He(l).pipe(we(()=>r)):W(r)}),we(a=>{let s=Yh(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=ve(I({},a),{targetRouterState:s}),this.currentNavigation.update(l=>(l.targetRouterState=s,l)),r}),qe(()=>{this.events.next(new oi)}),em(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),rr(1),an(Nu(o.signal).pipe(gt(()=>!i&&!r.targetRouterState),qe(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ve.Aborted)}))),qe({next:a=>{i=!0,this.currentNavigation.update(s=>(s.abort=Xm,s)),this.lastSuccessfulNavigation.set(It(this.currentNavigation)),this.events.next(new at(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),an(this.transitionAbortWithErrorSubject.pipe(qe(a=>{throw a}))),Fi(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ve.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),zi(a=>{if(this.destroyed)return r.resolve(!1),Wt;if(i=!0,ku(a))this.events.next(new Ft(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Zh(a)?this.events.next(new br(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let s=new wr(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=Fe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(l instanceof xr){let{message:c,cancellationCode:u}=Po(this.urlSerializer,l);this.events.next(new Ft(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new br(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(s),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Wt}))}))}cancelNavigationTransition(e,r,i){let o=new Ft(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=It(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qm(t){return t!==vr}var qu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>d(Ym),providedIn:"root"})}return t})(),Lo=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},Ym=(()=>{class t extends Lo{static \u0275fac=(()=>{let e;return function(i){return(e||(e=or(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bs=(()=>{class t{urlSerializer=d(Hn);options=d(xn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=d(sr);urlHandlingStrategy=d(jo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new St;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,a=i??o;return a instanceof St?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=Du(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>d(Wu),providedIn:"root"})}return t})(),Wu=(()=>{class t extends Bs{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof bn?this.updateStateMemento():e instanceof jt?this.commitTransition(r):e instanceof ii?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof oi?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Ft&&e.code!==Ve.SupersededByNewNavigation&&e.code!==Ve.Redirect?this.restoreHistory(r):e instanceof wr?this.restoreHistory(r,!0):e instanceof at&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(e)||o){let s=this.browserPageId,l=I(I({},a),this.generateNgRouterState(i,s));this.location.replaceState(e,"",l)}else{let s=I(I({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=or(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vo(t,n){t.events.pipe(gt(e=>e instanceof at||e instanceof Ft||e instanceof wr||e instanceof jt),we(e=>e instanceof at||e instanceof jt?0:(e instanceof Ft?e.code===Ve.Redirect||e.code===Ve.SupersededByNewNavigation:!1)?2:1),gt(e=>e!==2),rr(1)).subscribe(()=>{n()})}var Km={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=d(Ql);stateManager=d(Bs);options=d(xn,{optional:!0})||{};pendingTasks=d(Al);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=d(Uo);urlSerializer=d(Hn);location=d(sr);urlHandlingStrategy=d(jo);injector=d(Ot);_events=new qt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=d(qu);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=d(Xn,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!d(ui,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Dl;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=It(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ft&&r.code!==Ve.Redirect&&r.code!==Ve.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof at)this.navigated=!0;else if(r instanceof br){let a=r.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=I({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Qm(i.source)},a);this.scheduleNavigation(s,vr,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qh(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=I({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,r,a,o).catch(l=>{this.disposed||this.injector.get(ji)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return It(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(zs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:a,u=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":u=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let p;try{let h=i?i.snapshot:this.routerState.snapshot.root;p=Cu(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return bu(p,e,u,c??null,this.urlSerializer)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Cn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,vr,null,r)}navigate(e,r={skipLocationChange:!1}){return Zm(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(qa(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=I({},Km):r===!1?i=I({},Jm):i=r,Cn(e))return eu(this.currentUrlTree,e,i);let o=this.parseUrl(e);return eu(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,c;a?(s=a.resolve,l=a.reject,c=a.promise):c=new Promise((p,h)=>{s=p,l=h});let u=this.pendingTasks.add();return Vo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zm(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new he(4008,!1)}var Er=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=P(null);get href(){return It(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qt;applicationErrorHandler=d(ji);options=d(xn,{optional:!0});constructor(e,r,i,o,a,s){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=s,this.reactiveHref.set(d(new qi("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof at&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Cn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(e!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Cn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(We(dt),We(Ut),Fl("tabindex"),We(Ja),We(_t),We(qr))};static \u0275dir=_e({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&k("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Jl("href",i.reactiveHref(),Bl)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bt],replaceUrl:[2,"replaceUrl","replaceUrl",bt],routerLink:"routerLink"},features:[Xt]})}return t})(),Gs=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new vt;link=d(Er,{optional:!0});constructor(e,r,i,o){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof at&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(Fr()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=He(e).pipe(Fr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=eg(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(We(dt),We(_t),We(Ja),We(fn))};static \u0275dir=_e({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Ze(o,Er,5),r&2){let a;et(a=tt())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Xt]})}return t})();function eg(t){return!!t.paths}var pi=class{};var Qu=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,o){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gt(e=>e instanceof at),kn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=$i(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return He(i).pipe(Fr())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=He(this.loader.loadChildren(e,r)):i=W(null);let o=i.pipe(Mt(a=>a===null?W(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(e,r);return He([o,a]).pipe(Fr())}else return o})}static \u0275fac=function(r){return new(r||t)(te(dt),te(Ot),te(pi),te(Fo))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yu=new ue(""),tg=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=vr;restoredId=0;store={};constructor(e,r,i,o,a={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof at?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof jt&&e.code===yr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof Cr))return;let r={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,r):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>fe(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Cr(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){ql()};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();function Hs(t,...n){return jr([{provide:Xn,multi:!0,useValue:t},[],{provide:Ut,useFactory:Ku},{provide:es,multi:!0,useFactory:Ju},n.map(e=>e.\u0275providers)])}function Ku(){return d(dt).routerState.root}function fi(t,n){return{\u0275kind:t,\u0275providers:n}}function Ju(){let t=d(kt);return n=>{let e=t.get(Kl);if(n!==e.components[0])return;let r=t.get(dt),i=t.get(Zu);t.get(qs)===1&&r.initialNavigation(),t.get(nd,null,{optional:!0})?.setUpPreloading(),t.get(Yu,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Zu=new ue("",{factory:()=>new qt}),qs=new ue("",{factory:()=>1});function ed(){let t=[{provide:Vl,useValue:!0},{provide:qs,useValue:0},Za(()=>{let n=d(kt);return n.get(ac,Promise.resolve()).then(()=>new Promise(r=>{let i=n.get(dt),o=n.get(Zu);Vo(i,()=>{r(!0)}),n.get(Uo).afterPreactivation=()=>(r(!0),o.closed?W(void 0):o),i.initialNavigation()}))})];return fi(2,t)}function td(){let t=[Za(()=>{d(dt).setUpLocationChangeListener()}),{provide:qs,useValue:2}];return fi(3,t)}var nd=new ue("");function rd(t){return fi(0,[{provide:nd,useExisting:Qu},{provide:pi,useExisting:t}])}function id(){return fi(8,[As,{provide:ui,useExisting:As}])}function od(t){Gl("NgRouterViewTransitions");let n=[{provide:js,useValue:Hu},{provide:Us,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return fi(9,n)}var ad=[sr,{provide:Hn,useClass:Jt},dt,qn,{provide:Ut,useFactory:Ku},Fo,[]],hi=(()=>{class t{constructor(){}static forRoot(e,r){return{ngModule:t,providers:[ad,[],{provide:Xn,multi:!0,useValue:e},[],r?.errorHandler?{provide:Vs,useValue:r.errorHandler}:[],{provide:xn,useValue:r||{}},r?.useHash?rg():ig(),ng(),r?.preloadingStrategy?rd(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?og(r):[],r?.bindToComponentInputs?id().\u0275providers:[],r?.enableViewTransitions?od().\u0275providers:[],ag()]}}static forChild(e){return{ngModule:t,providers:[{provide:Xn,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pn({type:t});static \u0275inj=In({})}return t})();function ng(){return{provide:Yu,useFactory:()=>{let t=d(fc),n=d(ir),e=d(xn),r=d(Uo),i=d(Hn);return e.scrollOffset&&t.setOffset(e.scrollOffset),new tg(i,r,t,n,e)}}}function rg(){return{provide:qr,useClass:lc}}function ig(){return{provide:qr,useClass:sc}}function og(t){return[t.initialNavigation==="disabled"?td().\u0275providers:[],t.initialNavigation==="enabledBlocking"?ed().\u0275providers:[]]}var $s=new ue("");function ag(){return[{provide:$s,useFactory:Ju},{provide:es,multi:!0,useExisting:$s}]}var Bo=class t{dialogRef=d(vn);data=d(_n);close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["LogViewDialog"]],decls:18,vars:11,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"ml-2","message-date"],[1,"ml-2","message-text"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"]],template:function(e,r){e&1&&(ne(0,"div",0)(1,"header")(2,"div",1),b(3),R(4,"translate"),oe()(),ne(5,"div",2)(6,"p",3),b(7),R(8,"date"),oe(),ne(9,"p",4),b(10),oe()(),ne(11,"footer")(12,"div",5),cn(13,"div",6),ne(14,"div",7)(15,"button",8),ke("click",function(){return r.close()}),b(16),R(17,"translate"),oe()()()()()),e&2&&(f(3),M(O(4,4,"EVENT_DETAILS")),f(4),M(rt(8,6,r.data.date,"HH:mm:ss")),f(3),M(r.data.message),f(6),M(O(17,9,"CLOSE")))},dependencies:[se,pe,Wi],encapsulation:2})};var sg=t=>({level:t});function lg(t,n){t&1&&X(0,"div",21)(1,"div",22)(2,"div",22)(3,"div",22)}function cg(t,n){t&1&&X(0,"div",23)(1,"div",22)(2,"div",22)(3,"div",22)}function ug(t,n){t&1&&X(0,"div",24)(1,"div",24)(2,"div",24)(3,"div",22)}function dg(t,n){t&1&&X(0,"div",25)(1,"div",25)(2,"div",25)(3,"div",25)}function pg(t,n){if(t&1){let e=K();g(0,"div",15),k("click",function(){let i=j(e).$implicit,o=S();return U(o.openLog(i))}),g(1,"div",16)(2,"div",17)(3,"div",18),G(4,lg,4,0)(5,cg,4,0)(6,ug,4,0)(7,dg,4,0),_()()(),g(8,"p",19),b(9),R(10,"date"),_(),g(11,"p",20),b(12),_()()}if(t&2){let e,r=n.$implicit;f(4),H((e=r.level)==="debug"?4:e==="info"?5:e==="warning"?6:e==="error"?7:-1),f(5),M(rt(10,3,r.date,"HH:mm:ss")),f(3),M(r.message)}}var $o=class t{eventStore=d(yc);bridgeService=d(Te);appService=d(ut);settingsService=d(mn);dialog=d(Lt);selectedLevels=P([]);serverOptions=P([]);log_level=P("");logViewOpen=pn(!1);toggleLogView=Pt();logOptions=P([]);constructor(){let n=this.settingsService.getPreference("log_levels");this.selectedLevels.set(n),Ce(()=>{let e=this.bridgeService.bridgeInfo;if(e()!==null){this.log_level.set(e().log_level);let r=this.log_level();r!==""&&(console.log("current",r),this.serverOptions=P([...Ji].map(i=>ve(I({},i),{isSelected:i.value===r}))))}}),Ce(()=>{let e=this.selectedLevels();e?this.logOptions=P([...Ji].map(r=>ve(I({},r),{isSelected:e.indexOf(r.value)>-1}))):this.logOptions=P([...Ji])})}reversedEntries=q(()=>{let n=this.selectedLevels();return console.log(this.eventStore.entities().length),[...this.eventStore.entities()].reverse().filter(e=>n?n.indexOf(e.level)>-1:!0)});toggleView(){this.toggleLogView.emit()}clearLog(){this.eventStore.clear()}changeBridgeLogging(n){let e={advanced:{log_level:n.value}};this.bridgeService.updateOptions({options:e})}logOptionChange(n){let r=n.filter(i=>i.isSelected).map(i=>i.value??"");this.settingsService.setPreference("log_levels",r),this.selectedLevels.set(r)}openLog(n){let e=this.dialog.open(Bo,{height:"400px",width:"600px",data:n})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["LogView"]],inputs:{logViewOpen:[1,"logViewOpen"]},outputs:{logViewOpen:"logViewOpenChange",toggleLogView:"toggleLogView"},decls:22,vars:19,consts:[[1,"logSection-header"],[1,"label"],[1,"flex"],[1,"left",3,"click"],[1,"material-symbols-outlined",3,"title"],[1,"p-1","ml-5","rounded","transition-colors",3,"click"],[1,"material-symbols-outlined","text-base"],[1,"logview-body"],[1,"log_option_panel"],[3,"optionsChanged","title","entities"],[1,"mt-2"],[1,"mt-1",3,"selected","items","title"],[1,"logSection-content","scrollbar"],[1,"logcontent","overflow-y-auto","scrollbar"],[1,"flex","flex-row","items-center","logline","cursor-pointer"],[1,"flex","flex-row","items-center","logline","cursor-pointer",3,"click"],[1,"level","ml-2"],[1,"ll"],[1,"level_container"],[1,"ml-2","message-date"],[1,"ml-2","message-text"],[1,"bar","debug"],[1,"bar"],[1,"bar","info"],[1,"bar","warning"],[1,"bar","error"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"span",1),b(2),_(),g(3,"div",2)(4,"button",3),k("click",function(){return r.clearLog()}),g(5,"span",4),R(6,"translate"),b(7,"delete"),_()(),g(8,"button",5),k("click",function(){return r.toggleView()}),g(9,"span",6),b(10),_()()()(),g(11,"div",7)(12,"div",8)(13,"OptionPanelComponent",9),R(14,"translate"),k("optionsChanged",function(o){return r.logOptionChange(o)}),_(),g(15,"div",10)(16,"DropdownComponent",11),R(17,"translate"),k("selected",function(o){return r.changeBridgeLogging(o)}),_()()(),g(18,"div",12)(19,"div",13),Ee(20,pg,13,6,"div",14,Xe),_()()()),e&2&&(f(2),de("Logs (",r.reversedEntries().length,")"),f(3),N("title",Ie(O(6,10,"CLEAR_LOGS"))),f(5),M(r.logViewOpen()?"expand_more":"expand_less"),f(3),N("title",Ie(O(14,12,"LOG_FILTER")))("entities",r.logOptions()),f(3),N("title",Nt(" ",rt(17,14,"SYSTEM_LOGLEVEL",nt(17,sg,r.log_level()))))("items",r.serverOptions()),f(4),Re(r.reversedEntries()))},dependencies:[se,gn,Sc,Wi,pe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}button[_ngcontent-%COMP%]{border-left:1px solid var(--app-border-color);padding-left:1em}.logview-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;min-height:0;max-height:100%;margin-left:.75rem;overflow:hidden;height:100%}.logSection-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;border-bottom:1px solid var(--app-border-color);background-color:var(--app-background-raised-color);flex-shrink:0}.logSection-content[_ngcontent-%COMP%]{flex:1;min-width:0;min-height:0;max-height:100%;overflow-y:scroll;overflow-x:hidden;position:relative}.logcontent[_ngcontent-%COMP%]{width:100%}.level[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;transition:opacity .25s}.logline[_ngcontent-%COMP%]{margin-top:.5em;border-bottom-width:1px;border-bottom-color:var(--app-border-color);max-width:100%;min-width:0}.ll[_ngcontent-%COMP%]{display:flex;width:100%;z-index:999}.level_container[_ngcontent-%COMP%]{display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;gap:2px}.bar[_ngcontent-%COMP%]{display:flex;width:8px;height:4px;background-color:#282b2f;border-radius:1px}.info[_ngcontent-%COMP%]{background-color:#09ff00}.debug[_ngcontent-%COMP%]{background-color:#fff}.warning[_ngcontent-%COMP%]{background-color:#f2ff00}.error[_ngcontent-%COMP%]{background-color:red}.message-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:0;color:var(--app-text-color)}.message-date[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{color:var(--app-text-color)}.log_option_panel[_ngcontent-%COMP%]{padding-left:1em;padding-right:1em;padding-top:1em;border-right:1px solid;border-right-color:var(--app-border-color);flex-shrink:0}"]})};var fg=["container"],hg=["*"];function mg(t,n){if(t&1){let e=K();ne(0,"div",6),ke("mousedown",function(i){j(e);let o=S();return U(o.startResize(i))}),oe()}}function gg(t,n){if(t&1){let e=K();ne(0,"div",7),ke("mousedown",function(i){j(e);let o=S();return U(o.startResize(i))}),oe()}}function vg(t,n){if(t&1){let e=K();ne(0,"div",8),ke("mousedown",function(i){j(e);let o=S();return U(o.startResize(i))}),oe()}}function _g(t,n){if(t&1){let e=K();ne(0,"div",9),ke("mousedown",function(i){j(e);let o=S();return U(o.startResize(i))}),oe()}}var Go=class t{resizeSide=me("right");storageKey=me.required();defaultSize=me(250);minSize=me(100);maxSize=me(800);containerClass=me();flexBehavior=me(!0);fullHeight=me(!1);sizeChange=Pt();get isFlexMode(){return this.flexBehavior()}get isFullHeightMode(){return this.fullHeight()}containerRef=Yt.required("container");currentSize=this.defaultSize();isResizing=!1;startPos=0;startSize=0;containerStyle="";settingsService=d(mn);constructor(){Ce(()=>{let n=this.settingsService.getPreference(`size_${this.storageKey()}`);n?this.currentSize=parseFloat(n):this.currentSize=this.defaultSize(),this.updateContainerStyle()})}ngAfterViewInit(){this.updateContainerStyle()}ngOnDestroy(){this.removeEventListeners()}updateContainerStyle(){let n=this.resizeSide(),r=n==="top"||n==="bottom"?"height":"width";this.containerStyle=`${r}: ${this.currentSize}px;`,this.sizeChange.emit(this.currentSize)}startResize(n){n.preventDefault(),n.stopPropagation(),this.isResizing=!0,this.startSize=this.currentSize;let e=this.resizeSide();e==="left"||e==="right"?this.startPos=n.clientX:this.startPos=n.clientY,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.body.style.userSelect="none",document.body.style.cursor=e==="left"||e==="right"?"ew-resize":"ns-resize"}onMouseMove=n=>{if(!this.isResizing)return;let e=0,r=this.resizeSide();r==="right"?e=n.clientX-this.startPos:r==="left"?e=this.startPos-n.clientX:r==="bottom"?e=n.clientY-this.startPos:r==="top"&&(e=this.startPos-n.clientY);let i=this.startSize+e;i=Math.max(this.minSize(),Math.min(this.maxSize(),i)),this.currentSize=i,this.updateContainerStyle()};onMouseUp=()=>{this.isResizing&&(this.isResizing=!1,this.removeEventListeners(),document.body.style.userSelect="",document.body.style.cursor="",this.settingsService.setPreference(`size_${this.storageKey()}`,this.currentSize.toString()))};removeEventListeners(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-resizable-container"]],viewQuery:function(e,r){e&1&&Qt(r.containerRef,fg,5),e&2&&dn()},hostVars:4,hostBindings:function(e,r){e&2&&ae("flex-mode",r.isFlexMode)("full-height-mode",r.isFullHeightMode)},inputs:{resizeSide:[1,"resizeSide"],storageKey:[1,"storageKey"],defaultSize:[1,"defaultSize"],minSize:[1,"minSize"],maxSize:[1,"maxSize"],containerClass:[1,"containerClass"],flexBehavior:[1,"flexBehavior"],fullHeight:[1,"fullHeight"]},outputs:{sizeChange:"sizeChange"},ngContentSelectors:hg,decls:8,vars:13,consts:[["container",""],[1,"resize-handle","resize-handle-top"],[1,"resize-handle","resize-handle-left"],[1,"resizable-content"],[1,"resize-handle","resize-handle-right"],[1,"resize-handle","resize-handle-bottom"],[1,"resize-handle","resize-handle-top",3,"mousedown"],[1,"resize-handle","resize-handle-left",3,"mousedown"],[1,"resize-handle","resize-handle-right",3,"mousedown"],[1,"resize-handle","resize-handle-bottom",3,"mousedown"]],template:function(e,r){e&1&&(un(),ne(0,"div",null,0),G(2,mg,1,0,"div",1),G(3,gg,1,0,"div",2),ne(4,"div",3),Ct(5),oe(),G(6,vg,1,0,"div",4),G(7,_g,1,0,"div",5),oe()),e&2&&(Zl(r.containerStyle),$r(Nt("resizable-container ",r.containerClass())),ae("flex-host",r.flexBehavior()),f(2),H(r.resizeSide()==="top"?2:-1),f(),H(r.resizeSide()==="left"?3:-1),f(),ae("flex-content",r.flexBehavior()),f(2),H(r.resizeSide()==="right"?6:-1),f(),H(r.resizeSide()==="bottom"?7:-1))},styles:["[_nghost-%COMP%]{display:block;border:none}.flex-mode[_nghost-%COMP%]{display:flex;flex-direction:column;border:none;flex:1}.full-height-mode[_nghost-%COMP%]{border:none;height:100%}.resizable-container[_ngcontent-%COMP%]{position:relative}.full-height-mode[_nghost-%COMP%]   .resizable-container[_ngcontent-%COMP%]{height:100%}.resizable-container.flex-host[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.resizable-content[_ngcontent-%COMP%]{overflow:hidden;min-height:0;min-width:0;display:flex;flex-direction:column;height:100%}.full-height-mode[_nghost-%COMP%]   .resizable-content[_ngcontent-%COMP%]{height:100%}.resizable-content.flex-content[_ngcontent-%COMP%]{flex:1;height:100%}.resize-handle[_ngcontent-%COMP%]{position:absolute;z-index:10;background:transparent;transition:background-color .2s;border-color:var(--app-border-color)}.resize-handle[_ngcontent-%COMP%]:after{border-color:var(--app-border-color)}.resize-handle[_ngcontent-%COMP%]:hover{background-color:#3b82f64d}.resize-handle[_ngcontent-%COMP%]:active{background-color:#3b82f680}.resize-handle-top[_ngcontent-%COMP%], .resize-handle-bottom[_ngcontent-%COMP%]{left:0;right:0;height:8px;cursor:ns-resize}.resize-handle-top[_ngcontent-%COMP%]{top:0}.resize-handle-bottom[_ngcontent-%COMP%]{bottom:0}.resize-handle-left[_ngcontent-%COMP%], .resize-handle-right[_ngcontent-%COMP%]{top:0;bottom:0;width:8px;cursor:ew-resize}.resize-handle-left[_ngcontent-%COMP%]{left:0}.resize-handle-right[_ngcontent-%COMP%]{right:0}"]})};function yg(t,n){if(t&1&&(g(0,"div",2),b(1),R(2,"translate"),_()),t&2){let e=S();f(),M(O(2,1,e.dialogData.message))}}function wg(t,n){if(t&1){let e=K();g(0,"div",5)(1,"div",14),b(2),_(),g(3,"div",28),b(4),_(),g(5,"div",14)(6,"a",29),k("click",function(){let i=j(e).$implicit,o=S();return U(o.connect(i))}),b(7),R(8,"translate"),_()(),g(9,"div",14)(10,"a",29),k("click",function(){let i=j(e).$implicit,o=S();return U(o.edit(i))}),b(11),R(12,"translate"),_()()()}if(t&2){let e=n.$implicit;f(2),M(e.name),f(2),M(e.host),f(3),M(O(8,4,"CONNECT")),f(4),M(O(12,6,"EDIT"))}}var Ho=class t{translate=d(ct);dialogRef=d(vn);dialogData=d(_n);tokenService=d(vc);host=pn("");port=pn(8080);secure=pn(!1);name=pn("localhost");token=pn();selectedId=crypto.randomUUID();isSecure=q(()=>({label:"",value:"true",isActive:this.secure()===!0}));save(){return fe(this,null,function*(){let n;this.token()&&(n=yield this.tokenService.encryptToken(this.token()));let e={id:this.selectedId,name:this.name(),host:this.host(),port:this.port(),secure:this.secure()??!1,token:n};this.dialogRef.close(ve(I({},this.dialogData),{newServer:e}))})}changeHost(n){this.host.set(n.target.value)}changePort(n){this.port.set(n.target.value)}changeName(n){this.name.set(n.target.value)}changeIsSecure(n){this.secure.set(n.isActive)}changeToken(n){this.token.set(n.target.value)}cancel(){this.dialogRef.close()}connect(n){return fe(this,null,function*(){this.dialogRef.close(ve(I({},this.dialogData),{newServer:n}))})}edit(n){return fe(this,null,function*(){if(this.host.set(n.host),this.port.set(n.port),this.name.set(n.name),this.secure.set(n.secure),this.selectedId=n.id??crypto.randomUUID(),n.token){let e=yield this.tokenService.decryptToken(n.token);console.log(n.token,e),this.token.set(e)}else this.token.set("")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["ChooseServerDialog"]],inputs:{host:[1,"host"],port:[1,"port"],secure:[1,"secure"],name:[1,"name"],token:[1,"token"]},outputs:{host:"hostChange",port:"portChange",secure:"secureChange",name:"nameChange",token:"tokenChange"},decls:66,vars:45,consts:[[1,"modal"],[1,"title"],[1,"framed"],[1,"message","mb-5"],[1,"container"],[1,"row","serverline","min-h-7"],[1,"row"],[1,"col-full"],["for","input_newServerName"],[1,"input-container"],["id","input_newServerName",1,"w-full","text-left",3,"change","value"],[1,"col-60"],["for","input_newHost"],["id","input_newHost",1,"w-full","text-left",3,"change","value"],[1,"col-20"],["for","input_newPort"],["id","input_newPort",1,"w-full","text-left",3,"change","value"],["for","input_newSecure"],["id","input_newSecure",1,"w-full","text-left","panel",3,"changed","active","item"],[2,"min-width","30px",3,"message"],["for","input_token"],["id","input_token",1,"w-full","text-left",3,"change","value"],[1,"col-40","align-middle","mt-10","mb-auto"],[1,"button-link","left","cursor-pointer","pl-8",3,"click"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"],[1,"col-40"],[1,"button-link","left","cursor-pointer",3,"click"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"header")(2,"div",1),b(3),R(4,"translate"),_()(),G(5,yg,3,3,"div",2),g(6,"div",2)(7,"div",3)(8,"span"),b(9),R(10,"translate"),_()(),g(11,"div",4),Ee(12,wg,13,8,"div",5,Xe),_()(),g(14,"div",2)(15,"div",4),b(16),R(17,"translate"),g(18,"div",6)(19,"div",7)(20,"label",8),b(21),R(22,"translate"),_(),g(23,"div",9)(24,"input",10),k("change",function(o){return r.changeName(o)}),_()()()(),g(25,"div",6)(26,"div",11)(27,"label",12),b(28),R(29,"translate"),_(),g(30,"div",9)(31,"input",13),k("change",function(o){return r.changeHost(o)}),_()()(),g(32,"div",14)(33,"label",15),b(34),R(35,"translate"),_(),g(36,"div",9)(37,"input",16),k("change",function(o){return r.changePort(o)}),_()()(),g(38,"div",14)(39,"label",17),b(40),R(41,"translate"),_(),g(42,"div",9)(43,"OptionComponent",18),k("changed",function(o){return r.changeIsSecure(o)}),_(),X(44,"InfoOverlayComponent",19),R(45,"translate"),_()()(),g(46,"div",6)(47,"div",11)(48,"label",20),b(49),R(50,"translate"),_(),g(51,"div",9)(52,"input",21),k("change",function(o){return r.changeToken(o)}),_(),X(53,"InfoOverlayComponent",19),R(54,"translate"),_()(),g(55,"div",22)(56,"a",23),k("click",function(){return r.save()}),b(57),R(58,"translate"),_()()()()(),g(59,"footer")(60,"div",24),X(61,"div",25),g(62,"div",26)(63,"button",27),k("click",function(){return r.cancel()}),b(64),R(65,"translate"),_()()()()()),e&2&&(f(3),M(O(4,21,"CHOOSE_SERVER_TITLE")),f(2),H(r.dialogData.message!=""?5:-1),f(4),M(O(10,23,"CHOOSE_SERVER_MESSAGE")),f(3),Re(r.dialogData.knownServer),f(4),de(" ",O(17,25,"NEW_SERVER")," "),f(5),M(O(22,27,"NAME")),f(3),N("value",r.name()),f(4),M(O(29,29,"HOST")),f(3),N("value",r.host()),f(3),M(O(35,31,"PORT")),f(3),N("value",r.port()),f(3),M(O(41,33,"IS_SECURE")),f(3),N("active",!0)("item",r.isSecure()),f(),N("message",Ie(O(45,35,"IS_SECURE_DESCRIPTION"))),f(5),M(O(50,37,"TOKEN")),f(3),N("value",r.token()??""),f(),N("message",Ie(O(54,39,"TOKEN_DESCRIPTION"))),f(4),M(O(58,41,"SAVE")),f(7),M(O(65,43,"CANACEL")))},dependencies:[se,Dc,Tc,pe],styles:["label[_ngcontent-%COMP%]{width:20%;height:32px;line-height:32px}.container[_ngcontent-%COMP%]{padding:2px 20px 10px!important}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.col[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px}.col-full[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:100%}.col-50[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:50%}.col-10[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:10%}.col-20[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:20%}.col-30[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:30%}.col-40[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:40%}.col-60[_ngcontent-%COMP%]{flex:0 0 auto;padding:1px;width:60%}button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}.framed[_ngcontent-%COMP%]{margin:20px;padding:20px;border-radius:4px;border:1px solid var(--app-border-color)}.serverline[_ngcontent-%COMP%]{border-bottom:1px solid var(--app-border-color)}"]})};var ld=(t,n)=>n.id;function Cg(t,n){t&1&&lt(0,10)}function bg(t,n){if(t&1&&(g(0,"div",7),wt(1,Cg,1,0,"ng-container",9),_()),t&2){let e=S().$implicit;f(),N("ngComponentOutlet",e.iconComponent)("ngComponentOutletInputs",e.iconData)}}function xg(t,n){if(t&1&&(g(0,"span",8),b(1),_()),t&2){let e=S().$implicit;f(),M(e.label)}}function Sg(t,n){if(t&1){let e=K();g(0,"div",6),k("click",function(){let i=j(e).$implicit,o=S(2);return U(o.tabManager.switchToTab(i.id))}),G(1,bg,2,2,"div",7)(2,xg,2,1,"span",8),_()}if(t&2){let e=n.$implicit,r=S(2);ae("active",r.tabManager.activeId()===e.id),f(),H(e.iconComponent?1:2)}}function Dg(t,n){t&1&&lt(0)}function Tg(t,n){if(t&1&&(g(0,"div",11),wt(1,Dg,1,0,"ng-container",12),_()),t&2){let e=n.$implicit,r=S(2);ae("active",e.id===r.tabManager.activeId()),f(),N("ngComponentOutlet",e.component)("ngComponentOutletInputs",e.data)}}function Eg(t,n){if(t&1&&(g(0,"div",2),Ee(1,Sg,3,3,"div",3,ld),_(),g(3,"div",4),Ee(4,Tg,2,4,"div",5,ld),_()),t&2){let e=S();f(),Re(e.tabManager.allTabs()),f(3),Re(e.tabManager.allTabs())}}function Rg(t,n){t&1&&(g(0,"div",1)(1,"p"),b(2,"No tabs open. Select an object to view its properties."),_()())}var qo=class t{tabManager=d(Qe);constructor(){Ce(()=>{let n=this.tabManager.activeTab();console.log(n)})}closeTab(n,e){n.stopPropagation(),this.tabManager.closeTab(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["TabContainerComponent"]],decls:3,vars:1,consts:[[1,"tab-container"],[1,"empty-state"],[1,"tab-header"],[1,"tab-button",3,"active"],[1,"tab-content","scrollbar"],[1,"tab-pane","scrollbar",3,"active"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tabIcon",4,"ngComponentOutlet","ngComponentOutletInputs"],[1,"tabIcon"],[1,"tab-pane","scrollbar"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(e,r){e&1&&(g(0,"div",0),G(1,Eg,6,0)(2,Rg,3,0,"div",1),_()),e&2&&(f(),H(r.tabManager.allTabs().length>0?1:2))},dependencies:[Wr,uc],styles:[".tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100vh;background-color:transparent;border-left:2px solid var(--tab-header-border-color)}.tab-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid var(--tab-header-border-color);border-bottom:1px solid var(--tab-header-border-color);border-right:1px solid var(--tab-background-color);background-color:var(--tab-background-color, var(--app-background-raised-color));overflow-y:auto;overflow-x:hidden;min-width:60px;max-width:60px;position:absolute;left:-60px;z-index:100;filter:drop-shadow(-5px 5px 5px var(--tab-header-shadow-color))}.tab-header[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.tab-header[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#bbb;border-radius:3px}.tab-button[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid var(--tab-header-border-color);align-items:center;gap:8px;padding:5px;background-color:var(--tab-background-color, var(--app-background-raised-color));cursor:pointer;font-size:14px;color:var(--app-text-color);transition:all .2s ease;position:relative;white-space:nowrap;text-align:left}.tab-button[_ngcontent-%COMP%]:hover{background-color:var(--tab-background-color, var(--app-background-raised-color));color:var(--app-text-color)}.tab-button.active[_ngcontent-%COMP%]{cursor:pointer;background-color:var(--tab-selected-background-color);font-weight:500}.tabIcon[_ngcontent-%COMP%]{padding-left:10px}.tab-icon[_ngcontent-%COMP%]{max-width:30px;margin:auto}.tab-label[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;text-align:left}.tab-content[_ngcontent-%COMP%]{flex:1;padding:0;background-color:transparent;overflow:hidden;overflow-y:auto;height:100vh;display:flex}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:transparent;font-size:16px}.tab-pane[_ngcontent-%COMP%]{position:absolute;inset:0;padding:0;overflow:auto;display:none;flex:1}.tab-pane.active[_ngcontent-%COMP%]{display:flex}"]})};var Wo=class t{constructor(n){this.http=n;this.initializeVersion()}versionSignal=P("0.0.0");initializeVersion(){return fe(this,null,function*(){try{let n=yield Ml(this.http.get("/version.json"));this.versionSignal.set(n.version)}catch(n){console.warn("Failed to load version.json:",n),this.versionSignal.set("0.0.0")}})}getVersion(){return this.versionSignal}static \u0275fac=function(e){return new(e||t)(te(hr))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};var Xo=class t{versionService=d(Wo);version=this.versionService.getVersion();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["VersionDisplayComponent"]],decls:2,vars:1,consts:[[1,"text-xs","text-gray-500","dark:text-gray-400"]],template:function(e,r){e&1&&(ne(0,"div",0),b(1),oe()),e&2&&(f(),de("Dashboard v",r.version()))},encapsulation:2})};function Mg(t,n){if(t&1&&(g(0,"span"),b(1),R(2,"translate"),_()),t&2){let e=S(2).$implicit;f(),M(O(2,1,e.label))}}function Og(t,n){if(t&1){let e=K();g(0,"a",3),k("click",function(){j(e);let i=S().$implicit,o=S();return U(o.run(i.func))}),g(1,"span",4),b(2),_(),G(3,Mg,3,3,"span"),_()}if(t&2){let e=S().$implicit,r=S();f(2),M(e.icon),f(),H(r.open()?3:-1)}}function kg(t,n){if(t&1&&(g(0,"span"),b(1),R(2,"translate"),_()),t&2){let e=S(2).$implicit;f(),M(O(2,1,e.label))}}function Ig(t,n){if(t&1&&(g(0,"a",2)(1,"span",4),b(2),_(),G(3,kg,3,3,"span"),_()),t&2){let e=S().$implicit,r=S();N("routerLink",e.link),f(2),M(e.icon),f(),H(r.open()?3:-1)}}function Ng(t,n){if(t&1&&G(0,Og,4,2,"a",1)(1,Ig,4,3,"a",2),t&2){let e=n.$implicit;H(e.func?0:1)}}var cd=[{link:"/dashboard",icon:"dashboard",label:"DASHBOARD"},{link:"/devices",icon:"router",label:"DEVICES"},{link:"/groups",icon:"group_work",label:"GROUPS"},{link:"/network",icon:"network_node",label:"NETWORK"}],Pg={link:"#",func:"restart",icon:"reset_settings",label:"RESTART"},Qo=class t{open=me.required();menuItems=q(()=>this.bs.bridgeInfo()&&this.bs.bridgeInfo()?.restart_required===!0?[...cd,Pg]:cd);bs=d(Te);run(n){n==="restart"&&this.bs.requestRestart()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["AppMenuComponent"]],inputs:{open:[1,"open"]},decls:3,vars:0,consts:[[1,"mt-4"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors"],["routerLinkActive","selected text-white",1,"flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"routerLink"],[1,"cursor-pointer","flex","items-center","gap-2","px-4","py-2","hover:bg-gray-200","dark:hover:bg-gray-700","transition-colors",3,"click"],[1,"material-symbols-outlined"]],template:function(e,r){e&1&&(g(0,"nav",0),Ee(1,Ng,2,1,null,null,Xe),_()),e&2&&(f(),Re(r.menuItems()))},dependencies:[se,hi,Er,Gs,pe],encapsulation:2})};function Ag(t,n){if(t&1){let e=K();g(0,"app-resizable-container",14),k("sizeChange",function(i){j(e);let o=S();return U(o.leftSidebarWidth.set(i))}),g(1,"aside",15)(2,"div",16)(3,"span",17),b(4),R(5,"translate"),_(),g(6,"button",18),k("click",function(){j(e);let i=S();return U(i.toggleSidebar())}),Ur(),g(7,"svg",19),X(8,"path",20),_()()(),Wa(),X(9,"AppMenuComponent",21),_()()}t&2&&(N("defaultSize",256)("fullHeight",!0)("minSize",200)("maxSize",400)("flexBehavior",!1),f(4),M(O(5,7,"APP_TITLE")),f(5),N("open",!0))}function Lg(t,n){if(t&1){let e=K();g(0,"aside",3)(1,"div",16)(2,"button",18),k("click",function(){j(e);let i=S();return U(i.toggleSidebar())}),Ur(),g(3,"svg",19),X(4,"path",20),_()()(),Wa(),X(5,"AppMenuComponent",21),_()}t&2&&(f(5),N("open",!1))}function zg(t,n){if(t&1){let e=K();g(0,"app-resizable-container",10)(1,"LogView",22),k("toggleLogView",function(){j(e);let i=S();return U(i.toggleLogView())}),_()()}if(t&2){let e=S();N("defaultSize",250)("minSize",100)("maxSize",600)("flexBehavior",!1),f(),N("logViewOpen",e.logViewOpen)}}function Fg(t,n){if(t&1){let e=K();g(0,"section",11)(1,"LogView",23),k("toggleLogView",function(){j(e);let i=S();return U(i.toggleLogView())}),_()()}if(t&2){let e=S();f(),N("logViewOpen",e.logViewOpen)}}function jg(t,n){if(t&1){let e=K();g(0,"app-resizable-container",24),k("sizeChange",function(i){j(e);let o=S();return U(o.rightSidebarWidth.set(i))}),g(1,"aside",25),X(2,"TabContainerComponent"),_()()}t&2&&N("defaultSize",450)("minSize",450)("maxSize",800)("flexBehavior",!1)("fullHeight",!0)}var Yo=class t{sidebarOpen=!0;logViewOpen=!0;waitingForConnection=!1;connectionDialogReferecnce;host="localhost";connectionDialogOpen=!1;leftSidebarWidth=P(256);rightSidebarWidth=P(450);deviceStore=d(hn);applicationService=d(ut);bs=d(Te);dialog=d(Lt);tabManager=d(Qe);signalBusService=d(gc);connectionManager=d(_c);settingsService=d(mn);mainTitle=q(()=>this.applicationService.mainTitle());inspector=q(()=>this.applicationService.inspector());connectedHost=q(()=>this.connectionManager.connectedHost());info=q(()=>{let n=this.bs.bridgeInfo;return n()});rightSidebarOpen=q(()=>this.tabManager.numberOfTabs()>0);noSavedConnectionSignal=this.signalBusService.onEvent("connection_error");connectionSignal=this.signalBusService.onEvent("connection_connected");constructor(){Ce(()=>{let n=this.noSavedConnectionSignal();console.log(n),n!==null&&(n.data==="NO_LASTSAVED_CONNECTION"||n.data==="error_connecting")&&(this.openServerDialog(n.data),this.signalBusService.reset("connection_error"))}),Ce(()=>{console.log("WFC",this.connectionSignal()),this.connectionSignal()!==null&&this.connectionDialogReferecnce?.close()})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}toggleLogView(){this.logViewOpen=!this.logViewOpen}closeRightSidebar(){this.deviceStore.setSelectedEntity(null),this.applicationService.inspector=null}openServerDialog(n){if(this.connectionDialogOpen)return;this.connectionDialogOpen=!0;let e=[];try{let i=this.settingsService.getPreference("saved_hosts");i&&Object.keys(i).forEach(o=>{e.push(i[o])})}catch(i){console.error(i)}let r={knownServer:e,message:n};this.connectionDialogReferecnce=this.dialog.open(Ho,{height:"400px",width:"600px",data:r}),this.connectionDialogReferecnce.closed.subscribe(i=>{if(this.connectionDialogOpen=!1,i!==void 0){let o=i;console.log("Try connecting",o.newServer),setTimeout(()=>{this.connectionManager.saveAndConnect(o.newServer)},500)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-layout"]],decls:19,vars:15,consts:[[1,"flex","h-screen","w-screen","dark:bg-unifi-bg","text-gray-900","dark:text-gray-100","layout_root","overflow-hidden"],[1,"left_sidebar_wrapper"],["resizeSide","right","storageKey","leftSidebarWidth",1,"flex-shrink-0",3,"defaultSize","fullHeight","minSize","maxSize","flexBehavior"],[1,"w-16","border-r","flex-shrink-0"],[1,"flex-1","flex","flex-col","min-w-0"],[1,"h-14","border-b","layout_header","flex","items-center","justify-between","px-4","flex-shrink-0"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-4"],[1,"cursor-pointer",3,"click"],[1,"flex-1","bg-gray-50","layout_section","h-full","overflow-hidden","min-h-0","flex","flex-grow"],["resizeSide","top","storageKey","logViewHeight",1,"flex-shrink-0",3,"defaultSize","minSize","maxSize","flexBehavior"],[1,"logSection-closed","flex-shrink-0"],[1,"right_sidebar_wrapper"],["resizeSide","left","storageKey","rightSidebarWidth","containerClass","right_sidebar",1,"flex-shrink-0",3,"defaultSize","minSize","maxSize","flexBehavior","fullHeight"],["resizeSide","right","storageKey","leftSidebarWidth",1,"flex-shrink-0",3,"sizeChange","defaultSize","fullHeight","minSize","maxSize","flexBehavior"],[1,"h-full","border-r"],[1,"flex","items-center","justify-between","p-4"],[1,"text-lg","font-bold","text-unifi-accent"],[1,"p-1","rounded","hover:bg-gray-200","dark:hover:bg-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[3,"open"],[1,"h-full","block",3,"toggleLogView","logViewOpen"],[3,"toggleLogView","logViewOpen"],["resizeSide","left","storageKey","rightSidebarWidth","containerClass","right_sidebar",1,"flex-shrink-0",3,"sizeChange","defaultSize","minSize","maxSize","flexBehavior","fullHeight"],[1,"h-full","border-l","overflow-y-auto","scrollbar","flex","flex-col"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1),G(2,Ag,10,9,"app-resizable-container",2)(3,Lg,6,1,"aside",3),_(),g(4,"main",4)(5,"header",5)(6,"h1",6),b(7),R(8,"translate"),_(),g(9,"div",7)(10,"span",8),k("click",function(){return r.openServerDialog("")}),b(11),_(),X(12,"VersionDisplayComponent"),_()(),g(13,"section",9),X(14,"router-outlet"),_(),G(15,zg,2,5,"app-resizable-container",10)(16,Fg,2,1,"section",11),_(),g(17,"div",12),G(18,jg,3,5,"app-resizable-container",13),_()()),e&2&&(f(),An("width",r.leftSidebarWidth(),"px"),ae("open",r.sidebarOpen),f(),H(r.sidebarOpen?2:3),f(5),de(" ",O(8,13,r.mainTitle())," "),f(4),de(" ",r.connectedHost()??"Connect to a host"," "),f(4),H(r.logViewOpen?15:16),f(2),An("width",r.rightSidebarWidth(),"px"),ae("open",r.rightSidebarOpen()),f(),H(r.rightSidebarOpen()?18:-1))},dependencies:[hi,Wn,se,$o,Go,qo,Xo,Qo,pe],styles:[".visible[_ngcontent-%COMP%]{visibility:visible}.fixed[_ngcontent-%COMP%]{position:fixed}.absolute[_ngcontent-%COMP%]{position:absolute}.m-3[_ngcontent-%COMP%]{margin:.75rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.block[_ngcontent-%COMP%]{display:block}.flex[_ngcontent-%COMP%]{display:flex}.table[_ngcontent-%COMP%]{display:table}.grid[_ngcontent-%COMP%]{display:grid}.contents[_ngcontent-%COMP%]{display:contents}.hidden[_ngcontent-%COMP%]{display:none}.h-14[_ngcontent-%COMP%]{height:3.5rem}.h-5[_ngcontent-%COMP%]{height:1.25rem}.h-full[_ngcontent-%COMP%]{height:100%}.h-screen[_ngcontent-%COMP%]{height:100vh}.min-h-0[_ngcontent-%COMP%]{min-height:0px}.min-h-20[_ngcontent-%COMP%]{min-height:5rem}.min-h-7[_ngcontent-%COMP%]{min-height:1.75rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-1\\/3[_ngcontent-%COMP%]{width:33.333333%}.w-16[_ngcontent-%COMP%]{width:4rem}.w-2\\/3[_ngcontent-%COMP%]{width:66.666667%}.w-5[_ngcontent-%COMP%]{width:1.25rem}.w-full[_ngcontent-%COMP%]{width:100%}.w-screen[_ngcontent-%COMP%]{width:100vw}.min-w-0[_ngcontent-%COMP%]{min-width:0px}.min-w-20[_ngcontent-%COMP%]{min-width:5rem}.max-w-36[_ngcontent-%COMP%]{max-width:9rem}.max-w-7[_ngcontent-%COMP%]{max-width:1.75rem}.flex-1[_ngcontent-%COMP%]{flex:1 1 0%}.flex-shrink-0[_ngcontent-%COMP%]{flex-shrink:0}.flex-grow[_ngcontent-%COMP%], .grow[_ngcontent-%COMP%]{flex-grow:1}.transform[_ngcontent-%COMP%]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.resize[_ngcontent-%COMP%]{resize:both}.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-row[_ngcontent-%COMP%]{flex-direction:row}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.items-center[_ngcontent-%COMP%]{align-items:center}.justify-between[_ngcontent-%COMP%]{justify-content:space-between}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-4[_ngcontent-%COMP%]{gap:1rem}.gap-6[_ngcontent-%COMP%]{gap:1.5rem}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.overflow-y-auto[_ngcontent-%COMP%]{overflow-y:auto}.overflow-x-hidden[_ngcontent-%COMP%]{overflow-x:hidden}.rounded[_ngcontent-%COMP%]{border-radius:.25rem}.rounded-2xl[_ngcontent-%COMP%]{border-radius:1rem}.border[_ngcontent-%COMP%]{border-width:1px}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-l[_ngcontent-%COMP%]{border-left-width:1px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-gray-600[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.bg-blue-500[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-50[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-transparent[_ngcontent-%COMP%]{background-color:transparent}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.pl-1[_ngcontent-%COMP%]{padding-left:.25rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-8[_ngcontent-%COMP%]{padding-left:2rem}.pr-1[_ngcontent-%COMP%]{padding-right:.25rem}.pr-2[_ngcontent-%COMP%]{padding-right:.5rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-middle[_ngcontent-%COMP%]{vertical-align:middle}.text-base[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-gray-400[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-900[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-white[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-70[_ngcontent-%COMP%]{opacity:.7}.shadow[_ngcontent-%COMP%]{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter[_ngcontent-%COMP%]{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}[_nghost-%COMP%]{height:100%;width:100%;background-color:var(--app-background-raised-color)}.layout_root[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);position:relative}aside[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);border-color:var(--app-border-color)}.layout_header[_ngcontent-%COMP%]{background-color:var(--app-header-background-color, --app-background-raised-color);border-color:var(--app-border-color)}.layout_section[_ngcontent-%COMP%]{background-color:var(--app-background-color);border:1px solid;border-color:var(--app-border-color);padding-top:1em}.material-icons[_ngcontent-%COMP%]{font-size:20px}aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.logSection-closed[_ngcontent-%COMP%]{height:50px;overflow:hidden;border-top:1px solid var(--app-border-color);background-color:var(--app-background-raised-color)}.left_sidebar_wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-shrink:0;transition:width .3s ease-out;position:relative;z-index:5}.left_sidebar_wrapper[_ngcontent-%COMP%]:not(.open){width:64px!important}.right_sidebar_wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-shrink:0;min-width:0;overflow:visible;transition:width .3s ease-out;pointer-events:none;position:relative;z-index:10}.right_sidebar_wrapper[_ngcontent-%COMP%]:not(.open){width:0!important}.right_sidebar_wrapper.open[_ngcontent-%COMP%]{pointer-events:auto}.hover\\:bg-gray-200[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}@media(min-width:768px){.md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(min-width:1280px){.xl\\:grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}@media(prefers-color-scheme:dark){.dark\\:text-gray-100[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\\:text-gray-400[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\\:hover\\:bg-gray-700[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}"]})};function Ug(t,n){if(t&1){let e=K();g(0,"div",10)(1,"span",11),k("click",function(){let i=j(e).$implicit,o=S();return U(o.visitDevice(i))}),b(2),_(),X(3,"DeviceFeaturesComponent",12),_()}if(t&2){let e=n.$implicit;f(2),M(e.friendly_name),f(),N("ieee_address",e==null?null:e.ieee_address)}}var Ko=class t{deviceStore=d(hn);bridgeService=d(Te);groupStore=d(At);router=d(dt);tabManager=d(Qe);search=P("");info=q(()=>{let n=this.bridgeService.bridgeInfo;return n()});filteredDevices=q(()=>{let n=this.search(),e=n?n.toLocaleLowerCase():"";return e!==""?this.devicesView().filter(r=>r.ieee_address.toLocaleLowerCase().indexOf(e)>-1||r.friendly_name.toLocaleLowerCase().indexOf(e)>-1):this.devicesView()});applySearch(n){this.search.set(n)}devicesView=q(()=>this.deviceStore.entities().filter(e=>e.type!=="Coordinator").filter(e=>{let r=e.definition.exposes,i=e.state;return Mc(r||[],i||[]).filter(a=>a.validForDashboard).length>0}));visitDevice(n){return fe(this,null,function*(){let{DeviceInspectorComponent:e}=yield import("./chunk-HDDR7ST7.js");n&&this.tabManager.openTab({id:n.ieee_address,label:n.friendly_name,data:{ieee_address:n.ieee_address},component:e,iconComponent:Fn,iconData:{device:n}})})}goToDevices(){this.router.navigate(["devices"])}goToGroups(){this.router.navigate(["groups"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-dashboard"]],decls:25,vars:10,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-6","w-full","ml-3"],[1,"p-6","rounded-2xl","panel","shadow","cursor-pointer",3,"click"],[1,"text-lg","font-semibold","mb-2"],[1,"text-sm","opacity-70"],[1,"p-6","rounded-2xl","panel","shadow"],["target","_blank","href","https://github.com/Koenkk/zigbee2mqtt/releases/",1,"link"],[1,"row","m-3","border","p-3"],[3,"searchChange"],[1,"h-full","flex","flex-col","scrollbar","overflow-y-auto","overflow-x-hidden","pt-2","pr-2","pl-1","mb-4"],[1,"dashboard-grid","ml-2","panel"],[1,"p-2","w-full","flex","flex-col"],[1,"cursor-pointer","text-center","w-full","device_name",3,"click"],["displayMode","dashboard",3,"ieee_address"]],template:function(e,r){if(e&1&&(g(0,"div",0)(1,"div",1),k("click",function(){return r.goToGroups()}),g(2,"h2",2),b(3),R(4,"translate"),_(),g(5,"p",3),b(6),_()(),g(7,"div",1),k("click",function(){return r.goToDevices()}),g(8,"h2",2),b(9),R(10,"translate"),_(),g(11,"p",3),b(12),_()(),g(13,"div",4)(14,"h2",2),b(15),_(),g(16,"p",3)(17,"a",5),b(18),_()()()(),g(19,"div",6)(20,"SearchInput",7),k("searchChange",function(o){return r.applySearch(o)}),_()(),g(21,"div",8)(22,"div",9),Ee(23,Ug,4,2,"div",10,Xe),_()()),e&2){let i,o;f(3),M(O(4,6,"GROUPS")),f(3),M(r.groupStore.entities().length),f(3),M(O(10,8,"DEVICES")),f(3),M(r.deviceStore.entities().length),f(3),de("Version ",(i=r.info())==null?null:i.version),f(3),de("Commit ",(o=r.info())==null?null:o.commit),f(5),Re(r.filteredDevices())}},dependencies:[se,to,lr,pe],styles:[".panel[_ngcontent-%COMP%]{background-color:var(--app-background-raised-color);color:var(--app-text-color);border-color:var(--app-border-color);border-radius:10px;border-width:1px;border-style:solid}[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-x:hidden}.device_name[_ngcontent-%COMP%]{padding-top:2em;background-color:var(--app-panel-color)}.search[_ngcontent-%COMP%]{background-color:var(--app-panel-color)}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:.5rem;width:100%}"]})};var Jo=class{applyChanges(n,e,r,i,o){n.forEachOperation((a,s,l)=>{let c,u;if(a.previousIndex==null){let p=r(a,s,l);c=e.createEmbeddedView(p.templateRef,p.context,p.index),u=cr.INSERTED}else l==null?(e.remove(s),u=cr.REMOVED):(c=e.get(s),e.move(c,l),u=cr.MOVED);o&&o({context:c?.context,operation:u,record:a})})}detach(){}};var Vg=[[["caption"]],[["colgroup"],["col"]],"*"],Bg=["caption","colgroup, col","*"];function $g(t,n){t&1&&Ct(0,2)}function Gg(t,n){t&1&&(g(0,"thead",0),lt(1,1),_(),g(2,"tbody",0),lt(3,2)(4,3),_(),g(5,"tfoot",0),lt(6,4),_())}function Hg(t,n){t&1&&lt(0,1)(1,2)(2,3)(3,4)}var Zt=new ue("CDK_TABLE");var Xs=(()=>{class t{template=d(yt);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkCellDef",""]]})}return t})(),Qs=(()=>{class t{template=d(yt);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkHeaderCellDef",""]]})}return t})(),qg=(()=>{class t{template=d(yt);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkFooterCellDef",""]]})}return t})(),mi=(()=>{class t{_table=d(Zt,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,i,o){if(r&1&&(Ze(o,Xs,5),Ze(o,Qs,5),Ze(o,qg,5)),r&2){let a;et(a=tt())&&(i.cell=a.first),et(a=tt())&&(i.headerCell=a.first),et(a=tt())&&(i.footerCell=a.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",bt],stickyEnd:[2,"stickyEnd","stickyEnd",bt]},features:[Gr([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}])]})}return t})(),ea=class{constructor(n,e){e.nativeElement.classList.add(...n._columnCssClassName)}},fd=(()=>{class t extends ea{constructor(){super(d(mi),d(_t))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[ln]})}return t})();var hd=(()=>{class t extends ea{constructor(){let e=d(mi),r=d(_t);super(e,r);let i=e._table?._getCellRole();i&&r.nativeElement.setAttribute("role",i)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[ln]})}return t})();var Ys=(()=>{class t{template=d(yt);_differs=d(ar);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let r=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof na?e.headerCell.template:this instanceof md?e.footerCell.template:e.cell.template}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,features:[Xt]})}return t})(),na=(()=>{class t extends Ys{_table=d(Zt,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(d(yt),d(ar))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",bt]},features:[ln,Xt]})}return t})(),md=(()=>{class t extends Ys{_table=d(Zt,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(d(yt),d(ar))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",bt]},features:[ln,Xt]})}return t})(),Ks=(()=>{class t extends Ys{_table=d(Zt,{optional:!0});when;constructor(){super(d(yt),d(ar))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[ln]})}return t})(),ta=(()=>{class t{_viewContainer=d(sn);cells;context;static mostRecentCellOutlet=null;constructor(){t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","cdkCellOutlet",""]]})}return t})(),gd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=V({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){r&1&&lt(0,0)},dependencies:[ta],encapsulation:2})}return t})();var vd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=V({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,i){r&1&&lt(0,0)},dependencies:[ta],encapsulation:2})}return t})(),Wg=(()=>{class t{templateRef=d(yt);_contentClassNames=["cdk-no-data-row","cdk-row"];_cellClassNames=["cdk-cell","cdk-no-data-cell"];_cellSelector="td, cdk-cell, [cdk-cell], .cdk-cell";constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["ng-template","cdkNoDataRow",""]]})}return t})(),ud=["top","bottom","left","right"],Ws=class{_isNativeHtmlTable;_stickCellCss;_isBrowser;_needsPositionStickyOnElement;direction;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(n=>this._updateCachedSizes(n)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(n,e,r=!0,i=!0,o,a,s){this._isNativeHtmlTable=n,this._stickCellCss=e,this._isBrowser=r,this._needsPositionStickyOnElement=i,this.direction=o,this._positionListener=a,this._tableInjector=s,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(n,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(n);let r=[];for(let i of n)i.nodeType===i.ELEMENT_NODE&&r.push(i,...Array.from(i.children));Nn({write:()=>{for(let i of r)this._removeStickyStyle(i,e)}},{injector:this._tableInjector})}updateStickyColumns(n,e,r,i=!0,o=!0){if(!n.length||!this._isBrowser||!(e.some(y=>y)||r.some(y=>y))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let a=n[0],s=a.children.length,l=this.direction==="rtl",c=l?"right":"left",u=l?"left":"right",p=e.lastIndexOf(!0),h=r.indexOf(!0),m,T,x;o&&this._updateStickyColumnReplayQueue({rows:[...n],stickyStartStates:[...e],stickyEndStates:[...r]}),Nn({earlyRead:()=>{m=this._getCellWidths(a,i),T=this._getStickyStartColumnPositions(m,e),x=this._getStickyEndColumnPositions(m,r)},write:()=>{for(let y of n)for(let v=0;v<s;v++){let E=y.children[v];e[v]&&this._addStickyStyle(E,c,T[v],v===p),r[v]&&this._addStickyStyle(E,u,x[v],v===h)}this._positionListener&&m.some(y=>!!y)&&(this._positionListener.stickyColumnsUpdated({sizes:p===-1?[]:m.slice(0,p+1).map((y,v)=>e[v]?y:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:h===-1?[]:m.slice(h).map((y,v)=>r[v+h]?y:null).reverse()}))}},{injector:this._tableInjector})}stickRows(n,e,r){if(!this._isBrowser)return;let i=r==="bottom"?n.slice().reverse():n,o=r==="bottom"?e.slice().reverse():e,a=[],s=[],l=[];Nn({earlyRead:()=>{for(let c=0,u=0;c<i.length;c++){if(!o[c])continue;a[c]=u;let p=i[c];l[c]=this._isNativeHtmlTable?Array.from(p.children):[p];let h=this._retrieveElementSize(p).height;u+=h,s[c]=h}},write:()=>{let c=o.lastIndexOf(!0);for(let u=0;u<i.length;u++){if(!o[u])continue;let p=a[u],h=u===c;for(let m of l[u])this._addStickyStyle(m,r,p,h)}r==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:a,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:a,elements:l})}},{injector:this._tableInjector})}updateStickyFooterContainer(n,e){this._isNativeHtmlTable&&Nn({write:()=>{let r=n.querySelector("tfoot");r&&(e.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1))}},{injector:this._tableInjector})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(n,e){if(!n.classList.contains(this._stickCellCss))return;for(let i of e)n.style[i]="",n.classList.remove(this._borderCellCss[i]);ud.some(i=>e.indexOf(i)===-1&&n.style[i])?n.style.zIndex=this._getCalculatedZIndex(n):(n.style.zIndex="",this._needsPositionStickyOnElement&&(n.style.position=""),n.classList.remove(this._stickCellCss))}_addStickyStyle(n,e,r,i){n.classList.add(this._stickCellCss),i&&n.classList.add(this._borderCellCss[e]),n.style[e]=`${r}px`,n.style.zIndex=this._getCalculatedZIndex(n),this._needsPositionStickyOnElement&&(n.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(n){let e={top:100,bottom:10,left:1,right:1},r=0;for(let i of ud)n.style[i]&&(r+=e[i]);return r?`${r}`:""}_getCellWidths(n,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let r=[],i=n.children;for(let o=0;o<i.length;o++){let a=i[o];r.push(this._retrieveElementSize(a).width)}return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(n,e){let r=[],i=0;for(let o=0;o<n.length;o++)e[o]&&(r[o]=i,i+=n[o]);return r}_getStickyEndColumnPositions(n,e){let r=[],i=0;for(let o=n.length;o>0;o--)e[o]&&(r[o]=i,i+=n[o]);return r}_retrieveElementSize(n){let e=this._elemSizeCache.get(n);if(e)return e;let r=n.getBoundingClientRect(),i={width:r.width,height:r.height};return this._resizeObserver&&(this._elemSizeCache.set(n,i),this._resizeObserver.observe(n,{box:"border-box"})),i}_updateStickyColumnReplayQueue(n){this._removeFromStickyColumnReplayQueue(n.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(n)}_removeFromStickyColumnReplayQueue(n){let e=new Set(n);for(let r of this._updatedStickyColumnsParamsToReplay)r.rows=r.rows.filter(i=>!e.has(i));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(r=>!!r.rows.length)}_updateCachedSizes(n){let e=!1;for(let r of n){let i=r.borderBoxSize?.length?{width:r.borderBoxSize[0].inlineSize,height:r.borderBoxSize[0].blockSize}:{width:r.contentRect.width,height:r.contentRect.height};i.width!==this._elemSizeCache.get(r.target)?.width&&Xg(r.target)&&(e=!0),this._elemSizeCache.set(r.target,i)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let r of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(r.rows,r.stickyStartStates,r.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}};function Xg(t){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(n=>t.classList.contains(n))}var dd=new ue("CDK_SPL");var Qg=(()=>{class t{viewContainer=d(sn);elementRef=d(_t);constructor(){let e=d(Zt);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","rowOutlet",""]]})}return t})(),Yg=(()=>{class t{viewContainer=d(sn);elementRef=d(_t);constructor(){let e=d(Zt);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","headerRowOutlet",""]]})}return t})(),Kg=(()=>{class t{viewContainer=d(sn);elementRef=d(_t);constructor(){let e=d(Zt);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","footerRowOutlet",""]]})}return t})(),Jg=(()=>{class t{viewContainer=d(sn);elementRef=d(_t);constructor(){let e=d(Zt);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_e({type:t,selectors:[["","noDataRowOutlet",""]]})}return t})(),_d=(()=>{class t{_differs=d(ar);_changeDetectorRef=d(fn);_elementRef=d(_t);_dir=d(Cc,{optional:!0});_platform=d(wc);_viewRepeater=d(is);_viewportRuler=d(bc);_stickyPositioningListener=d(dd,{optional:!0,skipSelf:!0});_document=d(Ue);_data;_onDestroy=new qt;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new vt;viewChange=new ze({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=d(kt);constructor(){d(new qi("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((r,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(an(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Ki(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,r,(i,o,a)=>this._getEmbeddedViewArgs(i.item,a),i=>i.item.data,i=>{i.operation===cr.INSERTED&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);o.context.$implicit=i.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let i=pd(this._headerRowOutlet,"thead");i&&(i.style.display=e.length?"":"none")}let r=this._headerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,r,"top"),this._headerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let i=pd(this._footerRowOutlet,"tfoot");i&&(i.style.display=e.length?"":"none")}let r=this._footerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,a)=>{this._addStickyColumnStyles([o],this._headerRowDefs[a])}),this._rowDefs.forEach(o=>{let a=[];for(let s=0;s<r.length;s++)this._renderRows[s].rowDef===o&&a.push(r[s]);this._addStickyColumnStyles(a,o)}),i.forEach((o,a)=>{this._addStickyColumnStyles([o],this._footerRowDefs[a])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],r=this._cachedRenderRowsMap;if(this._cachedRenderRowsMap=new Map,!this._data)return e;for(let i=0;i<this._data.length;i++){let o=this._data[i],a=this._getRenderRowsForData(o,i,r.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let s=0;s<a.length;s++){let l=a[s],c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,r,i){return this._getRowDefs(e,r).map(a=>{let s=i&&i.has(a)?i.get(a):[];if(s.length){let l=s.shift();return l.dataIndex=r,l}else return{data:e,rowDef:a,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Zo(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=Zo(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Zo(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Zo(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(r=>!r.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(a,s)=>{let l=!!s.getColumnsDiff();return a||l},r=this._rowDefs.reduce(e,!1);r&&this._forceRenderDataRows();let i=this._headerRowDefs.reduce(e,!1);i&&this._forceRenderHeaderRows();let o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),r||i||o}_switchDataSource(e){this._data=[],Ki(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Ki(this.dataSource)?e=this.dataSource.connect(this):zr(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=W(this.dataSource)),this._renderChangeSubscription=e.pipe(an(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,r)=>this._renderRow(this._headerRowOutlet,e,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,r)=>this._renderRow(this._footerRowOutlet,e,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,r){let i=Array.from(r?.columns||[]).map(s=>{let l=this._columnDefsByName.get(s);return l}),o=i.map(s=>s.sticky),a=i.map(s=>s.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,a,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let r=[];for(let i=0;i<e.viewContainer.length;i++){let o=e.viewContainer.get(i);r.push(o.rootNodes[0])}return r}_getRowDefs(e,r){if(this._rowDefs.length==1)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(o=>!o.when||o.when(r,e));else{let o=this._rowDefs.find(a=>a.when&&a.when(r,e))||this._defaultRowDef;o&&i.push(o)}return i.length,i}_getEmbeddedViewArgs(e,r){let i=e.rowDef,o={$implicit:e.data};return{templateRef:i.template,context:o,index:r}}_renderRow(e,r,i,o={}){let a=e.viewContainer.createEmbeddedView(r.template,o,i);return this._renderCellTemplateForItem(r,o),a}_renderCellTemplateForItem(e,r){for(let i of this._getCellTemplates(e))ta.mostRecentCellOutlet&&ta.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let r=0,i=e.length;r<i;r++){let a=e.get(r).context;a.count=i,a.first=r===0,a.last=r===i-1,a.even=r%2===0,a.odd=!a.even,this.multiTemplateDataRows?(a.dataIndex=this._renderRows[r].dataIndex,a.renderIndex=r):a.index=this._renderRows[r].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,r=>{let i=this._columnDefsByName.get(r);return e.extractCellTemplate(i)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new Ws(this._isNativeHtmlTable,this.stickyCssClass,this._platform.isBrowser,this.needsPositionStickyOnElement,e,this._stickyPositioningListener,this._injector),(this._dir?this._dir.change:W()).pipe(an(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let r=this._rowOutlet.viewContainer.length===0;if(r===this._isShowingNoDataRow)return;let i=this._noDataRowOutlet.viewContainer;if(r){let o=i.createEmbeddedView(e.templateRef),a=o.rootNodes[0];if(o.rootNodes.length===1&&a?.nodeType===this._document.ELEMENT_NODE){a.setAttribute("role","row"),a.classList.add(...e._contentClassNames);let s=a.querySelectorAll(e._cellSelector);for(let l=0;l<s.length;l++)s[l].classList.add(...e._cellClassNames)}}else i.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=V({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,i,o){if(r&1&&(Ze(o,Wg,5),Ze(o,mi,5),Ze(o,Ks,5),Ze(o,na,5),Ze(o,md,5)),r&2){let a;et(a=tt())&&(i._noDataRow=a.first),et(a=tt())&&(i._contentColumnDefs=a),et(a=tt())&&(i._contentRowDefs=a),et(a=tt())&&(i._contentHeaderRowDefs=a),et(a=tt())&&(i._contentFooterRowDefs=a)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(r,i){r&2&&ae("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",bt],fixedLayout:[2,"fixedLayout","fixedLayout",bt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Gr([{provide:Zt,useExisting:t},{provide:is,useClass:Jo},{provide:dd,useValue:null}])],ngContentSelectors:Bg,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,i){r&1&&(un(Vg),Ct(0),Ct(1,1),G(2,$g,1,0),G(3,Gg,7,0)(4,Hg,4,0)),r&2&&(f(2),H(i._isServer?2:-1),f(),H(i._isNativeHtmlTable?3:4))},dependencies:[Yg,Qg,Jg,Kg],styles:[`.cdk-table-fixed-layout{table-layout:fixed}
`],encapsulation:2})}return t})();function Zo(t,n){return t.concat(Array.from(n))}function pd(t,n){let e=n.toUpperCase(),r=t.viewContainer.element.nativeElement;for(;r;){let i=r.nodeType===1?r.nodeName:null;if(i===e)return r;if(i==="TABLE")break;r=r.parentNode}return null}var yd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pn({type:t});static \u0275inj=In({imports:[xc]})}return t})();var ra=class t{column;active=P("");direction=P("");sortChange=new vt;sortable=!0;get isAsc(){return this.active()===this.column&&this.direction()==="asc"}get isDesc(){return this.active()===this.column&&this.direction()==="desc"}onClick(){let n;this.active()===this.column?this.direction()==="asc"?n="desc":this.direction()==="desc"?n="":n="asc":n="asc",this.sortChange.emit({column:n?this.column:"",direction:n})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=_e({type:t,selectors:[["","appTableSort",""]],hostVars:6,hostBindings:function(e,r){e&1&&k("click",function(){return r.onClick()}),e&2&&ae("sortable",r.sortable)("sort-asc",r.isAsc)("sort-desc",r.isDesc)},inputs:{column:[0,"appTableSort","column"],active:"active",direction:"direction"},outputs:{sortChange:"sortChange"}})};var Sn=class t{constructor(n){this.template=n}appTableCell;static \u0275fac=function(e){return new(e||t)(We(yt))};static \u0275dir=_e({type:t,selectors:[["","appTableCell",""]],inputs:{appTableCell:"appTableCell"}})};var e0=()=>[],t0=t=>({$implicit:t}),n0=(t,n)=>n.id;function r0(t,n){if(t&1&&(b(0),R(1,"translate")),t&2){let e=S(2).$implicit;de(" ",O(1,1,e.label)," ")}}function i0(t,n){if(t&1){let e=K();g(0,"th",6),k("sortChange",function(i){j(e);let o=S(2);return U(o.onSort(i))})("dragstart",function(i){j(e);let o=S().$implicit,a=S();return U(a.onColumnDragStart(i,o.id))})("dragover",function(i){j(e);let o=S().$implicit,a=S();return U(a.onColumnDragOver(i,o.id))})("dragleave",function(){j(e);let i=S(2);return U(i.onColumnDragLeave())})("drop",function(i){j(e);let o=S().$implicit,a=S();return U(a.onColumnDrop(i,o.id))})("dragend",function(){j(e);let i=S(2);return U(i.onColumnDragEnd())}),G(1,r0,2,3),_()}if(t&2){let e=S().$implicit,r=S();An("width",r.isLastColumn(e.id)?null:e.maxWidth,"px"),ae("sortable",e.sortable)("last-column",r.isLastColumn(e.id))("dragging",r.draggedColumnId()===e.id)("drop-target",r.dropTargetColumnId()===e.id),N("appTableSort",e.id)("active",r.sortColumn)("direction",r.sortDirection)("ngClass",e.headerClass),f(),H(e.hideLabel?-1:1)}}function o0(t,n){if(t&1&&b(0),t&2){let e=S().$implicit,r=S().$implicit,i=S();de(" ",i.getDefaultCellValue(e,r.id)," ")}}function a0(t,n){if(t&1&&(g(0,"td",7),lt(1,8),G(2,o0,1,1),_()),t&2){let e=n.$implicit,r=S().$implicit,i=S();An("width",i.isLastColumn(r.id)?null:r.maxWidth,"px"),ae("last-column",i.isLastColumn(r.id)),N("ngClass",r.cellClass),f(),N("ngTemplateOutlet",i.getCellTemplate(r.id))("ngTemplateOutletContext",nt(8,t0,e)),f(),H(i.getCellTemplate(r.id)?-1:2)}}function s0(t,n){if(t&1&&(ts(0,1),wt(1,i0,2,15,"th",4)(2,a0,3,10,"td",5),ns()),t&2){let e=n.$implicit;N("cdkColumnDef",e.id)}}function l0(t,n){t&1&&X(0,"tr",9)}function c0(t,n){if(t&1){let e=K();g(0,"tr",10),k("click",function(){let i=j(e).$implicit,o=S();return U(o.onRowClick(i))}),_()}if(t&2){let e=n.$implicit,r=S();ae("selected",r.isSelected(e))}}var Rr=class t{constructor(n){this.cdr=n;Ce(()=>{let e=this.columnOrderSignal();e.length>0&&this.columnOrder.set(e)}),Ce(()=>{let e=this.config();e?.initialSort&&(this.sortColumn.set(e.initialSort.column),this.sortDirection.set(e.initialSort.direction)),e&&e.settingsControl&&(e.settingsControl.setAllColumns(e.columns),this.columnOrder().length>0&&e.settingsControl.setDisplayedColumns(this.columnOrder())),this.displayedColumnIds(),this.cdr.markForCheck()}),Ce(()=>{let e=this.columnOrder(),r=this.config();r&&r.settingsControl&&this.columnOrder().length>0&&r.settingsControl.setDisplayedColumns(this.columnOrder())}),Ce(()=>{let e=this.config();e&&e.settingsControl&&e.settingsControl.columnListChanged.subscribe(r=>{this.columnOrder.set(r),this.columnOrderChange.emit(r)})})}dataSource=me(void 0,{alias:"dataSource"});config=me(void 0,{alias:"config"});columnOrderSignal=me([],{alias:"columnOrder"});sortChange=Pt();rowClick=Pt();columnOrderChange=Pt();cellTemplates;sortColumn=P("");sortDirection=P("");columnOrder=P([]);draggedColumnId=P(null);dropTargetColumnId=P(null);sortedColumns=q(()=>{let n=this.config(),e=this.columnOrderSignal();return n?e.length===0?n.columns:this.sortColumnsByOrder(n.columns,e):[]});visibleColumns=q(()=>this.sortedColumns().filter(e=>!e.hidden));displayedColumnIds=q(()=>{let n=this.visibleColumns(),e=this.columnOrder();return e.length===0?n.map(r=>r.id):e.filter(r=>n.some(i=>i.id===r))});ngAfterViewInit(){let n=this.dataSource();n&&n.connect().subscribe(()=>{this.cdr.markForCheck()})}sortColumnsByOrder(n,e){let r=e.map(i=>n.find(o=>o.id===i)).filter(i=>i!==void 0);return n.forEach(i=>{r.find(o=>o.id===i.id)||r.push(i)}),r.forEach(i=>{i.hidden=!e.includes(i.id)}),r}isLastColumn(n){let e=this.displayedColumnIds();return e.length>0&&e[e.length-1]===n}getColumn(n){let e=this.config();return e?e.columns.find(r=>r.id===n):void 0}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction),this.sortChange.emit(n)}onRowClick(n){let e=this.config();e&&e.onRowClick&&e.onRowClick(n),this.rowClick.emit(n)}isSelected(n){let e=this.config();return!!(e&&e.selectedItem===n)}trackBy(n,e){let r=this.config();return r&&r.trackByFn?r.trackByFn(n,e):n}getDefaultCellValue(n,e){return n[e]}getCellTemplate(n){return this.cellTemplates.find(e=>e.appTableCell===n)?.template||null}trackByColumnId(n,e){return e.id}onColumnDragStart(n,e){this.draggedColumnId.set(e);let r=n.target.closest("th");if(r){let i=r.textContent||"";this.createGhostImage(i,n)}n.dataTransfer.effectAllowed="move"}createGhostImage(n,e){let r=document.createElement("div");r.className="column-drag-ghost",r.textContent=n,document.body.appendChild(r),e.dataTransfer.setDragImage(r,75,20),setTimeout(()=>{document.body.removeChild(r)},0)}onColumnDragOver(n,e){n.preventDefault(),n.dataTransfer.dropEffect="move";let r=this.draggedColumnId();r&&r!==e&&this.dropTargetColumnId.set(e)}onColumnDragLeave(){this.dropTargetColumnId.set(null)}onColumnDrop(n,e){n.preventDefault();let r=this.draggedColumnId();if(!r||r===e){this.cleanup();return}let i=this.columnOrder().length>0?this.columnOrder():this.displayedColumnIds(),o=i.indexOf(r),a=i.indexOf(e);if(o!==-1&&a!==-1){let s=[...i];s.splice(o,1),s.splice(a,0,r),this.columnOrder.set(s),this.columnOrderChange.emit(s)}this.cleanup()}onColumnDragEnd(){this.cleanup()}cleanup(){this.draggedColumnId.set(null),this.dropTargetColumnId.set(null),this.cdr.markForCheck()}static \u0275fac=function(e){return new(e||t)(We(fn))};static \u0275cmp=V({type:t,selectors:[["TableComponent"]],contentQueries:function(e,r,i){if(e&1&&Ze(i,Sn,4),e&2){let o;et(o=tt())&&(r.cellTemplates=o)}},inputs:{dataSource:[1,"dataSource"],config:[1,"config"],columnOrderSignal:[1,"columnOrder","columnOrderSignal"]},outputs:{sortChange:"sortChange",rowClick:"rowClick",columnOrderChange:"columnOrderChange"},decls:5,vars:5,consts:[["cdk-table","",3,"dataSource","trackBy"],[3,"cdkColumnDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["cdk-header-cell","","draggable","true",3,"appTableSort","active","direction","sortable","last-column","width","ngClass","dragging","drop-target","sortChange","dragstart","dragover","dragleave","drop","dragend",4,"cdkHeaderCellDef"],["cdk-cell","",3,"last-column","width","ngClass",4,"cdkCellDef"],["cdk-header-cell","","draggable","true",3,"sortChange","dragstart","dragover","dragleave","drop","dragend","appTableSort","active","direction","ngClass"],["cdk-cell","",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["cdk-header-row",""],["cdk-row","",3,"click"]],template:function(e,r){e&1&&(g(0,"table",0),Ee(1,s0,3,1,"ng-container",1,n0),wt(3,l0,1,0,"tr",2)(4,c0,1,2,"tr",3),_()),e&2&&(N("dataSource",r.dataSource()||Ln(4,e0))("trackBy",r.trackBy.bind(r)),f(),Re(r.visibleColumns()),f(2),N("cdkHeaderRowDef",r.displayedColumnIds()),f(),N("cdkRowDefColumns",r.displayedColumnIds()))},dependencies:[yd,_d,Ks,Xs,Qs,mi,hd,vd,fd,gd,na,Wr,cc,dc,se,ra,pe],styles:["table[_ngcontent-%COMP%]{width:100%;table-layout:fixed;border-collapse:collapse;border-spacing:0;font-size:var(--table-font-size);text-align:left;background-color:var(--app-background-color)}  thead{color:var(--table-cell-header-color, var(--table-cell-text-color), var(--app-text-color));font:700 14px/20px UI Sans,Lato,Arial,sans-serif;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:var(--table-header-font-size);height:40px}tr[_ngcontent-%COMP%]{height:33px;position:relative;border-bottom-width:1px;box-sizing:border-box;border-bottom-color:#2d2c2c;display:table-row;background-attachment:scroll;background-clip:border-box;background-image:none;background-origin:padding-box;background-position-x:0%;background-position-y:0%;background-repeat:repeat;background-size:auto;color:var(--table-row-text-color, var(--app-text-color));cursor:pointer;padding-left:1em;font-size:var(--table-row-font-size)}th[_ngcontent-%COMP%]{display:table-cell;box-sizing:border-box;font-size:var(--table-header-font-size)}td[_ngcontent-%COMP%]{transition:opacity .2s;background-attachment:scroll;background-clip:border-box;background-image:none;background-origin:padding-box;background-position-x:0%;background-position-y:0%;background-repeat:repeat;background-size:auto;border-collapse:collapse;box-sizing:border-box;color:var(--table-cell-text-color, var(--app-text-color));cursor:pointer;display:table-cell;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--table-row-font-size)}td[_ngcontent-%COMP%]:first-child{padding-left:1em}  tbody>tr:hover{background:#1c1e21}tr.selected[_ngcontent-%COMP%]{border-left:3px solid rgba(3,69,156,.899)}th.last-column[_ngcontent-%COMP%], td.last-column[_ngcontent-%COMP%]{flex:1;overflow:visible;text-overflow:clip}td.last-column[_ngcontent-%COMP%]{word-break:break-word;white-space:normal}th[_ngcontent-%COMP%]:not(.last-column), td[_ngcontent-%COMP%]:not(.last-column){flex:0 0 auto}th[draggable=true][_ngcontent-%COMP%]{cursor:grab;-webkit-user-select:none;user-select:none;transition:background-color .2s ease,opacity .2s ease}th[draggable=true][_ngcontent-%COMP%]:active{cursor:grabbing}th.dragging[_ngcontent-%COMP%]{opacity:.5;background-color:#03459c33}th.drop-target[_ngcontent-%COMP%]{border-left:3px solid rgba(52,152,219,.8);box-shadow:inset 3px 0 #3498db99;animation:_ngcontent-%COMP%_drop-zone-glow .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_drop-zone-glow{0%,to{box-shadow:inset 3px 0 #3498db99}50%{box-shadow:inset 3px 0 #3498db,0 0 8px #3498db66}}"],changeDetection:0})};var u0=["*"],Mr=class t{settingsActive=P(!1);toggleSettingsBar(){this.settingsActive.set(!this.settingsActive())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["SettingsBarComponent"]],ngContentSelectors:u0,decls:7,vars:7,consts:[[1,"settings_bar",3,"title"],[1,"settings_bar_toggle",3,"click"],[1,"material-symbols-outlined"],[1,"settings_bar_content"]],template:function(e,r){e&1&&(un(),ne(0,"div",0),R(1,"translate"),ne(2,"div",1),ke("click",function(){return r.toggleSettingsBar()}),ne(3,"div",2),b(4),oe()(),ne(5,"div",3),Ct(6),oe()()),e&2&&(ae("active",r.settingsActive()),Br("title",Ie(O(1,5,"OPEN_TABLE_SETTINGS"))),f(4),M(r.settingsActive()?"keyboard_double_arrow_left":"keyboard_double_arrow_right"))},dependencies:[se,pe],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex}.settings_bar[_ngcontent-%COMP%]{border-right:1px solid var(--app-header-background-color);display:flex;position:relative;padding-top:12px;padding-left:0;padding-right:0;flex-grow:1}.settings_bar.active[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;transition-duration:.25s}.settings_bar_toggle[_ngcontent-%COMP%]{position:absolute;height:32px;display:flex;align-items:center;border-radius:4px;z-index:10;cursor:pointer;top:0;width:25px;right:-20px;background-color:var(--button-background-color);border:1px solid var(--app-header-background-color)}.settings_bar[_ngcontent-%COMP%] > .settings_bar_content[_ngcontent-%COMP%]{width:0px;overflow:hidden;transition:width .2s ease}.settings_bar.active[_ngcontent-%COMP%] > .settings_bar_content[_ngcontent-%COMP%]{width:270px;min-width:270px;transition:width .2s ease}"]})};var Vt=class t{columnListChanged=Pt();displayedColumns=P([]);allColumns=P([]);initalSettings=!1;availableColumns=q(()=>{if(this.allColumns){let n=this.displayedColumns();return this.allColumns().map(e=>({label:e.label,value:e.id,isSelected:n.includes(e.id)}))}return[]});constructor(){}setAllColumns(n){if(this.allColumns.set(n),!this.initalSettings){let e=n.map(r=>r.id);this.displayedColumns.set([...e])}}setDisplayedColumns(n){this.initalSettings=!0,this.displayedColumns.set(n)}updateColumns(n){if(Array.isArray(n)){let e=n.filter(r=>r.isSelected===!0).map(r=>r.value);this.displayedColumns.set(e),this.columnListChanged.emit(e)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["TableSettingsControl"]],outputs:{columnListChanged:"columnListChanged"},decls:2,vars:5,consts:[[3,"optionsChanged","title","entities"]],template:function(e,r){e&1&&(g(0,"OptionPanelComponent",0),R(1,"translate"),k("optionsChanged",function(o){return r.updateColumns(o)}),_()),e&2&&N("title",Ie(O(1,3,"COLUMN_CONFIG")))("entities",r.availableColumns())},dependencies:[gn,se,pe],encapsulation:2})};var Dn=class extends rs{constructor(e,r){super();this.dataSignal=e;this.injector=r||null,this.dataSubject$.next(this.dataSignal())}dataSubject$=new ze([]);connected=!1;injector=null;connect(){if(!this.connected&&this.injector)this.connected=!0,Fe(this.injector,()=>{Ce(()=>{let e=this.dataSignal();It(()=>{this.dataSubject$.next(e)})})});else if(!this.connected){this.connected=!0;let r=setInterval(()=>{this.dataSubject$.next(this.dataSignal())},100);this._interval=r}return this.dataSubject$.asObservable()}disconnect(){this.connected=!1,this._interval&&clearInterval(this._interval)}};var ia=class t{translate=d(ct);transform(n){let e=new Date,r=new Date(n),i=Math.floor((r.getTime()-e.getTime())/1e3);if(i<60){let p=i===1?"TIME.seconds_left_one":"TIME.seconds_left";return this.translate.instant(p,{count:i})}let o=Math.floor(i/60);if(o<60){let p=o===1?"TIME.minutes_left_one":"TIME.minutes_left";return this.translate.instant(p,{count:o})}let a=Math.floor(o/60);if(a<24){let p=a===1?"TIME.hours_left_one":"TIME.hours_left";return this.translate.instant(p,{count:a})}let s=Math.floor(a/24);if(s<30){let p=s===1?"TIME.days_left_one":"tTIMEme.days_left";return this.translate.instant(p,{count:s})}let l=Math.floor(s/30);if(l<12){let p=l===1?"TIME.months_left_one":"TIME.months_left";return this.translate.instant(p,{count:l})}let c=Math.floor(l/12),u=c===1?"TIME.years_left_one":"TIME.years_left";return this.translate.instant(u,{count:c})}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=Xl({name:"timeTogo",type:t,pure:!1})};var d0=()=>({maxShown:10}),p0=t=>({time:t});function f0(t,n){if(t&1&&(g(0,"div",24),X(1,"span",25),_()),t&2){let e=n.$implicit;f(),ae("red",e.state.availability!=="online")("green",e.state.availability==="online")("yellow",e.state.availability==="")}}function h0(t,n){if(t&1&&X(0,"DeviceImage",26),t&2){let e=n.$implicit;N("device",e)}}function m0(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",e.friendly_name," ")}}function g0(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",(e.definition==null?null:e.definition.vendor)||""," ")}}function v0(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",(e.definition==null?null:e.definition.model)||""," ")}}function _0(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",(e.state==null?null:e.state.linkquality)??"??"," ")}}function y0(t,n){if(t&1&&(b(0),R(1,"toHex")),t&2){let e=n.$implicit;Gi(" ",e.ieee_address??"??"," / ",O(1,2,e.network_address)," ")}}function w0(t,n){if(t&1&&(b(0),R(1,"human")),t&2){let e=n.$implicit;de(" ",O(1,1,e.supported)," ")}}function C0(t,n){if(t&1&&X(0,"DeviceAvailability",27),t&2){let e=n.$implicit;N("device",e)}}function b0(t,n){t&1&&(g(0,"span",28),b(1),R(2,"translate"),_()),t&2&&(f(),M(O(2,1,"UPDATE_AVAILABLE")))}function x0(t,n){t&1&&(g(0,"span"),b(1),R(2,"translate"),_()),t&2&&(f(),M(O(2,1,"UP_TO_DATE")))}function S0(t,n){if(t&1&&(g(0,"div",29),b(1),R(2,"translate"),X(3,"ProgessBar",30),_()),t&2){let e=S(2).$implicit;f(),de(" ",O(2,2,"DEVICE_UPDATING")," "),f(2),N("percent",(e.update==null?null:e.update.progress)??0)}}function D0(t,n){if(t&1&&G(0,b0,3,3,"span",28)(1,x0,3,3,"span")(2,S0,4,4,"div",29),t&2){let e,r=S().$implicit;H((e=r.update.state)==="available"?0:e==="idle"?1:e==="updating"?2:-1)}}function T0(t,n){t&1&&(g(0,"span"),b(1),R(2,"translate"),_()),t&2&&(f(),M(O(2,1,"UNKNOWN")))}function E0(t,n){if(t&1&&G(0,D0,3,1)(1,T0,3,3,"span"),t&2){let e=n.$implicit;H(e.update?0:1)}}function R0(t,n){if(t&1&&(g(0,"span"),b(1),_()),t&2){let e=S(2).$implicit;ae("battery_ok",e.state.battery>=50)("battery_warning",e.state.battery<50&&e.state.battery>=20)("battery_low",e.state.battery<20),f(),de(" ",e.state&&e.state.battery?`${e.state.battery}%`:""," ")}}function M0(t,n){if(t&1&&G(0,R0,2,7,"span",32),t&2){let e=S().$implicit;H(e.state?0:-1)}}function O0(t,n){t&1&&(g(0,"span",31),b(1,"power"),_())}function k0(t,n){if(t&1&&G(0,M0,1,1)(1,O0,2,0,"span",31),t&2){let e=n.$implicit;H(e.power_source&&e.power_source.indexOf("Battery")>-1?0:1)}}function I0(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",(e.state==null?null:e.state.lastseenhuman)||"--"," ")}}function N0(t,n){if(t&1){let e=K();g(0,"div",20)(1,"button",22),k("click",function(){j(e);let i=S();return U(i.permitJoin())}),b(2),R(3,"translate"),_(),g(4,"div",33),b(5),R(6,"timeTogo"),R(7,"translate"),_()()}if(t&2){let e,r=S();f(2),M(O(3,2,"END_JOIN")),f(3),M(rt(7,6,"OPEN_NETWORK",nt(9,p0,O(6,4,((e=r.bridgeInfo())==null?null:e.permit_join_end)??0))))}}function P0(t,n){if(t&1){let e=K();g(0,"div",21)(1,"button",22),k("click",function(){j(e);let i=S();return U(i.permitJoin())}),b(2),R(3,"translate"),_()()}t&2&&(f(2),M(O(3,1,"PERMIT_JOIN")))}var A0=[{id:"status",label:"STATUS",hideLabel:!0,minWidth:30,maxWidth:30,sortable:!1},{id:"icon",label:"ICON",hideLabel:!0,minWidth:50,maxWidth:50,sortable:!1},{id:"name",label:"NAME",minWidth:150,maxWidth:350,sortable:!0},{id:"vendor",label:"MANUFACTURER",minWidth:80,maxWidth:150,sortable:!0},{id:"model",label:"MODEL",minWidth:100,maxWidth:150,sortable:!0},{id:"linkquality",label:"LQI",minWidth:60,maxWidth:80,sortable:!0},{id:"battery",label:"BATTERY",minWidth:80,maxWidth:120,sortable:!0},{id:"lastseenhuman",label:"LAST_SEEN",minWidth:120,maxWidth:150,sortable:!0},{id:"ieee_address",label:"IEEE_ADDRESS",minWidth:250,maxWidth:250,sortable:!0},{id:"supported",label:"SUPPORT_STATUS",minWidth:50,maxWidth:100,sortable:!0},{id:"type",label:"DEVICE_TYPE",minWidth:50,maxWidth:100,sortable:!0},{id:"firmware_state",label:"FIRMWARE_STATE",minWidth:100,maxWidth:100,sortable:!0},{id:"availability",label:"AVAILABILITY",minWidth:50,maxWidth:100,sortable:!0}],oa=class t{deviceStore=d(hn);applicationService=d(ut);injector=d(kt);deviceService=d(ur);bridgeService=d(Te);tabManager=d(Qe);settingsService=d(mn);displayedColumns=P([]);tableSettings=Yt(Vt);tableConfig=q(()=>{let n=this.selectedDevice(),e=this.sortDirection();return{columns:A0,trackByFn:(r,i)=>i.ieee_address||r,selectedItem:n||void 0,onRowClick:r=>this.selectDevice(r.ieee_address),initialSort:{column:this.sortColumn(),direction:e==="asc"||e==="desc"?e:"asc"},settingsControl:this.tableSettings()}});bridgeInfo=q(()=>{let n=this.bridgeService.bridgeInfo;return n()});sortColumn=P("name");sortDirection=P("asc");searchText=P("");selectedVendors=P([]);selectedModels=P([]);selectedPowering=P([]);selectedAvailability=P([]);devicesView=zn(this.deviceStore,{criteria:[{property:"type",value:"Coordinator",operator:"not"}],logicalOperator:"AND"},!1,void 0);devices=q(()=>{let n=Rc(this.devicesView(),this.searchText(),e=>this.getSearchableFields(e));return Zi(n,this.sortColumn(),this.sortDirection(),(e,r)=>this.getDeviceValue(e,r))});finalyFilter=q(()=>{let n=this.devices(),e=this.selectedVendors().map(a=>a.label),r=this.selectedModels().map(a=>a.label),i=this.selectedPowering().map(a=>a.label),o=this.selectedAvailability().map(a=>a.label);return e.length>0&&(n=n.filter(a=>e.indexOf(a.definition?.vendor)!==-1)),r.length>0&&(n=n.filter(a=>r.indexOf(a.definition?.model)!==-1)),i.length>0&&(n=n.filter(a=>i.indexOf(a.power_source)!==-1)),o.length>0&&(n=n.filter(a=>o.indexOf(a.state?.availability)!==-1)),n});datasourceSignal=P(null);get datasource(){return this.datasourceSignal()||new Dn(this.finalyFilter,this.injector)}vendorsMap=new Map;modelMap=new Map;powerMap=new Map;avaliMap=new Map;vendorList=q(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.definition?e.definition.vendor:void 0).filter(e=>e!==""&&e!==void 0))).map(e=>(this.vendorsMap.has(e)||this.vendorsMap.set(e,{label:e,isSelected:!1}),this.vendorsMap.get(e))));modelList=q(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.definition?e.definition.model:void 0).filter(e=>e!==""&&e!==void 0))).map(e=>(this.modelMap.has(e)||this.modelMap.set(e,{label:e,isSelected:!1}),this.modelMap.get(e))));powerOptionList=q(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.power_source).filter(e=>e!==""&&e!==void 0))).map(e=>(this.powerMap.has(e)||this.powerMap.set(e,{label:e,isSelected:!1}),this.powerMap.get(e))));availabilityList=q(()=>Array.from(new Set(this.deviceStore.entities().map(e=>e.state?.availability).filter(e=>e!==""&&e!==void 0))).map(e=>(this.avaliMap.has(e)||this.avaliMap.set(e,{label:e,isSelected:!1}),this.avaliMap.get(e))));selectedDevice=q(()=>this.deviceStore.selectedEntity());constructor(){this.datasourceSignal.set(new Dn(this.finalyFilter,this.injector)),Ce(()=>{this.finalyFilter(),this.datasourceSignal.set(new Dn(this.finalyFilter,this.injector))}),Ce(()=>{let e=this.devices()});let n=this.settingsService.getPreference("devicelist_columns");n&&this.displayedColumns.set(n),this.applicationService.mainTitle="DEVICE_VIEW"}trackByFn(n,e){return e.friendly_name||e.ieee_address}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction)}columnOrderChange(n){this.settingsService.setPreference("devicelist_columns",n)}getDeviceValue(n,e){switch(e){case"name":return n.friendly_name?.toLowerCase()||"";case"model":return n.definition?.model?.toLowerCase()||"";case"vendor":return n.definition?.vendor?.toLowerCase()||"";case"availability":return n.state?.availability?.toLowerCase()||"";case"linkquality":return n.state?.linkquality??-1;case"battery":return n.state?.battery??-1;case"lastseenhuman":return n.state?.last_seen??0;case"supported":return n.supported??0;case"type":return n.type??0;case"firmware_state":return n.update?.state??0;case"ieee_address":return n.ieee_address??"";default:return""}}applySearch(n){this.searchText.set(n)}getSearchableFields(n){return[n.friendly_name,n.ieee_address,n.definition?.model,n.definition?.vendor,n.definition?.description,n.state?.availability]}selectDevice(n){this.deviceStore.setSelectedEntityById(n),this.applicationService.inspector="device";let e=this.deviceStore.entities().find(r=>r.ieee_address===n);e&&this.tabManager.openTab({id:n,label:e.friendly_name,data:{ieee_address:n},component:Nc,iconComponent:Fn,iconData:{device:e}})}vendorsSelectionChanged(n){Array.isArray(n)&&this.selectedVendors.set(n.filter(e=>e.isSelected))}modelSelectionChanged(n){Array.isArray(n)&&this.selectedModels.set(n.filter(e=>e.isSelected))}powerSelectionChanged(n){Array.isArray(n)&&this.selectedPowering.set(n.filter(e=>e.isSelected))}availabilitySelectionChanged(n){Array.isArray(n)&&this.selectedAvailability.set(n.filter(e=>e.isSelected))}permitJoin(){this.bridgeService.permitJoin(this.bridgeInfo()?.permit_join?0:254)}checkUpdateAll(){this.devicesView().forEach(n=>{this.deviceService.checkUpdate(n)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["DeviceListComponent"]],viewQuery:function(e,r){e&1&&Qt(r.tableSettings,Vt,5),e&2&&dn()},decls:43,vars:29,consts:[[1,"flex","w-full","overflow-x-hidden","h-full"],[1,"mt-2"],[1,"mt-2",3,"searchChange"],[3,"optionsChanged","title","entities"],[3,"optionsChanged","title","entities","options"],[1,"mt-10","mb-4"],[1,"w-full","ml-2","overflow-y-auto","scrollbar"],[3,"sortChange","rowClick","columnOrderChange","dataSource","config","columnOrder"],["appTableCell","status"],["appTableCell","icon"],["appTableCell","name"],["appTableCell","vendor"],["appTableCell","model"],["appTableCell","linkquality"],["appTableCell","ieee_address"],["appTableCell","supported"],["appTableCell","availability"],["appTableCell","firmware_state"],["appTableCell","battery"],["appTableCell","lastseenhuman"],[1,"mt-2","flex","flex-col"],[1,"button"],[1,"button-link","left",3,"click"],[1,"mt-4"],[1,"flex","ml-2"],[1,"statusIcon"],["width","25px",1,"icon","ml-2",3,"device"],[3,"device"],[1,"firmware_available"],[1,"flex","flex-row","items-center"],[1,"block","ml-1","max-w-36",3,"percent"],[1,"material-symbols-outlined"],[3,"battery_ok","battery_warning","battery_low"],[1,"ml-2","mr-2"]],template:function(e,r){if(e&1&&(g(0,"div",0)(1,"SettingsBarComponent")(2,"span",1),b(3,"Filter"),_(),g(4,"SearchInput",2),k("searchChange",function(o){return r.applySearch(o)}),_(),g(5,"div",1)(6,"OptionPanelComponent",3),R(7,"translate"),k("optionsChanged",function(o){return r.vendorsSelectionChanged(o)}),_()(),g(8,"div",1)(9,"OptionPanelComponent",3),R(10,"translate"),k("optionsChanged",function(o){return r.modelSelectionChanged(o)}),_()(),g(11,"div",1)(12,"OptionPanelComponent",4),R(13,"translate"),k("optionsChanged",function(o){return r.availabilitySelectionChanged(o)}),_()(),g(14,"div",1)(15,"OptionPanelComponent",3),R(16,"translate"),k("optionsChanged",function(o){return r.powerSelectionChanged(o)}),_()(),X(17,"hr",5),g(18,"span"),b(19,"Settings"),_(),g(20,"div",1),X(21,"TableSettingsControl"),_()(),g(22,"div",6)(23,"TableComponent",7),k("sortChange",function(o){return r.onSort(o)})("rowClick",function(o){return r.selectDevice(o.ieee_address)})("columnOrderChange",function(o){return r.columnOrderChange(o)}),wt(24,f0,2,6,"ng-template",8)(25,h0,1,1,"ng-template",9)(26,m0,1,1,"ng-template",10)(27,g0,1,1,"ng-template",11)(28,v0,1,1,"ng-template",12)(29,_0,1,1,"ng-template",13)(30,y0,2,4,"ng-template",14)(31,w0,2,3,"ng-template",15)(32,C0,1,1,"ng-template",16)(33,E0,2,1,"ng-template",17)(34,k0,2,1,"ng-template",18)(35,I0,1,1,"ng-template",19),_(),G(36,N0,8,11,"div",20)(37,P0,4,3,"div",21),g(38,"div",21)(39,"button",22),k("click",function(){return r.checkUpdateAll()}),b(40),R(41,"translate"),_()(),X(42,"div",23),_()()),e&2){let i;f(6),N("title",Ie(O(7,18,"MANUFACTURER")))("entities",r.vendorList()),f(3),N("title",Ie(O(10,20,"MODEL")))("entities",r.modelList()),f(3),N("title",Ie(O(13,22,"STATUS")))("entities",r.availabilityList())("options",Ln(28,d0)),f(3),N("title",Ie(O(16,24,"POWER")))("entities",r.powerOptionList()),f(8),N("dataSource",r.datasource)("config",r.tableConfig())("columnOrder",r.displayedColumns()),f(13),H(((i=r.bridgeInfo())==null?null:i.permit_join)===!0&&((i=r.bridgeInfo())!=null&&i.permit_join_end)?36:37),f(4),M(O(41,26,"CHECK_FOR_UPDATE_ALL"))}},dependencies:[se,lr,gn,Fn,Rr,Sn,Vt,kc,Ic,Mr,pe,Oc,Ec,ia],styles:[".icon[_ngcontent-%COMP%]{max-width:30px}.icon_cell[_ngcontent-%COMP%]{width:50px;padding:4px}.battery_ok[_ngcontent-%COMP%], .firmware_available[_ngcontent-%COMP%]{color:var(--app-link-good-color)}.battery_warning[_ngcontent-%COMP%]{color:--app-link-warning-color}.battery_low[_ngcontent-%COMP%]{color:var(--app-link-danger-color)}th.last-column[_ngcontent-%COMP%], td.last-column[_ngcontent-%COMP%]{flex:1;overflow:visible;text-overflow:clip}td.last-column[_ngcontent-%COMP%]{word-break:break-word;white-space:normal}th[_ngcontent-%COMP%]:not(.last-column), td[_ngcontent-%COMP%]:not(.last-column){flex:0 0 auto}hr[_ngcontent-%COMP%]{background-color:var(--app-border-color);border:none;height:1px}span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})};var L0={value:()=>{}};function bd(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new aa(e)}function aa(t){this._=t}function z0(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}aa.prototype=bd.prototype={constructor:aa,on:function(t,n){var e=this._,r=z0(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=F0(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=Cd(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Cd(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new aa(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function F0(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Cd(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=L0,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var en=bd;var sa="http://www.w3.org/1999/xhtml",Js={svg:"http://www.w3.org/2000/svg",xhtml:sa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Js.hasOwnProperty(n)?{space:Js[n],local:t}:t}function j0(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===sa&&n.documentElement.namespaceURI===sa?n.createElement(t):n.createElementNS(e,t)}}function U0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function la(t){var n=tn(t);return(n.local?U0:j0)(n)}function V0(){}function Qn(t){return t==null?V0:function(){return this.querySelector(t)}}function xd(t){typeof t!="function"&&(t=Qn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new xe(r,this._parents)}function Zs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function B0(){return[]}function gi(t){return t==null?B0:function(){return this.querySelectorAll(t)}}function $0(t){return function(){return Zs(t.apply(this,arguments))}}function Sd(t){typeof t=="function"?t=$0(t):t=gi(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new xe(r,i)}function vi(t){return function(){return this.matches(t)}}function ca(t){return function(n){return n.matches(t)}}var G0=Array.prototype.find;function H0(t){return function(){return G0.call(this.children,t)}}function q0(){return this.firstElementChild}function Dd(t){return this.select(t==null?q0:H0(typeof t=="function"?t:ca(t)))}var W0=Array.prototype.filter;function X0(){return Array.from(this.children)}function Q0(t){return function(){return W0.call(this.children,t)}}function Td(t){return this.selectAll(t==null?X0:Q0(typeof t=="function"?t:ca(t)))}function Ed(t){typeof t!="function"&&(t=vi(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new xe(r,this._parents)}function ua(t){return new Array(t.length)}function Rd(){return new xe(this._enter||this._groups.map(ua),this._parents)}function _i(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}_i.prototype={constructor:_i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Md(t){return function(){return t}}function Y0(t,n,e,r,i,o){for(var a=0,s,l=n.length,c=o.length;a<c;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new _i(t,o[a]);for(;a<l;++a)(s=n[a])&&(i[a]=s)}function K0(t,n,e,r,i,o,a){var s,l,c=new Map,u=n.length,p=o.length,h=new Array(u),m;for(s=0;s<u;++s)(l=n[s])&&(h[s]=m=a.call(l,l.__data__,s,n)+"",c.has(m)?i[s]=l:c.set(m,l));for(s=0;s<p;++s)m=a.call(t,o[s],s,o)+"",(l=c.get(m))?(r[s]=l,l.__data__=o[s],c.delete(m)):e[s]=new _i(t,o[s]);for(s=0;s<u;++s)(l=n[s])&&c.get(h[s])===l&&(i[s]=l)}function J0(t){return t.__data__}function Od(t,n){if(!arguments.length)return Array.from(this,J0);var e=n?K0:Y0,r=this._parents,i=this._groups;typeof t!="function"&&(t=Md(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],p=i[c],h=p.length,m=Z0(t.call(u,u&&u.__data__,c,r)),T=m.length,x=s[c]=new Array(T),y=a[c]=new Array(T),v=l[c]=new Array(h);e(u,p,x,y,v,m,n);for(var E=0,L=0,w,A;E<T;++E)if(w=x[E]){for(E>=L&&(L=E+1);!(A=y[L])&&++L<T;);w._next=A||null}}return a=new xe(a,r),a._enter=s,a._exit=l,a}function Z0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kd(){return new xe(this._exit||this._groups.map(ua),this._parents)}function Id(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Nd(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c=e[l],u=r[l],p=c.length,h=s[l]=new Array(p),m,T=0;T<p;++T)(m=c[T]||u[T])&&(h[T]=m);for(;l<i;++l)s[l]=e[l];return new xe(s,this._parents)}function Pd(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ad(t){t||(t=ev);function n(p,h){return p&&h?t(p.__data__,h.__data__):!p-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,l=i[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(n)}return new xe(i,this._parents).order()}function ev(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Ld(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zd(){return Array.from(this)}function Fd(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function jd(){let t=0;for(let n of this)++t;return t}function Ud(){return!this.node()}function Vd(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function tv(t){return function(){this.removeAttribute(t)}}function nv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rv(t,n){return function(){this.setAttribute(t,n)}}function iv(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function ov(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function av(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Bd(t,n){var e=tn(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?nv:tv:typeof n=="function"?e.local?av:ov:e.local?iv:rv)(e,n))}function da(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sv(t){return function(){this.style.removeProperty(t)}}function lv(t,n,e){return function(){this.style.setProperty(t,n,e)}}function cv(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function $d(t,n,e){return arguments.length>1?this.each((n==null?sv:typeof n=="function"?cv:lv)(t,n,e??"")):Tn(this.node(),t)}function Tn(t,n){return t.style.getPropertyValue(n)||da(t).getComputedStyle(t,null).getPropertyValue(n)}function uv(t){return function(){delete this[t]}}function dv(t,n){return function(){this[t]=n}}function pv(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Gd(t,n){return arguments.length>1?this.each((n==null?uv:typeof n=="function"?pv:dv)(t,n)):this.node()[t]}function Hd(t){return t.trim().split(/^|\s+/)}function el(t){return t.classList||new qd(t)}function qd(t){this._node=t,this._names=Hd(t.getAttribute("class")||"")}qd.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Wd(t,n){for(var e=el(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Xd(t,n){for(var e=el(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function fv(t){return function(){Wd(this,t)}}function hv(t){return function(){Xd(this,t)}}function mv(t,n){return function(){(n.apply(this,arguments)?Wd:Xd)(this,t)}}function Qd(t,n){var e=Hd(t+"");if(arguments.length<2){for(var r=el(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?mv:n?fv:hv)(e,n))}function gv(){this.textContent=""}function vv(t){return function(){this.textContent=t}}function _v(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Yd(t){return arguments.length?this.each(t==null?gv:(typeof t=="function"?_v:vv)(t)):this.node().textContent}function yv(){this.innerHTML=""}function wv(t){return function(){this.innerHTML=t}}function Cv(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Kd(t){return arguments.length?this.each(t==null?yv:(typeof t=="function"?Cv:wv)(t)):this.node().innerHTML}function bv(){this.nextSibling&&this.parentNode.appendChild(this)}function Jd(){return this.each(bv)}function xv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zd(){return this.each(xv)}function ep(t){var n=typeof t=="function"?t:la(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Sv(){return null}function tp(t,n){var e=typeof t=="function"?t:la(t),r=n==null?Sv:typeof n=="function"?n:Qn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Dv(){var t=this.parentNode;t&&t.removeChild(this)}function np(){return this.each(Dv)}function Tv(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ev(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function rp(t){return this.select(t?Ev:Tv)}function ip(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Rv(t){return function(n){t.call(this,n,this.__data__)}}function Mv(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Ov(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function kv(t,n,e){return function(){var r=this.__on,i,o=Rv(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function op(t,n,e){var r=Mv(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=n?kv:Ov,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function ap(t,n,e){var r=da(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Iv(t,n){return function(){return ap(this,t,n)}}function Nv(t,n){return function(){return ap(this,t,n.apply(this,arguments))}}function sp(t,n){return this.each((typeof n=="function"?Nv:Iv)(t,n))}function*lp(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var tl=[null];function xe(t,n){this._groups=t,this._parents=n}function cp(){return new xe([[document.documentElement]],tl)}function Pv(){return this}xe.prototype=cp.prototype={constructor:xe,select:xd,selectAll:Sd,selectChild:Dd,selectChildren:Td,filter:Ed,data:Od,enter:Rd,exit:kd,join:Id,merge:Nd,selection:Pv,order:Pd,sort:Ad,call:Ld,nodes:zd,node:Fd,size:jd,empty:Ud,each:Vd,attr:Bd,style:$d,property:Gd,classed:Qd,text:Yd,html:Kd,raise:Jd,lower:Zd,append:ep,insert:tp,remove:np,clone:rp,datum:ip,on:op,dispatch:sp,[Symbol.iterator]:lp};var nn=cp;function je(t){return typeof t=="string"?new xe([[document.querySelector(t)]],[document.documentElement]):new xe([[t]],tl)}function up(t){let n;for(;n=t.sourceEvent;)t=n;return t}function pt(t,n){if(t=up(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}var dp={passive:!1},Yn={capture:!0,passive:!1};function pa(t){t.stopImmediatePropagation()}function En(t){t.preventDefault(),t.stopImmediatePropagation()}function yi(t){var n=t.document.documentElement,e=je(t).on("dragstart.drag",En,Yn);"onselectstart"in n?e.on("selectstart.drag",En,Yn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function wi(t,n){var e=t.document.documentElement,r=je(t).on("dragstart.drag",null);n&&(r.on("click.drag",En,Yn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var Ci=t=>()=>t;function bi(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}bi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Av(t){return!t.ctrlKey&&!t.button}function Lv(){return this.parentNode}function zv(t,n){return n??{x:t.x,y:t.y}}function Fv(){return navigator.maxTouchPoints||"ontouchstart"in this}function nl(){var t=Av,n=Lv,e=zv,r=Fv,i={},o=en("start","drag","end"),a=0,s,l,c,u,p=0;function h(w){w.on("mousedown.drag",m).filter(r).on("touchstart.drag",y).on("touchmove.drag",v,dp).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(w,A){if(!(u||!t.call(this,w,A))){var B=L(this,n.call(this,w,A),w,A,"mouse");B&&(je(w.view).on("mousemove.drag",T,Yn).on("mouseup.drag",x,Yn),yi(w.view),pa(w),c=!1,s=w.clientX,l=w.clientY,B("start",w))}}function T(w){if(En(w),!c){var A=w.clientX-s,B=w.clientY-l;c=A*A+B*B>p}i.mouse("drag",w)}function x(w){je(w.view).on("mousemove.drag mouseup.drag",null),wi(w.view,c),En(w),i.mouse("end",w)}function y(w,A){if(t.call(this,w,A)){var B=w.changedTouches,$=n.call(this,w,A),re=B.length,ye,ce;for(ye=0;ye<re;++ye)(ce=L(this,$,w,A,B[ye].identifier,B[ye]))&&(pa(w),ce("start",w,B[ye]))}}function v(w){var A=w.changedTouches,B=A.length,$,re;for($=0;$<B;++$)(re=i[A[$].identifier])&&(En(w),re("drag",w,A[$]))}function E(w){var A=w.changedTouches,B=A.length,$,re;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),$=0;$<B;++$)(re=i[A[$].identifier])&&(pa(w),re("end",w,A[$]))}function L(w,A,B,$,re,ye){var ce=o.copy(),Se=pt(ye||B,A),Je,Ge,C;if((C=e.call(w,new bi("beforestart",{sourceEvent:B,target:h,identifier:re,active:a,x:Se[0],y:Se[1],dx:0,dy:0,dispatch:ce}),$))!=null)return Je=C.x-Se[0]||0,Ge=C.y-Se[1]||0,function z(D,F,Y){var J=Se,Z;switch(D){case"start":i[re]=z,Z=a++;break;case"end":delete i[re],--a;case"drag":Se=pt(Y||F,A),Z=a;break}ce.call(D,w,new bi(D,{sourceEvent:F,subject:C,target:h,identifier:re,active:Z,x:Se[0]+Je,y:Se[1]+Ge,dx:Se[0]-J[0],dy:Se[1]-J[1],dispatch:ce}),$)}}return h.filter=function(w){return arguments.length?(t=typeof w=="function"?w:Ci(!!w),h):t},h.container=function(w){return arguments.length?(n=typeof w=="function"?w:Ci(w),h):n},h.subject=function(w){return arguments.length?(e=typeof w=="function"?w:Ci(w),h):e},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Ci(!!w),h):r},h.on=function(){var w=o.on.apply(o,arguments);return w===o?h:w},h.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,h):Math.sqrt(p)},h}function fa(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function rl(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Di(){}var xi=.7,ga=1/xi,Or="\\s*([+-]?\\d+)\\s*",Si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jv=/^#([0-9a-f]{3,8})$/,Uv=new RegExp(`^rgb\\(${Or},${Or},${Or}\\)$`),Vv=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),Bv=new RegExp(`^rgba\\(${Or},${Or},${Or},${Si}\\)$`),$v=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${Si}\\)$`),Gv=new RegExp(`^hsl\\(${Si},${Bt},${Bt}\\)$`),Hv=new RegExp(`^hsla\\(${Si},${Bt},${Bt},${Si}\\)$`),pp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fa(Di,Rn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fp,formatHex:fp,formatHex8:qv,formatHsl:Wv,formatRgb:hp,toString:hp});function fp(){return this.rgb().formatHex()}function qv(){return this.rgb().formatHex8()}function Wv(){return wp(this).formatHsl()}function hp(){return this.rgb().formatRgb()}function Rn(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=jv.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?mp(n):e===3?new Ke(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ha(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ha(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Uv.exec(t))?new Ke(n[1],n[2],n[3],1):(n=Vv.exec(t))?new Ke(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Bv.exec(t))?ha(n[1],n[2],n[3],n[4]):(n=$v.exec(t))?ha(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Gv.exec(t))?_p(n[1],n[2]/100,n[3]/100,1):(n=Hv.exec(t))?_p(n[1],n[2]/100,n[3]/100,n[4]):pp.hasOwnProperty(t)?mp(pp[t]):t==="transparent"?new Ke(NaN,NaN,NaN,0):null}function mp(t){return new Ke(t>>16&255,t>>8&255,t&255,1)}function ha(t,n,e,r){return r<=0&&(t=n=e=NaN),new Ke(t,n,e,r)}function Xv(t){return t instanceof Di||(t=Rn(t)),t?(t=t.rgb(),new Ke(t.r,t.g,t.b,t.opacity)):new Ke}function kr(t,n,e,r){return arguments.length===1?Xv(t):new Ke(t,n,e,r??1)}function Ke(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}fa(Ke,kr,rl(Di,{brighter(t){return t=t==null?ga:Math.pow(ga,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xi:Math.pow(xi,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ke(Jn(this.r),Jn(this.g),Jn(this.b),va(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gp,formatHex:gp,formatHex8:Qv,formatRgb:vp,toString:vp}));function gp(){return`#${Kn(this.r)}${Kn(this.g)}${Kn(this.b)}`}function Qv(){return`#${Kn(this.r)}${Kn(this.g)}${Kn(this.b)}${Kn((isNaN(this.opacity)?1:this.opacity)*255)}`}function vp(){let t=va(this.opacity);return`${t===1?"rgb(":"rgba("}${Jn(this.r)}, ${Jn(this.g)}, ${Jn(this.b)}${t===1?")":`, ${t})`}`}function va(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kn(t){return t=Jn(t),(t<16?"0":"")+t.toString(16)}function _p(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Dt(t,n,e,r)}function wp(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof Di||(t=Rn(t)),!t)return new Dt;if(t instanceof Dt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,l=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Dt(a,s,l,t.opacity)}function Cp(t,n,e,r){return arguments.length===1?wp(t):new Dt(t,n,e,r??1)}function Dt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}fa(Dt,Cp,rl(Di,{brighter(t){return t=t==null?ga:Math.pow(ga,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xi:Math.pow(xi,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Ke(il(t>=240?t-240:t+120,i,r),il(t,i,r),il(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Dt(yp(this.h),ma(this.s),ma(this.l),va(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=va(this.opacity);return`${t===1?"hsl(":"hsla("}${yp(this.h)}, ${ma(this.s)*100}%, ${ma(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yp(t){return t=(t||0)%360,t<0?t+360:t}function ma(t){return Math.max(0,Math.min(1,t||0))}function il(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function ol(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function bp(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<n-1?t[r+2]:2*o-i;return ol((e-r/n)*n,a,i,o,s)}}function xp(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],s=t[(r+2)%n];return ol((e-r/n)*n,i,o,a,s)}}var al=t=>()=>t;function Yv(t,n){return function(e){return t+e*n}}function Kv(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Sp(t){return(t=+t)==1?_a:function(n,e){return e-n?Kv(n,e,t):al(isNaN(n)?e:n)}}function _a(t,n){var e=n-t;return e?Yv(t,e):al(isNaN(t)?n:t)}var ya=(function t(n){var e=Sp(n);function r(i,o){var a=e((i=kr(i)).r,(o=kr(o)).r),s=e(i.g,o.g),l=e(i.b,o.b),c=_a(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function Dp(t){return function(n){var e=n.length,r=new Array(e),i=new Array(e),o=new Array(e),a,s;for(a=0;a<e;++a)s=kr(n[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=o(l),s+""}}}var Jv=Dp(bp),Zv=Dp(xp);function ft(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(ll.source,"g");function e_(t){return function(){return t}}function t_(t){return function(n){return t(n)+""}}function cl(t,n){var e=ll.lastIndex=sl.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",n=n+"";(r=ll.exec(t))&&(i=sl.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ft(r,i)})),e=sl.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?t_(l[0].x):e_(n):(n=l.length,function(c){for(var u=0,p;u<n;++u)s[(p=l[u]).i]=p.x(c);return s.join("")})}var Tp=180/Math.PI,wa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ul(t,n,e,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,l/=s),t*r<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Tp,skewX:Math.atan(l)*Tp,scaleX:a,scaleY:s}}var Ca;function Ep(t){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?wa:ul(n.a,n.b,n.c,n.d,n.e,n.f)}function Rp(t){return t==null?wa:(Ca||(Ca=document.createElementNS("http://www.w3.org/2000/svg","g")),Ca.setAttribute("transform",t),(t=Ca.transform.baseVal.consolidate())?(t=t.matrix,ul(t.a,t.b,t.c,t.d,t.e,t.f)):wa)}function Mp(t,n,e,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,p,h,m,T){if(c!==p||u!==h){var x=m.push("translate(",null,n,null,e);T.push({i:x-4,x:ft(c,p)},{i:x-2,x:ft(u,h)})}else(p||h)&&m.push("translate("+p+n+h+e)}function a(c,u,p,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:p.push(i(p)+"rotate(",null,r)-2,x:ft(c,u)})):u&&p.push(i(p)+"rotate("+u+r)}function s(c,u,p,h){c!==u?h.push({i:p.push(i(p)+"skewX(",null,r)-2,x:ft(c,u)}):u&&p.push(i(p)+"skewX("+u+r)}function l(c,u,p,h,m,T){if(c!==p||u!==h){var x=m.push(i(m)+"scale(",null,",",null,")");T.push({i:x-4,x:ft(c,p)},{i:x-2,x:ft(u,h)})}else(p!==1||h!==1)&&m.push(i(m)+"scale("+p+","+h+")")}return function(c,u){var p=[],h=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,p,h),a(c.rotate,u.rotate,p,h),s(c.skewX,u.skewX,p,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,p,h),c=u=null,function(m){for(var T=-1,x=h.length,y;++T<x;)p[(y=h[T]).i]=y.x(m);return p.join("")}}}var dl=Mp(Ep,"px, ","px)","deg)"),pl=Mp(Rp,", ",")",")");var n_=1e-12;function Op(t){return((t=Math.exp(t))+1/t)/2}function r_(t){return((t=Math.exp(t))-1/t)/2}function i_(t){return((t=Math.exp(2*t))-1)/(t+1)}var fl=(function t(n,e,r){function i(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],p=a[1],h=a[2],m=u-s,T=p-l,x=m*m+T*T,y,v;if(x<n_)v=Math.log(h/c)/n,y=function($){return[s+$*m,l+$*T,c*Math.exp(n*$*v)]};else{var E=Math.sqrt(x),L=(h*h-c*c+r*x)/(2*c*e*E),w=(h*h-c*c-r*x)/(2*h*e*E),A=Math.log(Math.sqrt(L*L+1)-L),B=Math.log(Math.sqrt(w*w+1)-w);v=(B-A)/n,y=function($){var re=$*v,ye=Op(A),ce=c/(e*E)*(ye*i_(n*re+A)-r_(A));return[s+ce*m,l+ce*T,c*ye/Op(n*re+A)]}}return y.duration=v*1e3*n/Math.SQRT2,y}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return t(a,s,l)},i})(Math.SQRT2,2,4);var Ir=0,Ei=0,Ti=0,Ip=1e3,ba,Ri,xa=0,Zn=0,Sa=0,Mi=typeof performance=="object"&&performance.now?performance:Date,Np=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ki(){return Zn||(Np(o_),Zn=Mi.now()+Sa)}function o_(){Zn=0}function Oi(){this._call=this._time=this._next=null}Oi.prototype=Nr.prototype={constructor:Oi,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?ki():+e)+(n==null?0:+n),!this._next&&Ri!==this&&(Ri?Ri._next=this:ba=this,Ri=this),this._call=t,this._time=e,hl()},stop:function(){this._call&&(this._call=null,this._time=1/0,hl())}};function Nr(t,n,e){var r=new Oi;return r.restart(t,n,e),r}function Pp(){ki(),++Ir;for(var t=ba,n;t;)(n=Zn-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Ir}function kp(){Zn=(xa=Mi.now())+Sa,Ir=Ei=0;try{Pp()}finally{Ir=0,s_(),Zn=0}}function a_(){var t=Mi.now(),n=t-xa;n>Ip&&(Sa-=n,xa=t)}function s_(){for(var t,n=ba,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ba=e);Ri=t,hl(r)}function hl(t){if(!Ir){Ei&&(Ei=clearTimeout(Ei));var n=t-Zn;n>24?(t<1/0&&(Ei=setTimeout(kp,t-Mi.now()-Sa)),Ti&&(Ti=clearInterval(Ti))):(Ti||(xa=Mi.now(),Ti=setInterval(a_,Ip)),Ir=1,Np(kp))}}function Da(t,n,e){var r=new Oi;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var l_=en("start","end","cancel","interrupt"),c_=[],zp=0,Ap=1,Ea=2,Ta=3,Lp=4,Ra=5,Ii=6;function Mn(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;u_(t,e,{name:n,index:r,group:i,on:l_,tween:c_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zp})}function Ni(t,n){var e=Oe(t,n);if(e.state>zp)throw new Error("too late; already scheduled");return e}function Ae(t,n){var e=Oe(t,n);if(e.state>Ta)throw new Error("too late; already running");return e}function Oe(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function u_(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Nr(o,0,e.time);function o(c){e.state=Ap,e.timer.restart(a,e.delay,e.time),e.delay<=c&&a(c-e.delay)}function a(c){var u,p,h,m;if(e.state!==Ap)return l();for(u in r)if(m=r[u],m.name===e.name){if(m.state===Ta)return Da(a);m.state===Lp?(m.state=Ii,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[u]):+u<n&&(m.state=Ii,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[u])}if(Da(function(){e.state===Ta&&(e.state=Lp,e.timer.restart(s,e.delay,e.time),s(c))}),e.state=Ea,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Ea){for(e.state=Ta,i=new Array(h=e.tween.length),u=0,p=-1;u<h;++u)(m=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++p]=m);i.length=p+1}}function s(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=Ra,1),p=-1,h=i.length;++p<h;)i[p].call(t,u);e.state===Ra&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=Ii,e.timer.stop(),delete r[n];for(var c in r)return;delete t.__transition}}function On(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>Ea&&r.state<Ra,r.state=Ii,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function Fp(t){return this.each(function(){On(this,t)})}function d_(t,n){var e,r;return function(){var i=Ae(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function p_(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=Ae(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},l=0,c=i.length;l<c;++l)if(i[l].name===n){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function jp(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=Oe(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?d_:p_)(e,t,n))}function Pr(t,n,e){var r=t._id;return t.each(function(){var i=Ae(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return Oe(i,r).value[n]}}function Ma(t,n){var e;return(typeof n=="number"?ft:n instanceof Rn?ya:(e=Rn(n))?(n=e,ya):cl)(t,n)}function f_(t){return function(){this.removeAttribute(t)}}function h_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m_(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function g_(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function v_(t,n,e){var r,i,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s)))}}function __(t,n,e){var r,i,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s)))}}function Up(t,n){var e=tn(t),r=e==="transform"?pl:Ma;return this.attrTween(t,typeof n=="function"?(e.local?__:v_)(e,r,Pr(this,"attr."+t,n)):n==null?(e.local?h_:f_)(e):(e.local?g_:m_)(e,r,n))}function y_(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function w_(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function C_(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&w_(t,o)),e}return i._value=n,i}function b_(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&y_(t,o)),e}return i._value=n,i}function Vp(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=tn(t);return this.tween(e,(r.local?C_:b_)(r,n))}function x_(t,n){return function(){Ni(this,t).delay=+n.apply(this,arguments)}}function S_(t,n){return n=+n,function(){Ni(this,t).delay=n}}function Bp(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?x_:S_)(n,t)):Oe(this.node(),n).delay}function D_(t,n){return function(){Ae(this,t).duration=+n.apply(this,arguments)}}function T_(t,n){return n=+n,function(){Ae(this,t).duration=n}}function $p(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?D_:T_)(n,t)):Oe(this.node(),n).duration}function E_(t,n){if(typeof n!="function")throw new Error;return function(){Ae(this,t).ease=n}}function Gp(t){var n=this._id;return arguments.length?this.each(E_(n,t)):Oe(this.node(),n).ease}function R_(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Ae(this,t).ease=e}}function Hp(t){if(typeof t!="function")throw new Error;return this.each(R_(this._id,t))}function qp(t){typeof t!="function"&&(t=vi(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new Be(r,this._parents,this._name,this._id)}function Wp(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=n[s],c=e[s],u=l.length,p=a[s]=new Array(u),h,m=0;m<u;++m)(h=l[m]||c[m])&&(p[m]=h);for(;s<r;++s)a[s]=n[s];return new Be(a,this._parents,this._name,this._id)}function M_(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function O_(t,n,e){var r,i,o=M_(n)?Ni:Ae;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function Xp(t,n){var e=this._id;return arguments.length<2?Oe(this.node(),e).on.on(t):this.each(O_(e,t,n))}function k_(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Qp(){return this.on("end.remove",k_(this._id))}function Yp(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Qn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,c=o[a]=new Array(l),u,p,h=0;h<l;++h)(u=s[h])&&(p=t.call(u,u.__data__,h,s))&&("__data__"in u&&(p.__data__=u.__data__),c[h]=p,Mn(c[h],n,e,h,c,Oe(u,e)));return new Be(o,this._parents,n,e)}function Kp(t){var n=this._name,e=this._id;typeof t!="function"&&(t=gi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,p=0;p<c;++p)if(u=l[p]){for(var h=t.call(u,u.__data__,p,l),m,T=Oe(u,e),x=0,y=h.length;x<y;++x)(m=h[x])&&Mn(m,n,e,x,h,T);o.push(h),a.push(u)}return new Be(o,a,n,e)}var I_=nn.prototype.constructor;function Jp(){return new I_(this._groups,this._parents)}function N_(t,n){var e,r,i;return function(){var o=Tn(this,t),a=(this.style.removeProperty(t),Tn(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Zp(t){return function(){this.style.removeProperty(t)}}function P_(t,n,e){var r,i=e+"",o;return function(){var a=Tn(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function A_(t,n,e){var r,i,o;return function(){var a=Tn(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Tn(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=n(r=a,s))}}function L_(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var l=Ae(this,t),c=l.on,u=l.value[o]==null?s||(s=Zp(n)):void 0;(c!==e||i!==u)&&(r=(e=c).copy()).on(a,i=u),l.on=r}}function ef(t,n,e){var r=(t+="")=="transform"?dl:Ma;return n==null?this.styleTween(t,N_(t,r)).on("end.style."+t,Zp(t)):typeof n=="function"?this.styleTween(t,A_(t,r,Pr(this,"style."+t,n))).each(L_(this._id,t)):this.styleTween(t,P_(t,r,n),e).on("end.style."+t,null)}function z_(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function F_(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&z_(t,a,e)),r}return o._value=n,o}function tf(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,F_(t,n,e??""))}function j_(t){return function(){this.textContent=t}}function U_(t){return function(){var n=t(this);this.textContent=n??""}}function nf(t){return this.tween("text",typeof t=="function"?U_(Pr(this,"text",t)):j_(t==null?"":t+""))}function V_(t){return function(n){this.textContent=t.call(this,n)}}function B_(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&V_(i)),n}return r._value=t,r}function rf(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,B_(t))}function of(){for(var t=this._name,n=this._id,e=Oa(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=Oe(l,n);Mn(l,t,e,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Be(r,this._parents,t,e)}function af(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};e.each(function(){var c=Ae(this,r),u=c.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),c.on=n}),i===0&&o()})}var $_=0;function Be(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function sf(t){return nn().transition(t)}function Oa(){return++$_}var rn=nn.prototype;Be.prototype=sf.prototype={constructor:Be,select:Yp,selectAll:Kp,selectChild:rn.selectChild,selectChildren:rn.selectChildren,filter:qp,merge:Wp,selection:Jp,transition:of,call:rn.call,nodes:rn.nodes,node:rn.node,size:rn.size,empty:rn.empty,each:rn.each,on:Xp,attr:Up,attrTween:Vp,style:ef,styleTween:tf,text:nf,textTween:rf,remove:Qp,tween:jp,delay:Bp,duration:$p,ease:Gp,easeVarying:Hp,end:af,[Symbol.iterator]:rn[Symbol.iterator]};function ka(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var G_={time:null,delay:0,duration:250,ease:ka};function H_(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function lf(t){var n,e;t instanceof Be?(n=t._id,t=t._name):(n=Oa(),(e=G_).time=ki(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&Mn(l,t,n,c,a,e||H_(l,n));return new Be(r,this._parents,t,n)}nn.prototype.interrupt=Fp;nn.prototype.transition=lf;var{abs:jM,max:UM,min:VM}=Math;function cf(t){return[+t[0],+t[1]]}function q_(t){return[cf(t[0]),cf(t[1])]}var BM={name:"x",handles:["w","e"].map(ml),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},$M={name:"y",handles:["n","s"].map(ml),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},GM={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ml),input:function(t){return t==null?null:q_(t)},output:function(t){return t}};function ml(t){return{type:t}}function gl(t,n){var e,r=1;t==null&&(t=0),n==null&&(n=0);function i(){var o,a=e.length,s,l=0,c=0;for(o=0;o<a;++o)s=e[o],l+=s.x,c+=s.y;for(l=(l/a-t)*r,c=(c/a-n)*r,o=0;o<a;++o)s=e[o],s.x-=l,s.y-=c}return i.initialize=function(o){e=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(n=+o,i):n},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function uf(t){let n=+this._x.call(null,t),e=+this._y.call(null,t);return df(this.cover(n,e),n,e,t)}function df(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o=t._root,a={data:r},s=t._x0,l=t._y0,c=t._x1,u=t._y1,p,h,m,T,x,y,v,E;if(!o)return t._root=a,t;for(;o.length;)if((x=n>=(p=(s+c)/2))?s=p:c=p,(y=e>=(h=(l+u)/2))?l=h:u=h,i=o,!(o=o[v=y<<1|x]))return i[v]=a,t;if(m=+t._x.call(null,o.data),T=+t._y.call(null,o.data),n===m&&e===T)return a.next=o,i?i[v]=a:t._root=a,t;do i=i?i[v]=new Array(4):t._root=new Array(4),(x=n>=(p=(s+c)/2))?s=p:c=p,(y=e>=(h=(l+u)/2))?l=h:u=h;while((v=y<<1|x)===(E=(T>=h)<<1|m>=p));return i[E]=o,i[v]=a,t}function pf(t){var n,e,r=t.length,i,o,a=new Array(r),s=new Array(r),l=1/0,c=1/0,u=-1/0,p=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=i,s[e]=o,i<l&&(l=i),i>u&&(u=i),o<c&&(c=o),o>p&&(p=o));if(l>u||c>p)return this;for(this.cover(l,c).cover(u,p),e=0;e<r;++e)df(this,a[e],s[e],t[e]);return this}function ff(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a=i-e||1,s=this._root,l,c;e>t||t>=i||r>n||n>=o;)switch(c=(n<r)<<1|t<e,l=new Array(4),l[c]=s,s=l,a*=2,c){case 0:i=e+a,o=r+a;break;case 1:e=i-a,o=r+a;break;case 2:i=e+a,r=o-a;break;case 3:e=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this}function hf(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function mf(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ne(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function gf(t,n,e){var r,i=this._x0,o=this._y0,a,s,l,c,u=this._x1,p=this._y1,h=[],m=this._root,T,x;for(m&&h.push(new Ne(m,i,o,u,p)),e==null?e=1/0:(i=t-e,o=n-e,u=t+e,p=n+e,e*=e);T=h.pop();)if(!(!(m=T.node)||(a=T.x0)>u||(s=T.y0)>p||(l=T.x1)<i||(c=T.y1)<o))if(m.length){var y=(a+l)/2,v=(s+c)/2;h.push(new Ne(m[3],y,v,l,c),new Ne(m[2],a,v,y,c),new Ne(m[1],y,s,l,v),new Ne(m[0],a,s,y,v)),(x=(n>=v)<<1|t>=y)&&(T=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=T)}else{var E=t-+this._x.call(null,m.data),L=n-+this._y.call(null,m.data),w=E*E+L*L;if(w<e){var A=Math.sqrt(e=w);i=t-A,o=n-A,u=t+A,p=n+A,r=m.data}}return r}function vf(t){if(isNaN(u=+this._x.call(null,t))||isNaN(p=+this._y.call(null,t)))return this;var n,e=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,c=this._y1,u,p,h,m,T,x,y,v;if(!e)return this;if(e.length)for(;;){if((T=u>=(h=(a+l)/2))?a=h:l=h,(x=p>=(m=(s+c)/2))?s=m:c=m,n=e,!(e=e[y=x<<1|T]))return this;if(!e.length)break;(n[y+1&3]||n[y+2&3]||n[y+3&3])&&(r=n,v=y)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,i?(o?i.next=o:delete i.next,this):n?(o?n[y]=o:delete n[y],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[v]=e:this._root=e),this):(this._root=o,this)}function _f(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function yf(){return this._root}function wf(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Cf(t){var n=[],e,r=this._root,i,o,a,s,l;for(r&&n.push(new Ne(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,o=e.x0,a=e.y0,s=e.x1,l=e.y1)&&r.length){var c=(o+s)/2,u=(a+l)/2;(i=r[3])&&n.push(new Ne(i,c,u,s,l)),(i=r[2])&&n.push(new Ne(i,o,u,c,l)),(i=r[1])&&n.push(new Ne(i,c,a,s,u)),(i=r[0])&&n.push(new Ne(i,o,a,c,u))}return this}function bf(t){var n=[],e=[],r;for(this._root&&n.push(new Ne(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,p=(s+c)/2;(o=i[0])&&n.push(new Ne(o,a,s,u,p)),(o=i[1])&&n.push(new Ne(o,u,s,l,p)),(o=i[2])&&n.push(new Ne(o,a,p,u,c)),(o=i[3])&&n.push(new Ne(o,u,p,l,c))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function xf(t){return t[0]}function Sf(t){return arguments.length?(this._x=t,this):this._x}function Df(t){return t[1]}function Tf(t){return arguments.length?(this._y=t,this):this._y}function er(t,n,e){var r=new vl(n??xf,e??Df,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function vl(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Ef(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var $e=er.prototype=vl.prototype;$e.copy=function(){var t=new vl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Ef(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Ef(r));return t};$e.add=uf;$e.addAll=pf;$e.cover=ff;$e.data=hf;$e.extent=mf;$e.find=gf;$e.remove=vf;$e.removeAll=_f;$e.root=yf;$e.size=wf;$e.visit=Cf;$e.visitAfter=bf;$e.x=Sf;$e.y=Tf;function $t(t){return function(){return t}}function Tt(t){return(t()-.5)*1e-6}function W_(t){return t.x+t.vx}function X_(t){return t.y+t.vy}function _l(t){var n,e,r,i=1,o=1;typeof t!="function"&&(t=$t(t==null?1:+t));function a(){for(var c,u=n.length,p,h,m,T,x,y,v=0;v<o;++v)for(p=er(n,W_,X_).visitAfter(s),c=0;c<u;++c)h=n[c],x=e[h.index],y=x*x,m=h.x+h.vx,T=h.y+h.vy,p.visit(E);function E(L,w,A,B,$){var re=L.data,ye=L.r,ce=x+ye;if(re){if(re.index>h.index){var Se=m-re.x-re.vx,Je=T-re.y-re.vy,Ge=Se*Se+Je*Je;Ge<ce*ce&&(Se===0&&(Se=Tt(r),Ge+=Se*Se),Je===0&&(Je=Tt(r),Ge+=Je*Je),Ge=(ce-(Ge=Math.sqrt(Ge)))/Ge*i,h.vx+=(Se*=Ge)*(ce=(ye*=ye)/(y+ye)),h.vy+=(Je*=Ge)*ce,re.vx-=Se*(ce=1-ce),re.vy-=Je*ce)}return}return w>m+ce||B<m-ce||A>T+ce||$<T-ce}}function s(c){if(c.data)return c.r=e[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(n){var c,u=n.length,p;for(e=new Array(u),c=0;c<u;++c)p=n[c],e[p.index]=+t(p,c,n)}}return a.initialize=function(c,u){n=c,r=u,l()},a.iterations=function(c){return arguments.length?(o=+c,a):o},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:$t(+c),l(),a):t},a}function Q_(t){return t.index}function Rf(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function yl(t){var n=Q_,e=p,r,i=$t(30),o,a,s,l,c,u=1;t==null&&(t=[]);function p(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function h(y){for(var v=0,E=t.length;v<u;++v)for(var L=0,w,A,B,$,re,ye,ce;L<E;++L)w=t[L],A=w.source,B=w.target,$=B.x+B.vx-A.x-A.vx||Tt(c),re=B.y+B.vy-A.y-A.vy||Tt(c),ye=Math.sqrt($*$+re*re),ye=(ye-o[L])/ye*y*r[L],$*=ye,re*=ye,B.vx-=$*(ce=l[L]),B.vy-=re*ce,A.vx+=$*(ce=1-ce),A.vy+=re*ce}function m(){if(a){var y,v=a.length,E=t.length,L=new Map(a.map((A,B)=>[n(A,B,a),A])),w;for(y=0,s=new Array(v);y<E;++y)w=t[y],w.index=y,typeof w.source!="object"&&(w.source=Rf(L,w.source)),typeof w.target!="object"&&(w.target=Rf(L,w.target)),s[w.source.index]=(s[w.source.index]||0)+1,s[w.target.index]=(s[w.target.index]||0)+1;for(y=0,l=new Array(E);y<E;++y)w=t[y],l[y]=s[w.source.index]/(s[w.source.index]+s[w.target.index]);r=new Array(E),T(),o=new Array(E),x()}}function T(){if(a)for(var y=0,v=t.length;y<v;++y)r[y]=+e(t[y],y,t)}function x(){if(a)for(var y=0,v=t.length;y<v;++y)o[y]=+i(t[y],y,t)}return h.initialize=function(y,v){a=y,c=v,m()},h.links=function(y){return arguments.length?(t=y,m(),h):t},h.id=function(y){return arguments.length?(n=y,h):n},h.iterations=function(y){return arguments.length?(u=+y,h):u},h.strength=function(y){return arguments.length?(e=typeof y=="function"?y:$t(+y),T(),h):e},h.distance=function(y){return arguments.length?(i=typeof y=="function"?y:$t(+y),x(),h):i},h}function Mf(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function Of(t){return t.x}function kf(t){return t.y}var Y_=10,K_=Math.PI*(3-Math.sqrt(5));function wl(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=Nr(p),c=en("tick","end"),u=Mf();t==null&&(t=[]);function p(){h(),c.call("tick",n),e<r&&(l.stop(),c.call("end",n))}function h(x){var y,v=t.length,E;x===void 0&&(x=1);for(var L=0;L<x;++L)for(e+=(o-e)*i,s.forEach(function(w){w(e)}),y=0;y<v;++y)E=t[y],E.fx==null?E.x+=E.vx*=a:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=a:(E.y=E.fy,E.vy=0);return n}function m(){for(var x=0,y=t.length,v;x<y;++x){if(v=t[x],v.index=x,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var E=Y_*Math.sqrt(.5+x),L=x*K_;v.x=E*Math.cos(L),v.y=E*Math.sin(L)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function T(x){return x.initialize&&x.initialize(t,u),x}return m(),n={tick:h,restart:function(){return l.restart(p),n},stop:function(){return l.stop(),n},nodes:function(x){return arguments.length?(t=x,m(),s.forEach(T),n):t},alpha:function(x){return arguments.length?(e=+x,n):e},alphaMin:function(x){return arguments.length?(r=+x,n):r},alphaDecay:function(x){return arguments.length?(i=+x,n):+i},alphaTarget:function(x){return arguments.length?(o=+x,n):o},velocityDecay:function(x){return arguments.length?(a=1-x,n):1-a},randomSource:function(x){return arguments.length?(u=x,s.forEach(T),n):u},force:function(x,y){return arguments.length>1?(y==null?s.delete(x):s.set(x,T(y)),n):s.get(x)},find:function(x,y,v){var E=0,L=t.length,w,A,B,$,re;for(v==null?v=1/0:v*=v,E=0;E<L;++E)$=t[E],w=x-$.x,A=y-$.y,B=w*w+A*A,B<v&&(re=$,v=B);return re},on:function(x,y){return arguments.length>1?(c.on(x,y),n):c.on(x)}}}function Cl(){var t,n,e,r,i=$t(-30),o,a=1,s=1/0,l=.81;function c(m){var T,x=t.length,y=er(t,Of,kf).visitAfter(p);for(r=m,T=0;T<x;++T)n=t[T],y.visit(h)}function u(){if(t){var m,T=t.length,x;for(o=new Array(T),m=0;m<T;++m)x=t[m],o[x.index]=+i(x,m,t)}}function p(m){var T=0,x,y,v=0,E,L,w;if(m.length){for(E=L=w=0;w<4;++w)(x=m[w])&&(y=Math.abs(x.value))&&(T+=x.value,v+=y,E+=y*x.x,L+=y*x.y);m.x=E/v,m.y=L/v}else{x=m,x.x=x.data.x,x.y=x.data.y;do T+=o[x.data.index];while(x=x.next)}m.value=T}function h(m,T,x,y){if(!m.value)return!0;var v=m.x-n.x,E=m.y-n.y,L=y-T,w=v*v+E*E;if(L*L/l<w)return w<s&&(v===0&&(v=Tt(e),w+=v*v),E===0&&(E=Tt(e),w+=E*E),w<a&&(w=Math.sqrt(a*w)),n.vx+=v*m.value*r/w,n.vy+=E*m.value*r/w),!0;if(m.length||w>=s)return;(m.data!==n||m.next)&&(v===0&&(v=Tt(e),w+=v*v),E===0&&(E=Tt(e),w+=E*E),w<a&&(w=Math.sqrt(a*w)));do m.data!==n&&(L=o[m.data.index]*r/w,n.vx+=v*L,n.vy+=E*L);while(m=m.next)}return c.initialize=function(m,T){t=m,e=T,u()},c.strength=function(m){return arguments.length?(i=typeof m=="function"?m:$t(+m),u(),c):i},c.distanceMin=function(m){return arguments.length?(a=m*m,c):Math.sqrt(a)},c.distanceMax=function(m){return arguments.length?(s=m*m,c):Math.sqrt(s)},c.theta=function(m){return arguments.length?(l=m*m,c):Math.sqrt(l)},c}var Pi=t=>()=>t;function bl(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Et(t,n,e){this.k=t,this.x=n,this.y=e}Et.prototype={constructor:Et,scale:function(t){return t===1?this:new Et(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Et(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tr=new Et(1,0,0);xl.prototype=Et.prototype;function xl(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tr;return t.__zoom}function Ia(t){t.stopImmediatePropagation()}function Ar(t){t.preventDefault(),t.stopImmediatePropagation()}function J_(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Z_(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function If(){return this.__zoom||tr}function ey(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ty(){return navigator.maxTouchPoints||"ontouchstart"in this}function ny(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Sl(){var t=J_,n=Z_,e=ny,r=ey,i=ty,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=fl,c=en("start","zoom","end"),u,p,h,m=500,T=150,x=0,y=10;function v(C){C.property("__zoom",If).on("wheel.zoom",re,{passive:!1}).on("mousedown.zoom",ye).on("dblclick.zoom",ce).filter(i).on("touchstart.zoom",Se).on("touchmove.zoom",Je).on("touchend.zoom touchcancel.zoom",Ge).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(C,z,D,F){var Y=C.selection?C.selection():C;Y.property("__zoom",If),C!==Y?A(C,z,D,F):Y.interrupt().each(function(){B(this,arguments).event(F).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},v.scaleBy=function(C,z,D,F){v.scaleTo(C,function(){var Y=this.__zoom.k,J=typeof z=="function"?z.apply(this,arguments):z;return Y*J},D,F)},v.scaleTo=function(C,z,D,F){v.transform(C,function(){var Y=n.apply(this,arguments),J=this.__zoom,Z=D==null?w(Y):typeof D=="function"?D.apply(this,arguments):D,ge=J.invert(Z),De=typeof z=="function"?z.apply(this,arguments):z;return e(L(E(J,De),Z,ge),Y,a)},D,F)},v.translateBy=function(C,z,D,F){v.transform(C,function(){return e(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof D=="function"?D.apply(this,arguments):D),n.apply(this,arguments),a)},null,F)},v.translateTo=function(C,z,D,F,Y){v.transform(C,function(){var J=n.apply(this,arguments),Z=this.__zoom,ge=F==null?w(J):typeof F=="function"?F.apply(this,arguments):F;return e(tr.translate(ge[0],ge[1]).scale(Z.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof D=="function"?-D.apply(this,arguments):-D),J,a)},F,Y)};function E(C,z){return z=Math.max(o[0],Math.min(o[1],z)),z===C.k?C:new Et(z,C.x,C.y)}function L(C,z,D){var F=z[0]-D[0]*C.k,Y=z[1]-D[1]*C.k;return F===C.x&&Y===C.y?C:new Et(C.k,F,Y)}function w(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function A(C,z,D,F){C.on("start.zoom",function(){B(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(F).end()}).tween("zoom",function(){var Y=this,J=arguments,Z=B(Y,J).event(F),ge=n.apply(Y,J),De=D==null?w(ge):typeof D=="function"?D.apply(Y,J):D,Rt=Math.max(ge[1][0]-ge[0][0],ge[1][1]-ge[0][1]),Pe=Y.__zoom,ht=typeof z=="function"?z.apply(Y,J):z,Gt=l(Pe.invert(De).concat(Rt/Pe.k),ht.invert(De).concat(Rt/ht.k));return function(mt){if(mt===1)mt=ht;else{var Ht=Gt(mt),$a=Rt/Ht[2];mt=new Et($a,De[0]-Ht[0]*$a,De[1]-Ht[1]*$a)}Z.zoom(null,mt)}})}function B(C,z,D){return!D&&C.__zooming||new $(C,z)}function $(C,z){this.that=C,this.args=z,this.active=0,this.sourceEvent=null,this.extent=n.apply(C,z),this.taps=0}$.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,z){return this.mouse&&C!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var z=je(this.that).datum();c.call(C,this.that,new bl(C,{sourceEvent:this.sourceEvent,target:v,type:C,transform:this.that.__zoom,dispatch:c}),z)}};function re(C,...z){if(!t.apply(this,arguments))return;var D=B(this,z).event(C),F=this.__zoom,Y=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),J=pt(C);if(D.wheel)(D.mouse[0][0]!==J[0]||D.mouse[0][1]!==J[1])&&(D.mouse[1]=F.invert(D.mouse[0]=J)),clearTimeout(D.wheel);else{if(F.k===Y)return;D.mouse=[J,F.invert(J)],On(this),D.start()}Ar(C),D.wheel=setTimeout(Z,T),D.zoom("mouse",e(L(E(F,Y),D.mouse[0],D.mouse[1]),D.extent,a));function Z(){D.wheel=null,D.end()}}function ye(C,...z){if(h||!t.apply(this,arguments))return;var D=C.currentTarget,F=B(this,z,!0).event(C),Y=je(C.view).on("mousemove.zoom",De,!0).on("mouseup.zoom",Rt,!0),J=pt(C,D),Z=C.clientX,ge=C.clientY;yi(C.view),Ia(C),F.mouse=[J,this.__zoom.invert(J)],On(this),F.start();function De(Pe){if(Ar(Pe),!F.moved){var ht=Pe.clientX-Z,Gt=Pe.clientY-ge;F.moved=ht*ht+Gt*Gt>x}F.event(Pe).zoom("mouse",e(L(F.that.__zoom,F.mouse[0]=pt(Pe,D),F.mouse[1]),F.extent,a))}function Rt(Pe){Y.on("mousemove.zoom mouseup.zoom",null),wi(Pe.view,F.moved),Ar(Pe),F.event(Pe).end()}}function ce(C,...z){if(t.apply(this,arguments)){var D=this.__zoom,F=pt(C.changedTouches?C.changedTouches[0]:C,this),Y=D.invert(F),J=D.k*(C.shiftKey?.5:2),Z=e(L(E(D,J),F,Y),n.apply(this,z),a);Ar(C),s>0?je(this).transition().duration(s).call(A,Z,F,C):je(this).call(v.transform,Z,F,C)}}function Se(C,...z){if(t.apply(this,arguments)){var D=C.touches,F=D.length,Y=B(this,z,C.changedTouches.length===F).event(C),J,Z,ge,De;for(Ia(C),Z=0;Z<F;++Z)ge=D[Z],De=pt(ge,this),De=[De,this.__zoom.invert(De),ge.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==De[2]&&(Y.touch1=De,Y.taps=0):(Y.touch0=De,J=!0,Y.taps=1+!!u);u&&(u=clearTimeout(u)),J&&(Y.taps<2&&(p=De[0],u=setTimeout(function(){u=null},m)),On(this),Y.start())}}function Je(C,...z){if(this.__zooming){var D=B(this,z).event(C),F=C.changedTouches,Y=F.length,J,Z,ge,De;for(Ar(C),J=0;J<Y;++J)Z=F[J],ge=pt(Z,this),D.touch0&&D.touch0[2]===Z.identifier?D.touch0[0]=ge:D.touch1&&D.touch1[2]===Z.identifier&&(D.touch1[0]=ge);if(Z=D.that.__zoom,D.touch1){var Rt=D.touch0[0],Pe=D.touch0[1],ht=D.touch1[0],Gt=D.touch1[1],mt=(mt=ht[0]-Rt[0])*mt+(mt=ht[1]-Rt[1])*mt,Ht=(Ht=Gt[0]-Pe[0])*Ht+(Ht=Gt[1]-Pe[1])*Ht;Z=E(Z,Math.sqrt(mt/Ht)),ge=[(Rt[0]+ht[0])/2,(Rt[1]+ht[1])/2],De=[(Pe[0]+Gt[0])/2,(Pe[1]+Gt[1])/2]}else if(D.touch0)ge=D.touch0[0],De=D.touch0[1];else return;D.zoom("touch",e(L(Z,ge,De),D.extent,a))}}function Ge(C,...z){if(this.__zooming){var D=B(this,z).event(C),F=C.changedTouches,Y=F.length,J,Z;for(Ia(C),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),J=0;J<Y;++J)Z=F[J],D.touch0&&D.touch0[2]===Z.identifier?delete D.touch0:D.touch1&&D.touch1[2]===Z.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(Z=pt(Z,this),Math.hypot(p[0]-Z[0],p[1]-Z[1])<y)){var ge=je(this).on("dblclick.zoom");ge&&ge.apply(this,arguments)}}}return v.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Pi(+C),v):r},v.filter=function(C){return arguments.length?(t=typeof C=="function"?C:Pi(!!C),v):t},v.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:Pi(!!C),v):i},v.extent=function(C){return arguments.length?(n=typeof C=="function"?C:Pi([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),v):n},v.scaleExtent=function(C){return arguments.length?(o[0]=+C[0],o[1]=+C[1],v):[o[0],o[1]]},v.translateExtent=function(C){return arguments.length?(a[0][0]=+C[0][0],a[1][0]=+C[1][0],a[0][1]=+C[0][1],a[1][1]=+C[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(C){return arguments.length?(e=C,v):e},v.duration=function(C){return arguments.length?(s=+C,v):s},v.interpolate=function(C){return arguments.length?(l=C,v):l},v.on=function(){var C=c.on.apply(c,arguments);return C===c?v:C},v.clickDistance=function(C){return arguments.length?(x=(C=+C)*C,v):Math.sqrt(x)},v.tapDistance=function(C){return arguments.length?(y=+C,v):y},v}var iy=["networkContainer"],oy=["svgElement"],Le={INITIAL_SPACING_RADIUS_RATIO:1/2,INITIAL_RANDOM_OFFSET:50,ALPHA_DECAY:.05,LINK_DISTANCE:120,LINK_STRENGTH:.2,CHARGE_STRENGTH:-100,CHARGE_DISTANCE_MIN:50,CHARGE_DISTANCE_MAX:500,CENTER_FORCE_STRENGTH:.05,COLLISION_RADIUS:50,COLLISION_STRENGTH:.8,DRAG_ALPHA_TARGET:.01,NODE_RADIUS_COORDINATOR:25,NODE_RADIUS_ROUTER:20,NODE_RADIUS_ENDDEVICE:15,NODE_RADIUS_DEFAULT:20},Na=class t{networkContainer=Yt("networkContainer");svgElement=Yt("svgElement");networkData=me(null);selectedNode=P(null);connectedNodeIds=P(new Set);simulation;svgGroup;linkSelection;nodeSelection;labelSelection;zoomBehavior;containerWidth=800;containerHeight=600;draggedNode=null;d3Nodes=[];d3Links=[];fixedNodes=P(new Set);svgInitialized=!1;constructor(){Ce(()=>{this.networkData()&&this.svgInitialized&&this.initializeGraph()})}ngOnInit(){}ngAfterViewInit(){let n=this.networkContainer();n&&(this.containerWidth=n.nativeElement.clientWidth||800,this.containerHeight=n.nativeElement.clientHeight||600,this.setupSVG(),this.svgInitialized=!0,this.networkData()&&this.initializeGraph())}setupSVG(){let n=this.svgElement();if(!n)return;let e=je(n.nativeElement);e.attr("width",this.containerWidth).attr("height",this.containerHeight),this.svgGroup=e.append("g"),this.zoomBehavior=Sl().on("zoom",r=>{this.svgGroup.attr("transform",r.transform)}),e.call(this.zoomBehavior),e.on("dblclick.zoom",()=>{e.transition().duration(750).call(this.zoomBehavior.transform,tr.translate(this.containerWidth/2,this.containerHeight/2))})}prepareData(){let n=this.networkData();if(!n||!n.nodes||!n.links)return null;let e=n.links.filter(r=>{let i=r.sourceIeeeAddr,o=r.targetIeeeAddr,a=n.nodes.find(l=>l.ieeeAddr===i),s=n.nodes.find(l=>l.ieeeAddr===o);return a!==void 0&&s!==void 0});return ve(I({},n),{links:e})}initializeGraph(){let n=this.prepareData();if(n===null)return;let e=Math.min(this.containerWidth,this.containerHeight)*Le.INITIAL_SPACING_RADIUS_RATIO;this.d3Nodes=n.nodes.map((r,i)=>{let o=i/n.nodes.length*Math.PI*2,a=this.containerWidth/2+Math.cos(o)*e+(Math.random()-.5)*Le.INITIAL_RANDOM_OFFSET,s=this.containerHeight/2+Math.sin(o)*e+(Math.random()-.5)*Le.INITIAL_RANDOM_OFFSET;return{id:r.ieeeAddr,label:r.friendlyName,type:r.type,data:r,x:a,y:s}}),this.d3Links=n.links.map(r=>({source:r.sourceIeeeAddr,target:r.targetIeeeAddr,linkquality:r.linkquality,data:r,sourceId:r.sourceIeeeAddr,targetId:r.targetIeeeAddr})),this.simulation&&this.simulation.stop(),this.simulation=wl(this.d3Nodes).alphaDecay(Le.ALPHA_DECAY).force("link",yl(this.d3Links).id(r=>r.id).distance(Le.LINK_DISTANCE).strength(Le.LINK_STRENGTH)).force("charge",Cl().strength(Le.CHARGE_STRENGTH).distanceMin(Le.CHARGE_DISTANCE_MIN).distanceMax(Le.CHARGE_DISTANCE_MAX)).force("center",gl(this.containerWidth/2,this.containerHeight/2).strength(Le.CENTER_FORCE_STRENGTH)).force("collision",_l(Le.COLLISION_RADIUS).strength(Le.COLLISION_STRENGTH)),this.linkSelection=this.svgGroup.selectAll("line").data(this.d3Links,r=>`${r.source.id}-${r.target.id}`).join(r=>r.append("line").attr("stroke",i=>this.getLinkColor(i)).attr("stroke-width",2).attr("class","network-link"),r=>r.attr("stroke",i=>this.getLinkColor(i)),r=>r.remove()),this.svgGroup.selectAll("g.lqi-label-group").data(this.d3Links,r=>`${r.source.id}-${r.target.id}`).join(r=>{let i=r.append("g").attr("class","lqi-label-group");return i.append("rect").attr("class","lqi-label-bg").attr("width",24).attr("height",14).attr("x",-12).attr("y",-7).attr("rx",2).attr("fill","#1e1e2e").attr("stroke","#888").attr("stroke-width",1).attr("pointer-events","none"),i.each(function(o){let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("class","lqi-label-text"),a.setAttribute("text-anchor","middle"),a.setAttribute("dominant-baseline","central"),a.setAttribute("font-size","10px"),a.setAttribute("font-weight","700"),a.setAttribute("fill","#ffffff"),a.setAttribute("pointer-events","none");let s=o.data?.lqi??o.linkquality??0;a.textContent=s.toString(),this.appendChild(a)}),i},r=>(r.each(function(i){let o=je(this).select("text.lqi-label-text").node();if(o){let a=i.data?.lqi??i.linkquality??0;o.textContent=a.toString()}}),r),r=>r.remove()),this.nodeSelection=this.svgGroup.selectAll("circle").data(this.d3Nodes,r=>r.id).join(r=>r.append("circle").attr("class",i=>`network-node node-type-${i.type}`).attr("r",i=>this.getNodeRadius(i.type)).attr("fill",i=>this.getNodeFill(i.type)).attr("stroke",i=>this.getNodeStroke(i.type)).attr("stroke-width",i=>this.getNodeStrokeWidth(i.type)).attr("cursor","pointer").on("click",(i,o)=>this.onNodeClick(i,o)).on("dblclick",(i,o)=>this.onNodeDoubleClick(i,o)).call(i=>this.addDragBehavior(i)),r=>r,r=>r.remove()),this.labelSelection=this.svgGroup.selectAll("text.network-label").data(this.d3Nodes,r=>r.id).join(r=>r.append("text").attr("text-anchor","middle").attr("dy","0.3em").attr("class","network-label").attr("fill","#dfe0e3").attr("font-weight","500").attr("font-size","12px").attr("pointer-events","none").text(i=>i.label),r=>r,r=>r.remove()),this.simulation.on("tick",()=>{this.linkSelection.attr("x1",r=>r.source.x||0).attr("y1",r=>r.source.y||0).attr("x2",r=>r.target.x||0).attr("y2",r=>r.target.y||0),this.svgGroup.selectAll("g.lqi-label-group").attr("transform",r=>{let i=((r.source.x||0)+(r.target.x||0))/2,o=((r.source.y||0)+(r.target.y||0))/2;return`translate(${i},${o})`}),this.nodeSelection.attr("cx",r=>r.x||0).attr("cy",r=>r.y||0),this.labelSelection.attr("x",r=>r.x||0).attr("y",r=>r.y||0)})}addDragBehavior(n){let e=(o,a)=>{this.simulation.alphaTarget(Le.DRAG_ALPHA_TARGET).restart(),this.draggedNode=a,a.fx=a.x,a.fy=a.y},r=(o,a)=>{a.fx=o.x,a.fy=o.y},i=(o,a)=>{this.simulation.alphaTarget(0);let s=new Set(this.fixedNodes());s.add(a.id),this.fixedNodes.set(s),this.draggedNode=null};n.call(nl().on("start",e).on("drag",r).on("end",i))}onNodeClick(n,e){n.stopPropagation(),this.selectedNode()?.id===e.id?(this.selectedNode.set(null),this.connectedNodeIds.set(new Set)):(this.selectedNode.set(e),this.connectedNodeIds.set(this.getConnectedNodes(e.id))),this.updateNodeVisibility()}onNodeDoubleClick(n,e){n.stopPropagation();let r=new Set(this.fixedNodes());r.has(e.id)?(r.delete(e.id),e.fx=null,e.fy=null):(r.add(e.id),e.fx=e.x,e.fy=e.y),this.fixedNodes.set(r)}getConnectedNodes(n){let e=this.networkData();if(!e||!e.links)return new Set;let r=new Set;return r.add(n),e.links.forEach(i=>{i.sourceIeeeAddr===n?r.add(i.targetIeeeAddr):i.targetIeeeAddr===n&&r.add(i.sourceIeeeAddr)}),r}updateNodeVisibility(){let n=this.selectedNode(),e=this.connectedNodeIds();if(!n){this.nodeSelection.attr("opacity",1).attr("fill",r=>this.getNodeFill(r.type)),this.labelSelection.attr("opacity",1),this.linkSelection.attr("opacity",.6).attr("stroke",r=>this.getLinkColor(r)).attr("stroke-width",2);return}this.nodeSelection.attr("opacity",r=>e.has(r.id)?1:.3).attr("fill",r=>e.has(r.id)?this.getNodeFill(r.type):"#737c87"),this.labelSelection.attr("opacity",r=>e.has(r.id)?1:.3),this.linkSelection.attr("opacity",r=>{let i=typeof r.source=="string"?r.source:r.source.id,o=typeof r.target=="string"?r.target:r.target.id;return e.has(i)&&e.has(o)?.6:.1}).attr("stroke",r=>{let i=typeof r.source=="string"?r.source:r.source.id,o=typeof r.target=="string"?r.target:r.target.id;return e.has(i)&&e.has(o)?this.getLinkColor(r):"#737c87"})}onContainerClick(){this.selectedNode.set(null),this.connectedNodeIds.set(new Set),this.updateNodeVisibility()}getNodeRadius(n){switch(n){case"Coordinator":return Le.NODE_RADIUS_COORDINATOR;case"Router":return Le.NODE_RADIUS_ROUTER;case"EndDevice":return Le.NODE_RADIUS_ENDDEVICE;default:return Le.NODE_RADIUS_DEFAULT}}getNodeFill(n){switch(n){case"Coordinator":return"#dc2626";case"Router":return"#0891b2";case"EndDevice":return"#84cc16";default:return"#4797ff"}}getNodeStroke(n){switch(n){case"Coordinator":case"Router":return"#fff";case"EndDevice":return"rgba(0, 0, 0, 0.3)";default:return"#4797ff"}}getNodeStrokeWidth(n){switch(n){case"Coordinator":return 3;default:return 2}}getLinkColor(n){let e=n.source,r=n.target,i=e.type,o=r.type;return i==="EndDevice"||o==="EndDevice"?"#84cc16":i==="Router"||o==="Router"?"#0891b2":"#dc2626"}ngOnDestroy(){this.simulation&&this.simulation.stop()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-network-graph"]],viewQuery:function(e,r){e&1&&(Qt(r.networkContainer,iy,5),Qt(r.svgElement,oy,5)),e&2&&dn(2)},inputs:{networkData:[1,"networkData"]},decls:4,vars:0,consts:[["networkContainer",""],["svgElement",""],[1,"network-graph-container",3,"click"],[1,"network-svg"]],template:function(e,r){if(e&1){let i=K();ne(0,"div",2,0),ke("click",function(){return j(i),U(r.onContainerClick())}),Ur(),cn(2,"svg",3,1),oe()}},styles:[".network-graph-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background-color:var(--app-background-color);border-radius:8px;overflow:hidden}.network-graph-container[_ngcontent-%COMP%]   .network-svg[_ngcontent-%COMP%]{width:100%;height:100%;cursor:grab}.network-graph-container[_ngcontent-%COMP%]   .network-svg[_ngcontent-%COMP%]:active{cursor:grabbing}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]{fill:var(--network-graph-node-default);stroke:var(--network-graph-node-default);stroke-width:1px;transition:all .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]:hover{r:26;stroke-width:3px;filter:drop-shadow(0 0 8px var(--network-graph-node-hover-shadow))}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Coordinator[_ngcontent-%COMP%]{fill:var(--network-graph-node-coordinator);r:25;stroke-width:3px;stroke:#fff}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Router[_ngcontent-%COMP%]{fill:var(--network-graph-node-router);r:20;stroke:#fff}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-EndDevice[_ngcontent-%COMP%]{fill:var(--network-graph-node-enddevice);r:15;stroke:#0000004d}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-faded[_ngcontent-%COMP%]{fill:var(--network-graph-node-faded);opacity:.3;cursor:not-allowed}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-faded[_ngcontent-%COMP%]:hover{r:20;filter:none}.network-graph-container[_ngcontent-%COMP%]   .network-link[_ngcontent-%COMP%]{stroke:var(--network-graph-link-default);stroke-width:1px;opacity:.6;transition:all .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-link[_ngcontent-%COMP%]:hover{stroke:var(--network-graph-node-default);stroke-width:3px;opacity:1;filter:drop-shadow(0 0 4px var(--network-graph-link-hover-shadow))}.network-graph-container[_ngcontent-%COMP%]   .network-link.link-faded[_ngcontent-%COMP%]{stroke:var(--network-graph-link-faded);opacity:.1;pointer-events:none}.network-graph-container[_ngcontent-%COMP%]   .network-link.link-faded[_ngcontent-%COMP%]:hover{stroke:var(--network-graph-link-faded);stroke-width:1px;opacity:.1;filter:none}.network-graph-container[_ngcontent-%COMP%]   .network-label[_ngcontent-%COMP%]{font-weight:500;font-size:12px;pointer-events:none;transition:opacity .3s ease}.network-graph-container[_ngcontent-%COMP%]   .network-label.label-faded[_ngcontent-%COMP%]{opacity:.3}.network-graph-container[_ngcontent-%COMP%]   .lqi-label-bg[_ngcontent-%COMP%]{fill:var(--app-background-color);stroke:var(--app-border-color);stroke-width:1;pointer-events:none}.network-graph-container[_ngcontent-%COMP%]   .lqi-label[_ngcontent-%COMP%]{pointer-events:none;text-anchor:middle;fill:var(--app-text-color);font-size:11px;font-weight:600}@media(max-width:768px){.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Coordinator[_ngcontent-%COMP%]{r:20}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-Router[_ngcontent-%COMP%]{r:16}.network-graph-container[_ngcontent-%COMP%]   .network-node.node-type-EndDevice[_ngcontent-%COMP%]{r:12}.network-graph-container[_ngcontent-%COMP%]   .network-node[_ngcontent-%COMP%]:hover{r:20}.network-graph-container[_ngcontent-%COMP%]   .network-label[_ngcontent-%COMP%]{font-size:10px}}"]})};function ay(t,n){if(t&1&&b(0),t&2){let e=n;Gi(" Nodes: ",e.nodes.length," | Links: ",e.links.length," ")}}var Pa=class t{networkData=P(null);bridgeService=d(Te);applicationService=d(ut);constructor(){Ce(()=>{let e=this.bridgeService.bridgeInfo()?.networkMap;if(console.log("NMChange"),e){console.log(e);let r=e.value;console.log(r),this.networkData.set(r)}}),this.applicationService.mainTitle="NETWORK_VIEW"}scan(){console.log("Start network scan"),this.bridgeService.requestMap()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["NetworkMapPage"]],decls:8,vars:2,consts:[[1,"flex","flex-col","gap-4","p-4","h-full"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-blue-500","text-white","rounded",3,"click"],[1,"text-sm","text-gray-400"],[1,"flex-1","min-h-0","border","border-gray-600","rounded"],[1,"w-full","h-full",3,"networkData"]],template:function(e,r){if(e&1&&(g(0,"div",0)(1,"div",1)(2,"button",2),k("click",function(){return r.scan()}),b(3,"Scan Network"),_(),g(4,"div",3),G(5,ay,1,2),_()(),g(6,"div",4),X(7,"app-network-graph",5),_()()),e&2){let i;f(5),H((i=r.networkData())?5:-1,i),f(2),N("networkData",r.networkData())}},dependencies:[Na],encapsulation:2})};var sy=t=>({name:t}),nr=class t{translate=d(ct);dialogRef=d(vn);data=d(_n);cancel(){this.dialogRef.close()}ok(){this.dialogRef.close(ve(I({},this.data),{delete:!0}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["DeleteObjectDialog"]],decls:19,vars:15,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"danger","min-w-20",3,"click"],[1,"primary","min-w-20",3,"click"]],template:function(e,r){e&1&&(ne(0,"div",0)(1,"header")(2,"div",1),b(3),R(4,"translate"),oe()(),ne(5,"div",2)(6,"span"),b(7),R(8,"translate"),oe()(),ne(9,"footer")(10,"div",3),cn(11,"div",4),ne(12,"div",5)(13,"button",6),ke("click",function(){return r.ok()}),b(14),R(15,"translate"),oe(),ne(16,"button",7),ke("click",function(){return r.cancel()}),b(17),R(18,"translate"),oe()()()()()),e&2&&(f(3),M(O(4,4,r.data.title)),f(4),M(rt(8,6,r.data.message,nt(13,sy,r.data.objectName))),f(7),M(O(15,9,"DELETE")),f(3),M(O(18,11,"CANCEL")))},dependencies:[se,pe],styles:["button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}"]})};var ly=t=>({name:t});function cy(t,n){if(t&1){let e=K();ne(0,"div",3)(1,"label",8),b(2),R(3,"translate"),oe(),ne(4,"div",9)(5,"input",10),ke("change",function(i){let o=j(e).$implicit,a=S();return U(a.changeProperty(o.name,i))}),oe()()()}if(t&2){let e=n.$implicit,r=S();f(),Br("htmlFor",Nt("input_",e.name)),f(),M(O(3,6,e.label)),f(3),Br("id",Nt("input_",e.name))("value",r.dialogData.data[e.name])}}var Lr=class t{translate=d(ct);dialogRef=d(vn);dialogData=d(_n);cancel(){this.dialogRef.close()}changeProperty(n,e){n&&e.target.value&&(this.dialogData.data[n]=e.target.value)}ok(){this.dialogRef.close(ve(I({},this.dialogData),{created:!0}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["AddObjectDialog"]],decls:21,vars:15,consts:[[1,"modal"],[1,"title"],[1,"message"],[1,"container"],[1,"buttonGroup"],[1,"warp"],[1,"ml-auto","flex","flex-row","gap-2"],[1,"primary","min-w-20",3,"click"],[3,"for"],[1,"input-container"],[1,"w-full","text-left","panel",3,"change","id","value"]],template:function(e,r){e&1&&(ne(0,"div",0)(1,"header")(2,"div",1),b(3),R(4,"translate"),oe()(),ne(5,"div",2)(6,"span"),b(7),R(8,"translate"),oe()(),Ee(9,cy,6,8,"div",3,Xe),ne(11,"footer")(12,"div",4),cn(13,"div",5),ne(14,"div",6)(15,"button",7),ke("click",function(){return r.ok()}),b(16),R(17,"translate"),oe(),ne(18,"button",7),ke("click",function(){return r.cancel()}),b(19),R(20,"translate"),oe()()()()()),e&2&&(f(3),M(O(4,4,r.dialogData.title)),f(4),M(rt(8,6,r.dialogData.message,nt(13,ly,r.dialogData.objectName))),f(2),Re(r.dialogData.control),f(7),M(O(17,9,"ADD")),f(3),M(O(20,11,"CANCEL")))},dependencies:[se,pe],styles:["label[_ngcontent-%COMP%]{width:20%;height:32px;line-height:32px}.container[_ngcontent-%COMP%]{padding:2px 20px 10px!important;display:flex;flex-direction:row}button[_ngcontent-%COMP%]{color:var(--dialog-button-text-color);font-weight:400}"]})};function uy(t,n){if(t&1){let e=K();g(0,"div",4)(1,"ExpansionPanelComponent",9)(2,"div",5)(3,"span",10),b(4),R(5,"translate"),_(),g(6,"span",11)(7,"div",12)(8,"div",13)(9,"input",14),k("change",function(i){let o=j(e).$implicit,a=S(2);return U(a.updateSceneName(o.id,i))}),_()()()()(),g(10,"div",15)(11,"button",7),k("click",function(){let i=j(e).$implicit,o=S(2);return U(o.recallScene(i.id))}),b(12),R(13,"translate"),_()(),g(14,"div",16)(15,"div",17)(16,"button",7),k("click",function(){let i=j(e).$implicit,o=S(2);return U(o.updateScene(i.id,i.name))}),b(17),R(18,"translate"),_(),g(19,"span",18),b(20,"This will also save the state of all members of this scene"),_()()(),g(21,"div",15)(22,"button",8),k("click",function(){let i=j(e).$implicit,o=S(2);return U(o.deleteScene(i.id,i.name))}),b(23),R(24,"translate"),_()()()()}if(t&2){let e=n.$implicit;f(),N("label",Hi("",e.name," (",e.id,")"))("colorTrigger",!1),f(3),M(O(5,9,"SCENE_NAME")),f(5),N("value",e.name||""),f(3),M(O(13,11,"RECALL_SCENE")),f(5),M(O(18,13,"UPDATE_SCENE")),f(6),M(O(24,15,"DELETE_SCENE"))}}function dy(t,n){if(t&1){let e=K();g(0,"div",1)(1,"div",2),b(2),R(3,"translate"),_()(),g(4,"div",3),Ee(5,uy,25,17,"div",4,Xe),g(7,"div",5)(8,"div",6)(9,"button",7),k("click",function(){j(e);let i=S();return U(i.newScene())}),b(10),R(11,"translate"),_()()(),g(12,"div",5)(13,"div",6)(14,"button",8),k("click",function(){j(e);let i=S();return U(i.deleteAllScenes())}),b(15),R(16,"translate"),_()()()()}if(t&2){let e=S();f(2),M(O(3,5,"SCENES")),f(3),Re(e.group().scenes),f(5),M(O(11,7,"NEW_SCENE")),f(4),ae("disabled",e.group().scenes.length===0),f(),M(O(16,9,"DELETE_ALL_SCENES"))}}var Aa=class t{groupStore=d(At);bridgeService=d(Te);dialog=d(Lt);group_id=me.required();group=q(()=>{let n=zn(this.groupStore,{criteria:[{property:"id",value:this.group_id(),operator:"equals"}],logicalOperator:"AND"},!1,void 0);return n().length>0?n()[0]:null});recallScene(n){this.group()&&this.bridgeService.recallScene(this.group().friendly_name,n)}updateSceneName(n,e){let r=e.target.value;if(this.group()&&r){let i=this.group().scenes.findIndex(o=>o.id===n);if(i>-1){let o=ve(I({},this.group().scenes[i]),{name:r});console.log(o),this.group().scenes[i]=o}else console.log("ID NF",n)}}deleteScene(n,e){let r={title:"DELETE_SCENE",message:"WANT_DELETE_SCENE",objectName:e,delete:!1};this.dialog.open(nr,{height:"400px",width:"600px",data:r}).closed.subscribe(o=>{o!==void 0&&o.delete===!0&&this.bridgeService.deleteScene(this.group().friendly_name,n)})}updateScene(n,e){let r={scene_store:{ID:n,name:e}};this.bridgeService.saveScene(this.group().friendly_name,r)}newScene(){let n=this.group()&&this.group()?.scenes?this.group()?.scenes.map(o=>o.id):[],r={data:{id:eo(n??[]),name:""},title:"ADD_SCENE",message:"ADD_SCENE_DATA",control:[{name:"id",label:"SCENE_ID"},{name:"name",label:"SCENE_NAME"}],created:!1};this.dialog.open(Lr,{height:"400px",width:"600px",data:r}).closed.subscribe(o=>{if(o!==void 0&&o.created===!0){let a={scene_store:{ID:o.data.id,name:o.data.name}};this.bridgeService.saveScene(this.group().friendly_name,a)}})}deleteAllScenes(){let n={title:"DELETE_ALL_SCENES",message:"WANT_DELETE_ALL_SCENES",objectName:"",delete:!1};this.dialog.open(nr,{height:"400px",width:"600px",data:n}).closed.subscribe(r=>{r!==void 0&&r.delete===!0&&this.bridgeService.deleteAllScenes(this.group().friendly_name)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["GroupSceneComponent"]],inputs:{group_id:[1,"group_id"]},decls:2,vars:1,consts:[[1,"containerwrapper"],[1,"container","header"],[1,"font-bold","text-center","mt-5"],[1,"container"],[1,"group_row","flex","mt-5"],[1,"sidbar_row"],[1,"button","w-full"],[1,"button-link","left",3,"click"],[1,"button-link-danger","left",3,"click"],["titleClass","center","contentClass","content_filled",1,"panel","w-full",2,"flex-grow","inherit",3,"label","colorTrigger"],[1,"label"],[1,"value"],[1,"input-container"],[1,"input-content"],[1,"w-full","text-right","panel",3,"change","value"],[1,"button"],[1,"button","hint"],[1,"flex","flex-col"],[1,"hint","ml-1"]],template:function(e,r){e&1&&(g(0,"div",0),G(1,dy,17,11),_()),e&2&&(f(),H(r.group()!==null?1:-1))},dependencies:[se,Yi,pe],styles:["[_nghost-%COMP%]{flex:1;display:flex}"]})};var Nf=["*","*"];function py(t,n){t&1&&(g(0,"span",4),b(1,"arrow_drop_down"),_())}function fy(t,n){t&1&&(g(0,"span",4),b(1,"arrow_drop_up"),_())}function hy(t,n){t&1&&(g(0,"div",1)(1,"div"),X(2,"SearchInput"),_(),g(3,"div"),Ct(4),_()())}function my(t,n){t&1&&Ct(0,1)}var La=class t extends Yi{device=me.required();static \u0275fac=(()=>{let n;return function(r){return(n||(n=or(t)))(r||t)}})();static \u0275cmp=V({type:t,selectors:[["ExpansionPanelDeviceComponent"]],inputs:{device:[1,"device"]},features:[ln],ngContentSelectors:Nf,decls:13,vars:16,consts:[["type","button","tabindex","0",1,"trigger",3,"click"],[1,"root_control"],[1,"w-full","flex","flex-row","items-center"],[1,"max-w-7","ml-3",3,"device"],[1,"material-symbols-outlined"],[1,"content","flex","flex-col",2,"flex-grow","inherit"],[1,"options","flex","flex-col",2,"flex-grow","inherit"]],template:function(e,r){e&1&&(un(Nf),g(0,"div")(1,"button",0),k("click",function(){return r.toggle()}),g(2,"div",1)(3,"div",2),X(4,"DeviceImage",3),g(5,"div"),b(6),_()()(),G(7,py,2,0,"span",4)(8,fy,2,0,"span",4),_(),g(9,"div",5)(10,"div",6),G(11,hy,5,0,"div",1)(12,my,1,0),_()()()),e&2&&($r(Nt("root_control flex flex-col ",r.contentClass())),ae("panel-open",r.isOpen()===!0),f(),ae("trigger-colored",r.colorTrigger()===!0),f(3),N("device",r.device()),f(),$r(Nt("title ",r.titleClass()," ml-3")),f(),M(r.label()?r.label():r.device().friendly_name),f(),H(r.isOpen()===!1?7:8),f(2),ae("content-open",r.isOpen()),f(2),H(r.hasSearch()===!0?11:12))},dependencies:[lr,Fn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{display:grid;grid-template-rows:0fr;overflow:hidden;transition:grid-template-rows .3s ease-out;opacity:0;pointer-events:none}.content-open[_ngcontent-%COMP%]{grid-template-rows:1fr;opacity:1;pointer-events:auto;overflow:visible;transition:grid-template-rows .3s ease-out,opacity .3s ease-out}.content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-height:0}.content[_ngcontent-%COMP%] > .options[_ngcontent-%COMP%]{padding:2px 7px;min-width:0;overflow:hidden}.content[_ngcontent-%COMP%] > .options[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%]{border:none}.trigger[_ngcontent-%COMP%]{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font:inherit;gap:4px;justify-content:space-between;margin:0;padding:7px;width:100%}.trigger.trigger-colored[_ngcontent-%COMP%]:focus-within{outline:1px solid;outline-color:var(--expansion-panel-trigger-focus-color)}.trigger[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%]{display:flex;gap:4px;width:100%;border:none}.trigger[_ngcontent-%COMP%] > .root_control[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;color:var(--app-text-color);font-size:12px;line-height:16px;margin-top:2px;font-size:16px;font-weight:400}.root_control[_ngcontent-%COMP%]{display:flex}.panel-open[_ngcontent-%COMP%]{flex-grow:inherit}.content_filled[_ngcontent-%COMP%]{background-color:var(--app-panel-color)}",".trigger[_ngcontent-%COMP%]{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font:inherit;gap:4px;justify-content:space-between;margin:0;padding:4px 7px 2px 3px;width:100%}"]})};var Pf=()=>({maxShown:10,showSelection:!1,multi:!1}),gy=t=>({id:t}),vy=t=>[t];function _y(t,n){if(t&1){let e=K();g(0,"div",9)(1,"ExpansionPanelDeviceComponent",15),R(2,"translate"),g(3,"div",16),X(4,"DeviceFeaturesComponent",17),g(5,"div",18)(6,"button",14),k("click",function(){let i=j(e).$implicit,o=S(2);return U(o.removeDeviceFromGroup(i.device,i.endpoint))}),b(7),R(8,"translate"),_()()()()()}if(t&2){let e=n.$implicit;f(),N("label",Hi("",e==null||e.device==null?null:e.device.friendly_name," (",rt(2,8,"ENDPOINT_",nt(13,gy,e.endpoint)),")"))("device",e==null?null:e.device)("colorTrigger",!1),f(3),N("ieee_address",e==null||e.device==null?null:e.device.ieee_address)("filterEndpoints",nt(15,vy,e.endpoint)),f(3),M(O(8,11,"REMOVE_DEVICE"))}}function yy(t,n){if(t&1){let e=K();g(0,"div",4)(1,"div",11)(2,"OptionPanelComponent",12),k("optionsChanged",function(i){j(e);let o=S(2);return U(o.selectNewEndPoint(i))}),_()()()}if(t&2){let e=S(2);f(2),N("title",Ie(e.endPointSelectorTitle()))("entities",e.selectedDeviceEndPoints())("options",Ln(4,Pf))}}function wy(t,n){if(t&1){let e=K();g(0,"div",4)(1,"div",19)(2,"button",20),k("click",function(){j(e);let i=S(2);return U(i.addDevice())}),b(3),R(4,"translate"),_()()()}t&2&&(f(3),M(O(4,1,"ADD")))}function Cy(t,n){if(t&1){let e=K();g(0,"div",1)(1,"div",2),b(2),R(3,"translate"),_()(),g(4,"div",3)(5,"div",4)(6,"span",5),b(7),R(8,"translate"),_(),g(9,"span",6),b(10),g(11,"span",7),k("click",function(){j(e);let i=S();return U(i.renameGroup())}),b(12,"edit_square"),_()()(),g(13,"div",1)(14,"div",8),b(15),R(16,"translate"),_()(),Ee(17,_y,9,17,"div",9,Xe),g(19,"div",10)(20,"div",1)(21,"div",8),b(22),R(23,"translate"),_()(),g(24,"div",4)(25,"div",11)(26,"OptionPanelComponent",12),k("optionsChanged",function(i){j(e);let o=S();return U(o.selectNewDevice(i))}),_()()(),G(27,yy,3,5,"div",4),G(28,wy,5,3,"div",4),_(),g(29,"div",4)(30,"div",13)(31,"button",14),k("click",function(){j(e);let i=S();return U(i.deleteGroup())}),b(32),R(33,"translate"),_()()()()}if(t&2){let e,r,i=S();f(2),M(O(3,12,"SETTINGS")),f(5),M(O(8,14,"FRIENDLY_NAME")),f(3),M((e=i.group())==null?null:e.friendly_name),f(5),M(O(16,16,"DEVICES")),f(2),Re(i.members()),f(5),M(O(23,18,"ADD_DEVICE")),f(4),N("title",Ie(i.deviceSelectorTitle()))("entities",i.deviceNameList())("options",Ln(22,Pf)),f(),H(i.selectedDevice()!==null&&((r=i.selectedDevice())!=null&&r.endpoints)?27:-1),f(),H(i.selectedDevice()!==null&&i.selectedEndpointId()!==null?28:-1),f(4),M(O(33,20,"DELETE_GROUP"))}}var za=class t{groupStore=d(At);deviceStore=d(hn);deviceService=d(ur);translate=d(ct);bridgeService=d(Te);dialog=d(Lt);tabManager=d(Qe);group_id=me.required();group=q(()=>{let n=zn(this.groupStore,{criteria:[{property:"id",value:this.group_id(),operator:"equals"}],logicalOperator:"AND"},!1,void 0);return n().length>0?n()[0]:null});members=q(()=>{let n=this.group()?.members,e=this.deviceStore.entities();return n?.map(r=>({device:e.find(i=>i.ieee_address===r.ieee_address),endpoint:r.endpoint}))});selectedDevice=P(null);selectedEndpointId=P(null);deviceSelectorTitle=q(()=>{let n=this.selectedDevice();return n!==null?n.friendly_name:this.translate.instant("SELECT_DEVICE")});selectedDeviceEndPoints=q(()=>{let n=this.selectedDevice();return n!==null?Object.keys(n.endpoints).map(e=>({label:e,value:e,isSelected:!1})):[]});endPointSelectorTitle=q(()=>{let n=this.selectedEndpointId();return n!==null?this.translate.instant("ENDPOINT_",{id:n}):this.translate.instant("ENDPOINT")});availabelDevices=zn(this.deviceStore,{criteria:[{property:"type",value:"Coordinator",operator:"not"}],logicalOperator:"AND"},!1,void 0);deviceNameList=q(()=>this.availabelDevices().map(e=>({isSelected:!1,label:e.friendly_name,value:e.ieee_address})).sort((e,r)=>e.label>r.label?1:e.label<r.label?-1:0));renameGroup(){console.log(this.group())}deleteGroup(){if(this.group()){let n={title:"DELETE_GROUP",message:"WANT_DELETE_GROUP",objectName:this.group()?.friendly_name,delete:!1};this.dialog.open(nr,{height:"400px",width:"600px",data:n}).closed.subscribe(r=>{if(r!==void 0&&r.delete===!0){let i=this.group().id;this.bridgeService.deleteGroup(this.group().friendly_name),this.tabManager.closeTab(String(i))}})}}removeDeviceFromGroup(n,e){if(this.group()){let r={device:n.friendly_name,group:this.group().friendly_name,endpoint:e};this.deviceService.removeDeviceFromGroup(r)}}addDevice(){let n=this.selectedDevice(),e=this.selectedEndpointId(),r=this.group();if(n&&e&&r){let i={device:n.friendly_name,group:r.friendly_name,endpoint:e};this.deviceService.addDeviceToGroup(i),this.selectedDevice.set(null),this.selectedEndpointId.set(null)}}selectNewDevice(n){let e=this.availabelDevices().find(r=>r.ieee_address===n.value);if(e){this.selectedDevice.set(e);let r=e.endpoints;if(r){if(Object.keys(r).length===1){let i=Object.keys(r)[0];this.selectedEndpointId.set(i)}}else this.selectedEndpointId.set(null)}}selectNewEndPoint(n){if(this.selectedDevice()){let r=n.value;this.selectedEndpointId.set(r)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["GroupInfoComponent"]],inputs:{group_id:[1,"group_id"]},decls:2,vars:1,consts:[[1,"containerwrapper"],[1,"container","header"],[1,"font-bold","text-center","w-full","mt-5"],[1,"container"],[1,"sidbar_row"],[1,"label"],[1,"value","flex","flex-row"],[1,"material-symbols-outlined","edit_icon","mr-2","ml-2","cursor-pointer",3,"click"],[1,"font-bold","text-left","w-full","mt-5"],[1,"sidbar_row","flex"],[1,"row"],[1,"mt-2","w-full"],[1,"panel","w-full",2,"flex-grow","inherit",3,"optionsChanged","title","entities","options"],[1,"mt-5","button"],[1,"button-link-danger","left",3,"click"],["titleClass","center","contentClass","content_filled",1,"panel","w-full",2,"flex-grow","inherit",3,"device","label","colorTrigger"],[1,"wrapper"],["displayMode","scene",3,"ieee_address","filterEndpoints"],[1,"button","ml-2"],[1,"button"],[1,"button-link","left",3,"click"]],template:function(e,r){e&1&&(g(0,"div",0),G(1,Cy,34,23),_()),e&2&&(f(),H(r.group()!==null?1:-1))},dependencies:[se,La,to,gn,pe],styles:["[_nghost-%COMP%]{flex:1;display:flex}.group_row[_ngcontent-%COMP%]{display:flex;min-height:20px;-webkit-box-pack:justify;justify-content:space-between;width:100%;padding:.5em;margin-top:.5em;gap:8px;color:var(--app-text-color)}.header[_ngcontent-%COMP%]{display:flex;align-items:center}.edit_icon[_ngcontent-%COMP%]{max-width:13px;color:var(--app-link-color)}"]})};function by(t,n){if(t&1&&X(0,"GroupInfoComponent",10),t&2){let e=S(2);N("group_id",e.group().id)}}function xy(t,n){if(t&1&&X(0,"GroupSceneComponent",10),t&2){let e=S(2);N("group_id",e.group().id)}}function Sy(t,n){if(t&1){let e=K();g(0,"header",0)(1,"h1",1),b(2),_(),g(3,"div",2)(4,"button",3),k("click",function(){j(e);let i=S();return U(i.closeSidebar())}),g(5,"span",4),b(6,"close"),_(),X(7,"div",5),_()()(),g(8,"nav",6)(9,"button",7),k("click",function(){j(e);let i=S();return U(i.panel.set(1))}),g(10,"span",4),b(11,"dashboard"),_()(),g(12,"button",8),k("click",function(){j(e);let i=S();return U(i.panel.set(2))}),g(13,"span",4),b(14,"wallpaper_slideshow"),_()()(),g(15,"div",9),G(16,by,1,1,"GroupInfoComponent",10),G(17,xy,1,1,"GroupSceneComponent",10),_()}if(t&2){let e,r=S();f(2),M((e=r.group())==null?null:e.friendly_name),f(7),ae("navbutton-selected",r.panel()===1),f(3),ae("navbutton-selected",r.panel()===2),f(4),H(r.panel()===1?16:-1),f(),H(r.panel()===2?17:-1)}}var Fa=class t{groupStore=d(At);tabManager=d(Qe);groupid=me.required();panel=P(1);group=q(()=>this.groupid()?this.groupStore.entities().find(n=>String(n.id)===this.groupid()):null);closeSidebar(){this.tabManager.closeTab(this.groupid())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["GroupInspectorComponent"]],inputs:{groupid:[1,"groupid"]},decls:1,vars:1,consts:[[1,"h-14","flex","items-center","justify-between","px-4"],[1,"text-lg","font-semibold","w-full","text-center"],[1,"wrap"],["type","button",1,"headerButton",3,"click"],[1,"material-symbols-outlined"],[1,"stateIcon"],[1,"inspector"],["title","Settings",1,"navbutton",3,"click"],["title","Scenes",1,"navbutton",3,"click"],[1,"flex-1","flex","flex-col"],[3,"group_id"]],template:function(e,r){e&1&&G(0,Sy,18,7),e&2&&H(r.group()!==null?0:-1)},dependencies:[za,Aa],styles:['[_nghost-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;flex-basis:0%;flex-grow:1;flex-shrink:1;font-family:Inter,UI Sans,Lato,Arial,sans-serif;font-feature-settings:"kern";font-synthesis-small-caps:none;font-synthesis-style:none;font-synthesis-weight:none;font-variant-ligatures:no-common-ligatures;background-color:var(--app-background-color);line-height:18.4px;padding-bottom:0;padding-right:2px;padding-top:0;position:relative;-webkit-font-smoothing:antialiased;border-color:var(--app-section-border-color)}']})};var ja=class t{group=me();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["GroupImage"]],inputs:{group:[1,"group"]},decls:2,vars:0,consts:[[1,"material-symbols-outlined","pt-2"]],template:function(e,r){e&1&&(ne(0,"span",0),b(1,"group_work"),oe())},encapsulation:2})};function Dy(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",e.id," ")}}function Ty(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",e.friendly_name," ")}}function Ey(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",e.members?e.members.length:0," ")}}function Ry(t,n){if(t&1&&b(0),t&2){let e=n.$implicit;de(" ",e.scenes?e.scenes.length:0," ")}}var Ua=class t{injector=d(kt);groupStore=d(At);applicationService=d(ut);tabManager=d(Qe);dialog=d(Lt);bridgeService=d(Te);tableSettings=Yt(Vt);displayedColumns=P(["id","friendly_name","members","scenes"]);tableConfig=q(()=>{let n=[{id:"id",label:"ID",hideLabel:!0,minWidth:50,maxWidth:50,sortable:!0},{id:"friendly_name",label:"NAME",minWidth:250,maxWidth:450,sortable:!0},{id:"members",label:"MEMBERS",minWidth:50,maxWidth:200,sortable:!1},{id:"scenes",label:"SCENES",minWidth:50,maxWidth:200,sortable:!1}],e=this.displayedColumns();n.forEach(o=>{o.hidden=!e.includes(o.id)});let r=this.selectedGroup(),i=this.sortDirection();return{columns:n,trackByFn:(o,a)=>a.id||o,selectedItem:r||void 0,onRowClick:o=>this.selectGroup(o.id),initialSort:{column:this.sortColumn(),direction:i==="asc"||i==="desc"?i:"asc"},settingsControl:this.tableSettings()}});sortColumn=P("id");sortDirection=P("asc");selectedGroup=q(()=>this.groupStore.selectedEntity());datasourceSignal=P(null);groups=q(()=>{let n=this.groupStore.entities();return Zi(n,this.sortColumn(),this.sortDirection(),(e,r)=>this.getGroupValue(e,r))});get datasource(){return this.datasourceSignal()||new Dn(this.groups,this.injector)}constructor(){this.applicationService.mainTitle="GROUP_VIEW"}trackByFn(n,e){return e.friendly_name||String(e.id)}onSort(n){this.sortColumn.set(n.column),this.sortDirection.set(n.direction)}selectGroup(n){let e=this.groupStore.entities().find(r=>r.id===n);e&&this.tabManager.openTab({id:String(n),label:e.friendly_name,data:{groupid:String(n)},component:Fa,iconComponent:ja,iconData:{group:e}})}getGroupValue(n,e){switch(e){case"friendly_name":return n.friendly_name?.toLowerCase()||"";case"id":return n.id||0}}createGroup(){let n=this.groupStore&&this.groupStore?.entities()?this.groupStore?.entities().map(o=>o.id):[];console.log(n);let r={data:{id:eo(n??[],1),name:""},title:"ADD_GROUP",message:"ADD_GROUP_DATA",control:[{name:"id",label:"GROUP_ID"},{name:"name",label:"GROUP_NAME"}],created:!1};this.dialog.open(Lr,{height:"400px",width:"600px",data:r}).closed.subscribe(o=>{o!==void 0&&o.created===!0&&this.bridgeService.addGroup(o.data.id,o.data.name)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["GroupListComponent"]],viewQuery:function(e,r){e&1&&Qt(r.tableSettings,Vt,5),e&2&&dn()},decls:14,vars:5,consts:[[1,"flex","w-full","overflow-x-hidden","flex-grow","h-full"],[1,"mt-2"],[1,"w-full","ml-2","overflow-y-auto","scrollbar"],[3,"sortChange","rowClick","dataSource","config"],["appTableCell","id"],["appTableCell","friendly_name"],["appTableCell","members"],["appTableCell","scenes"],[1,"button"],[1,"button-link","left",3,"click"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"SettingsBarComponent")(2,"div",1),X(3,"TableSettingsControl"),_()(),g(4,"div",2)(5,"TableComponent",3),k("sortChange",function(o){return r.onSort(o)})("rowClick",function(o){return r.selectGroup(o.id)}),wt(6,Dy,1,1,"ng-template",4)(7,Ty,1,1,"ng-template",5)(8,Ey,1,1,"ng-template",6)(9,Ry,1,1,"ng-template",7),_(),g(10,"div",8)(11,"button",9),k("click",function(){return r.createGroup()}),b(12),R(13,"translate"),_()()()()),e&2&&(f(5),N("dataSource",r.datasource)("config",r.tableConfig()),f(7),M(O(13,3,"CREATE_NEW_GROUP")))},dependencies:[Rr,Sn,Vt,se,Mr,pe],styles:["[_nghost-%COMP%]{display:flex}"]})};var Af=[{path:"",component:Yo,children:[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:Ko},{path:"devices",component:oa},{path:"network",component:Pa},{path:"groups",component:Ua}]}];var Va=class{constructor(n,e=[{prefix:"./assets/i18n/",suffix:".json"},{prefix:"./assets/i18n/zigbee/",suffix:".json"}]){this.http=n;this.resources=e}getTranslation(n){let e=this.resources.map(r=>this.http.get(`${r.prefix}${n}${r.suffix}`));return kl(e).pipe(we(r=>Object.assign({},...r)))}};var Lf={providers:[Ll(),tc({eventCoalescing:!0}),Hs(Af),vs(),mc({loader:{provide:hc,useFactory:t=>new Va(t),deps:[hr]}})]};var Ba=class t{title=P("sigbee2mqtt-dashboard");bs=d(Te);ds=d(ur);as=d(ut);translate=d(ct);darkClass="dark-theme";storageKey="theme";constructor(){this.translate.setFallbackLang("en");let n=this.translate.getBrowserLang();this.translate.use(n?.match(/en|de/)?n:"en"),window.matchMedia("(prefers-color-scheme: dark)").matches&&this.enableDarkMode()}enableDarkMode(){document.body.classList.add(this.darkClass),localStorage.setItem(this.storageKey,"dark")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-root"]],features:[Gr([])],decls:1,vars:0,template:function(e,r){e&1&&X(0,"router-outlet")},dependencies:[Wn,se],encapsulation:2})};ps(Ba,Lf).catch(t=>console.error(t));
